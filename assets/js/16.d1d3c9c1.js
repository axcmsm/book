(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{447:function(s,a,t){"use strict";t.r(a);var n=t(16),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"hadoop-入门概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hadoop-入门概述"}},[s._v("#")]),s._v(" hadoop 入门概述")]),s._v(" "),t("h3",{attrs:{id:"简介-了解"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#简介-了解"}},[s._v("#")]),s._v(" 简介 （了解）")]),s._v(" "),t("p",[s._v("Hadoop 是一个由 Apache 基金会所开发的分布式系统基础架构,主要解决，海量数据的存储和海量数据的分析计算问题。")]),s._v(" "),t("p",[t("strong",[s._v("Hadoop")]),s._v("通常是指一个更广泛的概念——Hadoop 生态圈。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/axcmsm/tmp/raw/master/bigdata/20210902172756.png",alt:""}})]),s._v(" "),t("p",[t("strong",[s._v("Hadoop 创始人 Doug Cutting")])]),s._v(" "),t("p",[t("strong",[s._v("Hadoop 三大发行版本：Apache、Cloudera、Hortonworks。")])]),s._v(" "),t("p",[t("strong",[s._v("Hadoop 优势")]),s._v("：4 高")]),s._v(" "),t("ul",[t("li",[s._v("可靠性")]),s._v(" "),t("li",[s._v("高扩展")]),s._v(" "),t("li",[s._v("高效性")]),s._v(" "),t("li",[s._v("高容错")])]),s._v(" "),t("h3",{attrs:{id:"hadoop-组成-💨-面试重点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hadoop-组成-💨-面试重点"}},[s._v("#")]),s._v(" Hadoop 组成 💨（面试重点）")]),s._v(" "),t("h4",{attrs:{id:"hadoop1-x、2-x、3-x-区别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hadoop1-x、2-x、3-x-区别"}},[s._v("#")]),s._v(" "),t("strong",[s._v("Hadoop1.x、2.x、3.x 区别")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/axcmsm/tmp/raw/master/bigdata/20210902152609.png",alt:""}})]),s._v(" "),t("h4",{attrs:{id:"hdfs-概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hdfs-概述"}},[s._v("#")]),s._v(" HDFS 概述")]),s._v(" "),t("p",[s._v("Hadoop Distributed File System，简称 HDFS，是一个分布式文件系统")]),s._v(" "),t("p",[t("strong",[s._v("架构")]),s._v("：")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("Namenode(nn)")]),s._v(" "),t("blockquote",[t("p",[s._v("存储文件的元数据，如文件名，文件目录结构，文件属性（生成时间、副本数、 文件权限），以及每个文件的块列表和块所在的 DataNode 等。")])])]),s._v(" "),t("li",[t("p",[s._v("DataNode(dn)")]),s._v(" "),t("blockquote",[t("p",[s._v("在本地文件系统存储文件块数据，以及块数据的校验和。")])])]),s._v(" "),t("li",[t("p",[s._v("Secondary NameNode(2nn)")]),s._v(" "),t("blockquote",[t("p",[s._v("每隔一段时间对 NameNode 元数据备份")])])])]),s._v(" "),t("h4",{attrs:{id:"yarn-概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#yarn-概述"}},[s._v("#")]),s._v(" YARN 概述")]),s._v(" "),t("p",[s._v("Yet Another Resource Negotiator 简称 YARN ，另一种资源协调者，是 Hadoop 的资源管理器。")]),s._v(" "),t("p",[t("strong",[s._v("架构")])]),s._v(" "),t("ul",[t("li",[t("p",[s._v("ResourceManager（RM）")]),s._v(" "),t("blockquote",[t("p",[s._v("整个集群资源（内存、CPU 等）的老大")])])]),s._v(" "),t("li",[t("p",[s._v("ApplicationMaster（AM）")]),s._v(" "),t("blockquote",[t("p",[s._v("单个任务运行的老大")])])]),s._v(" "),t("li",[t("p",[s._v("NodeManager（N M）")]),s._v(" "),t("blockquote",[t("p",[s._v("单个节点服务器资源老大")])])]),s._v(" "),t("li",[t("p",[s._v("Container：")]),s._v(" "),t("blockquote",[t("p",[s._v("容器，相当一台独立的服务器，里面封装了\n任务运行所需要的资源，如内存、CPU、磁盘、网络等。")])])])]),s._v(" "),t("h4",{attrs:{id:"mapreduce-概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mapreduce-概述"}},[s._v("#")]),s._v(" MapReduce 概述")]),s._v(" "),t("p",[s._v("MapReduce 将计算过程分为两个阶段：Map 和 Reduce")]),s._v(" "),t("p",[t("strong",[s._v("架构")]),s._v(":")]),s._v(" "),t("ul",[t("li",[s._v("Map 阶段并行处理输入数据")]),s._v(" "),t("li",[s._v("Reduce 阶段对 Map 结果进行汇总")])]),s._v(" "),t("h4",{attrs:{id:"三者关系"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三者关系"}},[s._v("#")]),s._v(" 三者关系")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/axcmsm/tmp/raw/master/bigdata/20210902153326.png",alt:""}})]),s._v(" "),t("h3",{attrs:{id:"大数据技术生态体系"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#大数据技术生态体系"}},[s._v("#")]),s._v(" 大数据技术生态体系")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/axcmsm/tmp/raw/master/bigdata/20210902153420.png",alt:""}})]),s._v(" "),t("p",[t("strong",[s._v("概述")]),s._v("：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("1）Sqoop：Sqoop 是一款开源的工具，主要用于在 Hadoop、Hive 与传统的数据库（MySQL）\n间进行数据的传递，可以将一个关系型数据库（例如 ：MySQL，Oracle 等）中的数据导进\n到 Hadoop 的 HDFS 中，也可以将 HDFS 的数据导进到关系型数据库中。\n2）Flume：Flume 是一个高可用的，高可靠的，分布式的海量日志采集、聚合和传输的系统，\nFlume 支持在日志系统中定制各类数据发送方，用于收集数据；\n3）Kafka：Kafka 是一种高吞吐量的分布式发布订阅消息系统；\n4）Spark：Spark 是当前最流行的开源大数据内存计算框架。可以基于 Hadoop 上存储的大数\n据进行计算。\n5）Flink：Flink 是当前最流行的开源大数据内存计算框架。用于实时计算的场景较多。\n6）Oozie：Oozie 是一个管理 Hadoop 作业（job）的工作流程调度管理系统。\n7）Hbase：HBase 是一个分布式的、面向列的开源数据库。HBase 不同于一般的关系数据库，\n它是一个适合于非结构化数据存储的数据库。\n8）Hive：Hive 是基于 Hadoop 的一个数据仓库工具，可以将结构化的数据文件映射为一张\n数据库表，并提供简单的 SQL 查询功能，可以将 SQL 语句转换为 MapReduce 任务进行运\n行。其优点是学习成本低，可以通过类 SQL 语句快速实现简单的 MapReduce 统计，不必开\n发专门的 MapReduce 应用，十分适合数据仓库的统计分析。\n9）ZooKeeper：它是一个针对大型分布式系统的可靠协调系统，提供的功能包括：配置维护、\n名字服务、分布式同步、组服务等。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("h4",{attrs:{id:"推荐系统框架图"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#推荐系统框架图"}},[s._v("#")]),s._v(" 推荐系统框架图：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/axcmsm/tmp/raw/master/bigdata/20210902153553.png",alt:""}})]),s._v(" "),t("h2",{attrs:{id:"hadoop-运行环境搭建-⭕-开发重点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hadoop-运行环境搭建-⭕-开发重点"}},[s._v("#")]),s._v(" Hadoop 运行环境搭建 ⭕ （开发重点）")]),s._v(" "),t("h3",{attrs:{id:"模板虚拟机的准备"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#模板虚拟机的准备"}},[s._v("#")]),s._v(" 模板虚拟机的准备")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("安装虚拟机 （联网等）")])]),s._v(" "),t("li",[t("p",[s._v("安装 epel-release")]),s._v(" "),t("blockquote",[t("p",[s._v("为“红帽系”的操作系统提供额外的软件包， 适用于 RHEL、CentOS 和 Scientific Linux。相当于是一个软件仓库，大多数 rpm 包在官方 repository 中是找不到的）")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v(" yum install -y epel-release\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),t("p",[s._v("如果 Linux 安装的是最小系统版，还需要安装如下工具；如果安装的是 Linux 桌面标准版，不需要执行如下操作")])]),s._v(" "),t("p",[s._v("安装 net-tool、vim")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("yum install -y net-tools\nyum install -y vim\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("关闭防火墙、关闭开机自启")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v(" systemctl stop firewalld\n systemctl disable firewalld.service\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),t("p",[s._v("在企业开发时，通常单个服务器的防火墙时关闭的。公司整体对外会设置非常安 全的防火墙")])])]),s._v(" "),t("li",[t("p",[s._v("创建用户、修改用户密码")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v(" useradd axcmsm\n passwd axcmsm\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("配置 axcmsm 用户具有 root 权限，方便后期加 sudo 执行 root 权限")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("vim /etc/sudoers\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("修改/etc/sudoers 文件，在%wheel 这行下面添加一行，如下所示：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("## Allow root to run any commands anywhere\nroot ALL=(ALL) ALL\n\n## Allows people in group wheel to run all commands\n%wheel ALL=(ALL) ALL\n## 设置令牌\n## 放在 %wheel ALL=(ALL) ALL 下面 这个命令设置允许下面的令牌生效\naxcmsm       ALL=(ALL)       NOPASSWD:ALL\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),t("p",[s._v("axcmsm 这一行不要直接放到 root 行下面，因为所有用户都属于 wheel 组，你先 配置了 axcmsm 具有免密功能，但是程序执行到%wheel 行时，该功能又被覆盖回需要 密码。所以 axcmsm 要放到%wheel 这行下面。")])])]),s._v(" "),t("li",[t("p",[s._v("在/opt 目录下创建文件夹，并修改所属主和所属组")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("在/opt 目录下创建 module、software 文件夹")])]),s._v(" "),t("li",[t("p",[s._v("修改 module、software 文件夹的所有者和所属组均为 axcmsm 用户")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("chown axcmsm:axcmsm /opt/module\nchown axcmsm:axcmsm /opt/software\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("查看 module、software 文件夹的所有者和所属组")])])])]),s._v(" "),t("li",[t("p",[s._v("卸载虚拟机自带的 JDK")]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),t("p",[s._v("如果你的虚拟机是最小化安装不需要执行这一步。")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("rpm -qa | grep -i java | xargs -n1 rpm -e --nodeps\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("rpm -qa：查询所安装的所有 rpm 软件包\ngrep -i：忽略大小写\nxargs -n1：表示每次只传递一个参数\nrpm -e –nodeps：强制卸载软件\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("重启：reboot")])])]),s._v(" "),t("h3",{attrs:{id:"克隆虚拟机"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#克隆虚拟机"}},[s._v("#")]),s._v(" 克隆虚拟机")]),s._v(" "),t("p",[s._v("克隆三台虚拟机：hadoop102 hadoop103 hadoop104")]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),t("p",[s._v("克隆时，要先关闭 hadoop100")])]),s._v(" "),t("ul",[t("li",[t("p",[s._v("修改克隆虚拟机的静态 IP")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v(" vim /etc/sysconfig/network-scripts/ifcfg-ens33\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("改成：（有的修改没有的加上）")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('# 静态获取ip地址\nBOOTPROTO=static\n# 自动开启\nONBOOT="yes"\n# 你主机的ip\nIPADDR=192.168.10.102\n# 网关\nGATEWAY=192.168.10.2\n# dns\nDNS1=192.168.10.2\nDNS2=8.8.8.8\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("查看 Linux 虚拟机的虚拟网络编辑器，编辑->虚拟网络编辑器->VMnet8")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/axcmsm/tmp/raw/master/bigdata/20210902160237.png",alt:""}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/axcmsm/tmp/raw/master/bigdata/20210902160309.png",alt:""}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/axcmsm/tmp/raw/master/bigdata/20210902160357.png",alt:""}})])]),s._v(" "),t("li",[t("p",[s._v("保证 Linux 系统 ifcfg-ens33 文件中 IP 地址、虚拟网络编辑器地址和 Windows 系 统 VM8 网络 IP 地址相同。")])]),s._v(" "),t("li",[t("p",[s._v("修改克隆机主机名")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("vim /etc/hostname\nhadoop102\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("配置 Linux 克隆机主机名称映射 hosts 文件，打开/etc/hosts")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("192.168.10.100 hadoop100\n192.168.10.101 hadoop101\n192.168.10.102 hadoop102\n192.168.10.103 hadoop103\n192.168.10.104 hadoop104\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("重启 reboot")])]),s._v(" "),t("li",[t("p",[s._v("修改 windows 主机映射文件 hosts")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# C:\\Windows\\System32\\drivers\\etc\\hosts 路径\n192.168.10.100 hadoop100\n192.168.10.101 hadoop101\n192.168.10.102 hadoop102\n192.168.10.103 hadoop103\n192.168.10.104 hadoop104\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])])])]),s._v(" "),t("h3",{attrs:{id:"安装环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装环境"}},[s._v("#")]),s._v(" 安装环境")]),s._v(" "),t("p",[t("strong",[s._v("安装 jdk")])]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),t("p",[s._v("安装 JDK 前，一定确保提前删除了虚拟机自带的 JDK。")])]),s._v(" "),t("ul",[t("li",[t("p",[s._v("用 XShell 传输工具将 JDK 导入到 opt 目录下面的 software 文件夹下面")])]),s._v(" "),t("li",[t("p",[s._v("在 Linux 系统下的 opt 目录中查看软件包是否导入成功")])]),s._v(" "),t("li",[t("p",[s._v("解压 JDK 到/opt/module 目录下")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("tar -zxvf jdk-8u212-linuxx64.tar.gz -C /opt/module/\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("配置 JDK 环境变量")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("新建/etc/profile.d/my_env.sh 文件")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("sudo vim /etc/profile.d/my_env.sh\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("添加内容")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("#JAVA_HOME\nexport JAVA_HOME=/opt/module/jdk1.8.0_212\nexport PATH=$PATH:$JAVA_HOME/bin\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("保存后退出")])]),s._v(" "),t("li",[t("p",[s._v("刷新文件")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v(" source /etc/profile\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])])]),s._v(" "),t("li",[t("p",[s._v("测试 JDK 是否安装成功")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("java -version\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])]),s._v(" "),t("blockquote",[t("p",[s._v("解释：")]),s._v(" "),t("p",[s._v("配置环境变量在 /etc/profile.d 下配置好一些")]),s._v(" "),t("p",[s._v("因为在/etc/profile 中 由这个脚本 他开机会遍历/etc/profile.d/下的所有.sh 文件，所以我们也写个脚本里面放环境即可")]),s._v(" "),t("p",[s._v("例：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("i")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /etc/profile.d/*.sh /etc/profile.d/sh.local "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -r "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$i")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("*i}")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$-"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n         "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$i")]),s._v('"')]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n         "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$i")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/dev/null\n     "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[s._v("linux配置环境变量可配置在多种地方，如/etc/profile，/etc/profile.d/*.sh，~/.bashrc，~/.bash_profile等")]),s._v(" "),t("p",[s._v("bash的运行模式可分为login shell和non-login shell")]),s._v(" "),t("p",[s._v("例如，我们通过终端，输入用户名、密码，登录系统之后，得到就是一个login shell。")]),s._v(" "),t("p",[s._v("而当我们执行以下命令ssh "),t("strong",[s._v("主机名A")]),s._v(" command，在 "),t("strong",[s._v("主机名A")]),s._v(" 执行command的就是一个non-login shell")]),s._v(" "),t("p",[t("strong",[s._v("两种shell区别")]),s._v("：启动时会加载不同的文件")]),s._v(" "),t("ul",[t("li",[s._v("login shell：加载/etc/profile，~/.bash_profile，~/.bashrc")]),s._v(" "),t("li",[s._v("non-login shell：加载~/.bashrc")])]),s._v(" "),t("p",[s._v("而在加载~/.bashrc（实际是~/.bashrc中加载的/etc/bashrc）或/etc/profile时，都会执行如下代码片段.")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/axcmsm/tmp/raw/master/bigdata/20220207103715.png",alt:""}})]),s._v(" "),t("p",[t("strong",[t("strong",[s._v("总结")])]),s._v("：  不管是login shell还是non-login shell，启动时都会加载/etc/profile.d/*.sh中的环境变量。")])]),s._v(" "),t("p",[t("strong",[s._v("安装 Hadoop")]),s._v("：")]),s._v(" "),t("p",[s._v("Hadoop 下载地址："),t("a",{attrs:{href:"https://archive.apache.org/dist/hadoop/common/hadoop-3.1.3/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://archive.apache.org/dist/hadoop/common/hadoop-3.1.3/"),t("OutboundLink")],1)]),s._v(" "),t("ul",[t("li",[t("p",[s._v("用 XShell 文件传输工具将 hadoop-3.1.3.tar.gz 导入到 opt 目录下面的 software 文件夹下 面")])]),s._v(" "),t("li",[t("p",[s._v("进入到 Hadoop 安装包路径下")])]),s._v(" "),t("li",[t("p",[s._v("解压安装文件到/opt/module 下面")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("tar -zxvf hadoop-3.1.3.tar.gz -C /opt/module/\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("查看是否解压成功")])]),s._v(" "),t("li",[t("p",[s._v("将 Hadoop 添加到环境变量")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("获取 Hadoop 安装路径")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("pwd\n# 获取路径\n/opt/module/hadoop-3.1.3\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])])])])])]),s._v(" "),t("ul",[t("li",[t("p",[s._v("打开/etc/profile.d/my_env.sh 文件")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("sudo vim /etc/profile.d/my_env.sh\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("添加")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("#HADOOP_HOME\nexport HADOOP_HOME=/opt/module/hadoop-3.1.3\nexport PATH=$PATH:$HADOOP_HOME/bin\nexport PATH=$PATH:$HADOOP_HOME/sbin\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("保存退出")])]),s._v(" "),t("li",[t("p",[s._v("刷新文件 source /etc/profile")])]),s._v(" "),t("li",[t("p",[s._v("测试")])])]),s._v(" "),t("h3",{attrs:{id:"hadoop-目录结构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hadoop-目录结构"}},[s._v("#")]),s._v(" Hadoop 目录结构")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("目录")]),s._v(" "),t("th",[s._v("说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("bin")]),s._v(" "),t("td",[s._v("Hadoop 最基本的管理脚本和使用脚本的目录，这些脚本是 sbin 目录下管理脚本的基础实现，用户可以直接使用这些脚本管理和使用 Hadoop。")])]),s._v(" "),t("tr",[t("td",[s._v("etc")]),s._v(" "),t("td",[s._v("Hadoop 配置文件所在的目录")])]),s._v(" "),t("tr",[t("td",[s._v("include")]),s._v(" "),t("td",[s._v("对外提供的编程库头文件（具体动态库和静态库在 lib 目录中），这些头文件均是用 C++定义的，通常用于 C++程序访问 HDFS 或者编写 MapReduce 程序。")])]),s._v(" "),t("tr",[t("td",[s._v("lib")]),s._v(" "),t("td",[s._v("该目录包含了 Hadoop 对外提供的编程动态库和静态库，与 include 目录中的头文件结合使用。")])]),s._v(" "),t("tr",[t("td",[s._v("libexec")]),s._v(" "),t("td",[s._v("各个服务对用的 shell 配置文件所在的目录，可用于配置日志输出、启动参数（比如 JVM 参数）等基本信息。")])]),s._v(" "),t("tr",[t("td",[s._v("sbin")]),s._v(" "),t("td",[s._v("Hadoop 管理脚本所在的目录，主要包含 HDFS 和 YARN 中各类服务的启动/关闭脚本。")])]),s._v(" "),t("tr",[t("td",[s._v("share")]),s._v(" "),t("td",[s._v("Hadoop 各个模块编译后的 jar 包所在的目录，官方自带示例。")])])])]),s._v(" "),t("p",[t("strong",[s._v("重要目录")]),s._v("：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("（1）bin 目录：存放对 Hadoop 相关服务hdfs，yarn、mapred进行操作的脚本\n（2）etc 目录：Hadoop 的配置文件目录，存放 Hadoop 的配置文件\n（3）lib 目录：存放 Hadoop 的本地库（对数据进行压缩解压缩功能）\n（4）sbin 目录：存放启动或停止 Hadoop 相关服务的脚本\n（5）share 目录：存放 Hadoop 的依赖 jar 包、文档、和官方案例\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"hadoop-运行模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hadoop-运行模式"}},[s._v("#")]),s._v(" Hadoop 运行模式")]),s._v(" "),t("p",[s._v("Hadoop 官方网站："),t("a",{attrs:{href:"http://hadoop.apache.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://hadoop.apache.org/"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("strong",[s._v("运行模式包括")]),s._v("：本地、伪分布式、完全分布式")]),s._v(" "),t("ul",[t("li",[s._v("本地：单机运行，只是用来演示一下官方案例。生产环境不用。")]),s._v(" "),t("li",[s._v("伪分布式模式：也是单机运行，但是具备 Hadoop 集群的所有功能，一台服务器模 拟一个分布式的环境。个别缺钱的公司用来测试，生产环境不用。")]),s._v(" "),t("li",[s._v("完全分布式模式：多台服务器组成分布式环境。生产环境使用。")])]),s._v(" "),t("h3",{attrs:{id:"完全分布式模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#完全分布式模式"}},[s._v("#")]),s._v(" 完全分布式模式")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("1）准备 3 台客户机（关闭防火墙、静态 IP、主机名称）\n2）安装 JDK\n3）配置环境变量\n4）安装 Hadoop\n5）配置环境变量\n6）配置集群\n7）单点启动\n8）配置 ssh\n9）群起并测试集群\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h4",{attrs:{id:"编写集群分发脚本-xsync"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#编写集群分发脚本-xsync"}},[s._v("#")]),s._v(" 编写集群分发脚本 xsync")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("scp（secure copy）安全拷贝")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("（1）scp 定义\nscp 可以实现服务器与服务器之间的数据拷贝。（from server1 to server2）\n（2）基本语法\nscp -r $pdir/$fname $user@$host:$pdir/$fname\n命令 递归 要拷贝的文件路径/名称 目的地用户@主机:目的地路径/名称\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("例如：在 112 把 111 的安装包拷贝到 113")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("scp -r 目标拷贝路径 目标存放路径 *通配符\nscp -r hadoop101@hadoop111:/opt/module/* hadoop101@hadoop113:/opt/module/\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])])]),s._v(" "),t("ul",[t("li",[t("p",[s._v("rsync 远程同步工具")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("yum -y "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("blockquote",[t("p",[s._v("rsync 主要用于备份和镜像。具有速度快、避免复制相同内容和支持符号链接的优点。 rsync 和 scp 区别：用 rsync 做文件的复制要比 scp 的速度快，rsync 只对差异文件做更 新。scp 是把所有文件都复制过去。")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("（1）基本语法\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v(" -av "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pdir")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$fname")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$user")]),s._v("@"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$host")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pdir")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$fname")]),s._v("\n命令 选项参数 要拷贝的文件路径/名称 目的地用户@主机:目的地路径/名称\n选项 功能\n-a 归档拷贝\n-v 显示复制过程\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("脚本实现： 切换到 /home/axcmsm/bin")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#/bin/bash")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$#")]),s._v(" -lt "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" Not Enough Arguement"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2. 遍历集群所有机器")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("host")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" hadoop102 hadoop103 hadoop104\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$host")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#3. 遍历所有目录，挨个发送")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$@")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#4. 判断文件是否存在")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -e "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#5. 获取父目录")]),s._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("pdir")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" -P "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("$(")]),s._v("dirname $file"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#6. 获取当前文件的名称")]),s._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("fname")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("basename")]),s._v(" $file"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$host")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mkdir -p '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pdir")]),s._v('"')]),s._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v(" -av "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pdir")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$fname")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$host")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pdir")]),s._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$file")]),s._v(" does not exists"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("修改执行权限")])])]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),t("p",[s._v("查看系统遍历")]),s._v(" "),t("p",[s._v("echo $PATH")]),s._v(" "),t("p",[s._v("里面会加载到我们的 /home/axcmsm/bin")]),s._v(" "),t("p",[s._v("所以我们创建一个脚本放在这个目录下就可以全局导出了 不用 export 了")])]),s._v(" "),t("h4",{attrs:{id:"ssh-无密登录配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ssh-无密登录配置"}},[s._v("#")]),s._v(" SSH 无密登录配置")]),s._v(" "),t("p",[t("strong",[s._v("免密登录原理")]),s._v("：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/axcmsm/tmp/raw/master/bigdata/20210902163516.png",alt:""}})]),s._v(" "),t("ul",[t("li",[t("p",[s._v("生成公钥")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入到home/axcmsm/.ssh 文件")]),s._v("\nssh-keygen -t rsa\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("然后敲（三个回车），就会生成两个文件 id_rsa（私钥）、id_rsa.pub（公钥）")])]),s._v(" "),t("li",[t("p",[s._v("拷贝到免密登录的机器上")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v(" ssh-copy-id hadoop102\n ssh-copy-id hadoop103\n ssh-copy-id hadoop104\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("blockquote",[t("p",[s._v("三台机器都要执行此操作")])])]),s._v(" "),t("li",[t("p",[s._v("测试")]),s._v(" "),t("p",[s._v("分发一下 xsync 脚本")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("xsync /home/axcmsm/bin\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])]),s._v(" "),t("h4",{attrs:{id:"集群配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#集群配置"}},[s._v("#")]),s._v(" 集群配置")]),s._v(" "),t("p",[t("strong",[s._v("集群部署规划")])]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),t("p",[s._v("NameNode 和 SecondaryNameNode 不要安装在同一台服务器")]),s._v(" "),t("p",[s._v("ResourceManager 也很消耗内存，不要和 NameNode、SecondaryNameNode 配置在 同一台机器上。")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/axcmsm/tmp/raw/master/bigdata/20210902164237.png",alt:""}})]),s._v(" "),t("p",[s._v("配置文件说明：")]),s._v(" "),t("p",[s._v("配置文件分俩类：默认配置文件和自定义配置文件")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("默认配置文件")]),s._v(" "),t("ul",[t("li",[s._v("core-default.xml")]),s._v(" "),t("li",[s._v("hdfs-default.xml")]),s._v(" "),t("li",[s._v("yarn-default.xml")]),s._v(" "),t("li",[s._v("mapred-default.xml")])])]),s._v(" "),t("li",[t("p",[s._v("自定义配置文件")]),s._v(" "),t("ul",[t("li",[s._v("core-site.xml")]),s._v(" "),t("li",[s._v("hdfs-site.xml")]),s._v(" "),t("li",[s._v("yarn-site.xml")]),s._v(" "),t("li",[s._v("mapred-site.xml")])]),s._v(" "),t("blockquote",[t("p",[s._v("四个配置文件存放在 $HADOOP_HOME/etc/hadoop 这个路径上，用户可以根据项目需求重新进行修改配置")])])])]),s._v(" "),t("p",[t("strong",[s._v("配置集群")])]),s._v(" "),t("ol",[t("li",[t("p",[s._v("配置 core-site.xml")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("<configuration>\n \x3c!-- 指定 NameNode 的地址 --\x3e\n <property>\n <name>fs.defaultFS</name>\n <value>hdfs://hadoop102:8020</value>\n </property>\n \x3c!-- 指定 hadoop 数据的存储目录 --\x3e\n <property>\n <name>hadoop.tmp.dir</name>\n <value>/opt/module/hadoop-3.1.3/data</value>\n </property>\n \x3c!-- 配置 HDFS 网页登录使用的静态用户为 axcmsm --\x3e\n <property>\n <name>hadoop.http.staticuser.user</name>\n <value>axcmsm</value>\n </property>\n</configuration>\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])])])]),s._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[t("p",[s._v("配置 hdfs-site.xml")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("<configuration>\n\x3c!-- nn web 端访问地址--\x3e\n<property>\n <name>dfs.namenode.http-address</name>\n <value>hadoop102:9870</value>\n </property>\n\x3c!-- 2nn web 端访问地址--\x3e\n <property>\n <name>dfs.namenode.secondary.http-address</name>\n <value>hadoop104:9868</value>\n </property>\n</configuration>\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])])])]),s._v(" "),t("ol",{attrs:{start:"3"}},[t("li",[t("p",[s._v("配置 yarn-site.xml")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("<configuration>\n \x3c!-- 指定 MR 走 shuffle --\x3e\n <property>\n <name>yarn.nodemanager.aux-services</name>\n <value>mapreduce_shuffle</value>\n </property>\n \x3c!-- 指定 ResourceManager 的地址--\x3e\n <property>\n <name>yarn.resourcemanager.hostname</name>\n <value>hadoop103</value>\n </property>\n \x3c!-- 环境变量的继承 --\x3e\n <property>\n <name>yarn.nodemanager.env-whitelist</name>\n\n<value>JAVA_HOME,HADOOP_COMMON_HOME,HADOOP_HDFS_HOME,HADOOP_CO\nNF_DIR,CLASSPATH_PREPEND_DISTCACHE,HADOOP_YARN_HOME,HADOOP_MAP\nRED_HOME</value>\n </property>\n</configuration>\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("配置 mapred-site.xml")]),s._v(" "),t("div",{staticClass:"language-xml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token prolog"}},[s._v('<?xml version="1.0" encoding="UTF-8"?>')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token prolog"}},[s._v('<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("configuration")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 指定 MapReduce 程序运行在 Yarn 上 --\x3e")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("mapreduce.framework.name"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("yarn"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("mapreduce.application.classpath"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        /opt/module/hadoop-3.1.4/etc/hadoop,\n        /opt/module/hadoop-3.1.4/share/hadoop/common/*,\n        /opt/module/hadoop-3.1.4/share/hadoop/common/lib/*,\n        /opt/module/hadoop-3.1.4/share/hadoop/hdfs/*,\n        /opt/module/hadoop-3.1.4/share/hadoop/hdfs/lib/*,\n        /opt/module/hadoop-3.1.4/share/hadoop/mapreduce/*,\n        /opt/module/hadoop-3.1.4/share/hadoop/mapreduce/lib/*,\n        /opt/module/hadoop-3.1.4/share/hadoop/yarn/*,\n        /opt/module/hadoop-3.1.4/share/hadoop/common/lib/*,\n        /opt/module/hadoop-3.1.4/share/hadoop/hdfs/*,\n        /opt/module/hadoop-3.1.4/share/hadoop/hdfs/lib/*,\n        /opt/module/hadoop-3.1.4/share/hadoop/mapreduce/*,\n        /opt/module/hadoop-3.1.4/share/hadoop/mapreduce/lib/*,\n        /opt/module/hadoop-3.1.4/share/hadoop/yarn/*,\n        /opt/module/hadoop-3.1.4/share/hadoop/yarn/lib/*\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("configuration")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br")])])])]),s._v(" "),t("ol",{attrs:{start:"5"}},[t("li",[t("p",[s._v("配置 workers （配置主机之间的联系）")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("hadoop102\nhadoop103\nhadoop104\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),t("p",[s._v("该文件中添加的内容结尾不允许有空格，文件中不允许有空行")])])]),s._v(" "),t("li",[t("p",[s._v("配置文件的分发")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("xsync /opt/module/hadoop-3.1.3/etc\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("配置 mapred-site.xml 配置历史服务器")]),s._v(" "),t("div",{staticClass:"language-xml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 历史服务器端地址 --\x3e")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("mapreduce.jobhistory.address"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("hadoop102:10020"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 历史服务器 web 端地址 --\x3e")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("mapreduce.jobhistory.webapp.address"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("hadoop102:19888"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])])])]),s._v(" "),t("ol",{attrs:{start:"8"}},[t("li",[t("p",[s._v("开启日志聚集功能：yarn-site.xml")]),s._v(" "),t("div",{staticClass:"language-xml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 开启日志聚集功能 --\x3e")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("yarn.log-aggregation-enable"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("true"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 设置日志聚集服务器地址 --\x3e")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("yarn.log.server.url"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("http://hadoop102:19888/jobhistory/logs"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 设置日志保留时间为 7 天 --\x3e")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("yarn.log-aggregation.retain-seconds"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("604800"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("yarn.application.classpath"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        /opt/module/hadoop-3.1.4/etc/hadoop,\n        /opt/module/hadoop-3.1.4/share/hadoop/common/*,\n        /opt/module/hadoop-3.1.4/share/hadoop/common/lib/*,\n        /opt/module/hadoop-3.1.4/share/hadoop/hdfs/*,\n        /opt/module/hadoop-3.1.4/share/hadoop/hdfs/lib/*,\n        /opt/module/hadoop-3.1.4/share/hadoop/mapreduce/*,\n        /opt/module/hadoop-3.1.4/share/hadoop/mapreduce/lib/*,\n        /opt/module/hadoop-3.1.4/share/hadoop/yarn/*,\n        /opt/module/hadoop-3.1.4/share/hadoop/yarn/lib/*\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" \n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br")])])])]),s._v(" "),t("ol",{attrs:{start:"9"}},[t("li",[t("p",[s._v("分发配置")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("xsync $HADOOP_HOME/etc/hadoop/\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])]),s._v(" "),t("h4",{attrs:{id:"启动集群"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动集群"}},[s._v("#")]),s._v(" 启动集群")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),t("p",[s._v("格式 化 NameNode，会产生新的集群 id，导致 NameNode 和 DataNode 的集群 id 不一致，集群找 不到已往数据。如果集群在运行过程中报错，需要重新格式化 NameNode 的话，一定要先停 止 namenode 和 datanode 进程，并且要删除所有机器的 data 和 logs 目录，然后再进行格式 化。）")])]),s._v(" "),t("ul",[t("li",[t("p",[s._v("第一次启动需要格式化")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("hdfs namenode -format\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("启动")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("sbin/start-dfs.sh\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("在配置了 ResourceManager 的节点（hadoop103）启动 YARN")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("sbin/start-yarn.sh\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("查看")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("Web 端查看 HDFS 的 NameNode\n（a）浏览器中输入：http://hadoop102:9870\n（b）查看 HDFS 上存储的数据信息\nWeb 端查看 YARN 的 ResourceManager\n（a）浏览器中输入：http://hadoop103:8088\n（b）查看 YARN 上运行的 Job 信息\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])])])]),s._v(" "),t("h4",{attrs:{id:"hadoop-集群常用脚本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hadoop-集群常用脚本"}},[s._v("#")]),s._v(" Hadoop 集群常用脚本")]),s._v(" "),t("blockquote",[t("p",[s._v("还是在我们/home/axcmsm/bin 目录下写脚本")])]),s._v(" "),t("p",[s._v("启动脚本")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$#")]),s._v(" -lt "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"No Args Input..."')]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"start"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" =================== 启动 hadoop 集群 ==================="')]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" --------------- 启动 hdfs ---------------"')]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" hadoop102 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/opt/module/hadoop-3.1.3/sbin/start-dfs.sh"')]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" --------------- 启动 yarn ---------------"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" hadoop103 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/opt/module/hadoop-3.1.3/sbin/start-yarn.sh"')]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" --------------- 启动 historyserver ---------------"')]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" hadoop102 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/opt/module/hadoop-3.1.3/bin/mapred --daemon start historyserver"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"stop"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" =================== 关闭 hadoop 集群 ==================="')]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" --------------- 关闭 historyserver ---------------"')]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" hadoop102 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/opt/module/hadoop-3.1.3/bin/mapred --daemon stop historyserver"')]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" --------------- 关闭 yarn ---------------"')]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" hadoop103 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/opt/module/hadoop-3.1.3/sbin/stop-yarn.sh"')]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" --------------- 关闭 hdfs ---------------"')]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" hadoop102 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/opt/module/hadoop-3.1.3/sbin/stop-dfs.sh"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n*"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Input Args Error..."')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("esac")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br")])]),t("p",[s._v("查看三台服务器 Java 进程脚本：jpsall")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("host")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" hadoop102 hadoop103 hadoop104\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$host")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$host")]),s._v(" jps\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("其他常用脚本命令：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("）各个模块分开启动/停止（配置 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" 是前提）常用\n（1）整体启动/停止 HDFS\nstart-dfs.sh/stop-dfs.sh\n（2）整体启动/停止 YARN\nstart-yarn.sh/stop-yarn.sh\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("）各个服务组件逐一启动/停止\n（1）分别启动/停止 HDFS 组件\nhdfs --daemon start/stop namenode/datanode/secondarynamenode\n（2）启动/停止 YARN\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" --daemon start/stop resourcemanager/nodemanager\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("常用端口：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("端口名称                 Hadoop2.x            Hadoop3.x\nNameNode 内部通信端口   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8020")]),s._v(" / "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9000")]),s._v("         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8020")]),s._v(" / "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9000")]),s._v("/9820\nNameNode HTTP UI       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("50070")]),s._v("                  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9870")]),s._v("\nMapReduce 查看执行任务端口 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8088")]),s._v("                  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8088")]),s._v("\n历史服务器通信端口         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("19888")]),s._v("                 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("19888")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h4",{attrs:{id:"集群时间同步"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#集群时间同步"}},[s._v("#")]),s._v(" 集群时间同步")]),s._v(" "),t("p",[s._v("如果服务器在公网环境（能连接外网），可以不采用集群时间同步，因为服务器会定期 和公网时间进行校准；如果服务器在内网环境，必须要配置集群时间同步，否则时间久了，会产生时间偏差， 导致集群执行任务时间不同步。")]),s._v(" "),t("blockquote",[t("p",[s._v("一般都不用设置以为基本我们都能连网。")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('2）时间服务器配置（必须 root 用户）\n（1）查看所有节点 ntpd 服务状态和开机自启动状态\n     sudo systemctl status ntpd\n     sudo systemctl start ntpd\n     sudo systemctl is-enabled ntpd\n（2）修改 hadoop102 的 ntp.conf 配置文件\n     sudo vim /etc/ntp.conf\n修改内容如下\n（a）修改 1（授权 192.168.10.0-192.168.10.255 网段上的所有机器可以从这台机器上查\n询和同步时间）\n   #restrict 192.168.10.0 mask 255.255.255.0 nomodify notrap\n为  restrict 192.168.10.0 mask 255.255.255.0 nomodify notrap\n（b）修改 2（集群在局域网中，不使用其他互联网上的时间）\n   server 0.centos.pool.ntp.org iburst\n   server 1.centos.pool.ntp.org iburst\n   server 2.centos.pool.ntp.org iburst\n   server 3.centos.pool.ntp.org iburst\n为\n   #server 0.centos.pool.ntp.org iburst\n   #server 1.centos.pool.ntp.org iburst\n   #server 2.centos.pool.ntp.org iburst\n\n（c）添加 3（当该节点丢失网络连接，依然可以采用本地时间作为时间服务器为集群中\n的其他节点提供时间同步）\n     server 127.127.1.0\n     fudge 127.127.1.0 stratum 10\n（3）修改 hadoop102 的/etc/sysconfig/ntpd 文件\n \t sudo vim /etc/sysconfig/ntpd\n增加内容如下（让硬件时间与系统时间一起同步）\n\tSYNC_HWCLOCK=yes\n（4）重新启动 ntpd 服务\n    sudo systemctl start ntpd\n（5）设置 ntpd 服务开机启动\n    sudo systemctl enable ntpd\n3）其他机器配置（必须 root 用户）\n（1）关闭所有节点上 ntp 服务和自启动\n    sudo systemctl stop ntpd\n    sudo systemctl disable ntpd\n    sudo systemctl stop ntpd\n    sudo systemctl disable ntpd\n（2）在其他机器配置 1 分钟与时间服务器同步一次\n    sudo crontab -e\n编写定时任务如下：\n*/1 * * * * /usr/sbin/ntpdate hadoop102\n（3）修改任意机器时间\n    sudo date -s "2021-9-11 11:11:11"\n（4）1 分钟后查看机器是否与时间服务器同步\n    sudo date\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br")])]),t("h2",{attrs:{id:"常见错误及解决方案"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常见错误及解决方案"}},[s._v("#")]),s._v(" 常见错误及解决方案")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("防火墙没关闭、或者没有启动 YARN")])]),s._v(" "),t("li",[t("p",[s._v("主机名称配置错误")])]),s._v(" "),t("li",[t("p",[s._v("IP 地址配置错误")])]),s._v(" "),t("li",[t("p",[s._v("ssh 没有配置好")])]),s._v(" "),t("li",[t("p",[s._v("root 用户和 axcmsm 两个用户启动集群不统一")])]),s._v(" "),t("li",[t("p",[s._v("配置文件修改不细心")])]),s._v(" "),t("li",[t("p",[s._v("不识别主机名称")])]),s._v(" "),t("li",[t("p",[s._v("DataNode 和 NameNode 进程同时只能工作一个。")])]),s._v(" "),t("li",[t("p",[s._v("执行命令不生效，粘贴 Word 中命令时，遇到-和长–没区分开。导致命令失效 解决办法：尽量不要粘贴 Word 中代码")])]),s._v(" "),t("li",[t("p",[s._v("jps 发现进程已经没有，但是重新启动集群，提示进程已经开启。 原因是在 Linux 的根目录下/tmp 目录中存在启动的进程临时文件，将集群相关进程删 除掉，再重新启动集群。")])]),s._v(" "),t("li",[t("p",[s._v("jps 不生效 原因：全局变量 hadoop java 没有生效。解决办法：需要 source /etc/profile 文件。")])]),s._v(" "),t("li",[t("p",[s._v("8088 端口连接不上 cat /etc/hosts 注释掉如下代码")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("#127.0.0.1 localhost localhost.localdomain localhost4 #localhost4.localdomain4\n#::1 hadoop102\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])])])])}),[],!1,null,null,null);a.default=e.exports}}]);