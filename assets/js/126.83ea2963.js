(window.webpackJsonp=window.webpackJsonp||[]).push([[126],{556:function(s,t,a){"use strict";a.r(t);var e=a(16),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"vuex-概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vuex-概述"}},[s._v("#")]),s._v(" Vuex 概述")]),s._v(" "),a("p",[a("strong",[s._v("回顾数据共享方式：")])]),s._v(" "),a("ul",[a("li",[s._v("父传子：v-bind : 属性绑定")]),s._v(" "),a("li",[s._v("子传父：v-on : @ 事件绑定")]),s._v(" "),a("li",[s._v("兄弟之间：EventBus\n"),a("ul",[a("li",[s._v("$on 接收数据")]),s._v(" "),a("li",[s._v("$emit 发送数据")])])]),s._v(" "),a("li",[s._v("以上适用于小范围的共享数据")])]),s._v(" "),a("blockquote",[a("p",[s._v("Vuex 是实现组件全局状态的一种管理机制，可用方便的实现组件之间数据的共享。")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/axcmsm/tmp/raw/master/20210823173726.png",alt:""}})]),s._v(" "),a("p",[s._v("好处：")]),s._v(" "),a("ul",[a("li",[s._v("能够在 Vuex 中集中管理共享数据，易于开发和维护")]),s._v(" "),a("li",[s._v("能够高效实现组件之间的数据共享，提高开发效率")]),s._v(" "),a("li",[s._v("存储 Vuex 中的数据都是响应式的，更够实时保持数据与页面的同步")])]),s._v(" "),a("h2",{attrs:{id:"vuex-的基本使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vuex-的基本使用"}},[s._v("#")]),s._v(" vuex 的基本使用")]),s._v(" "),a("ol",[a("li",[a("p",[a("strong",[s._v("安装 vuex 依赖包")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("npm install vuex --save\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[a("p",[a("strong",[s._v("导入 vuex 包")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("import Vuex from 'vuex'\nVue.use(Vuex)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("创建 store 对象")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const store = new Vuex.Store({\n//state 中存放的是全局数据\n\tstate:{ count:0 }\n})\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("将 store 对象挂载到 vue 实例中")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("new Vue({\n\tel:'#app',\n\trender:h=>h(app),\n\trouter,\n\t//所有组件都可用从store获取quan\n\tstore\n})\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])])])]),s._v(" "),a("h2",{attrs:{id:"vuex-主要核心概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vuex-主要核心概念"}},[s._v("#")]),s._v(" vuex 主要核心概念")]),s._v(" "),a("h3",{attrs:{id:"state"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#state"}},[s._v("#")]),s._v(" State")]),s._v(" "),a("blockquote",[a("p",[s._v("state 提供唯一的公共数据源，所有共享数据统一放到 store 的 state 中进行存储")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("//创建store数据源，提供唯一公共数据\nconst store=new Vuex.Store({\n\tstate:{count:0}\n})\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("访问 state 数据")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("方法 1")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("this.$store.state.全局数据名称\n//在template中this可省略\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("方法 2")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("从 vuex 中按需导入 mapState 函数")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("import { mapState } from ’vuex'\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])])])]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[a("p",[s._v("将全局数据映射为 当前组件的计算属性")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("computed:{\n\t...mapState(['count'])\n\t//...是展开运算符\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])])]),s._v(" "),a("h3",{attrs:{id:"mutation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mutation"}},[s._v("#")]),s._v(" Mutation")]),s._v(" "),a("blockquote",[a("p",[s._v("Mutation 用于变更 store 中的数据")]),s._v(" "),a("p",[s._v("只能通过 Mutation 口模型变更，不可直接操作 store 的数据，这样可以直接监控数据的变化")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("方式 1")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("定义：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("export default new Vuex.Store({\n  state: {\n    count: 0\n  },\n  mutations: {\n\t//step 是传递的参数\n    addN(state,step) {\n      // 变更状态\n\t state.count+=step\n    }\n    add(state) {\n      // 变更状态\n      state.count++\n    }\n  },\n  actions: {},\n  modules: {}\n})\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("触发")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(" methods: {\n \t//@方法\n    add1 () {\n      this.$store.commit('add')\n\t\t//传递参数\n \t  this.$store.commit('addN',3)\n    }\n  }\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])])])])])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("方式 2")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("vuex 中按需导入 mapmutations 函数")]),s._v(" "),a("div",{staticClass:"language-vue line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[s._v("import [ mapMutations ] from 'vuex'\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("将需要的 mutations 函数，映射为当前组件的方法")]),s._v(" "),a("div",{staticClass:"language-vue line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[s._v("methods:{ ...mapMutations(['add','addN']) }\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])])])]),s._v(" "),a("blockquote",[a("p",[s._v("不要在 Mutation 函数中执行异步操作")])]),s._v(" "),a("h3",{attrs:{id:"action"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#action"}},[s._v("#")]),s._v(" Action")]),s._v(" "),a("blockquote",[a("p",[s._v("action 是用与处理异步任务的")])]),s._v(" "),a("p",[s._v("定义：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("export default new Vuex.Store({\n  state: {\n    count: 0\n  },\n  mutations: {\n    add  (state) {\n      // 变更状态\n      state.count++\n    }\n    addN (state,step) {\n      // 变更状态\n      state.count+=step\n    }\n  },\n  actions: {\n    addAsync (context) {\n      // 延时器\n      setTimeout(() => {\n        context.commit('add')\n      }, 1000)\n    },\n    //携带参数\n     addAsyncN (context,step) {\n      // 延时器\n      setTimeout(() => {\n        context.commit('addN',step)\n      }, 1000)\n    }\n  }\n})\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br")])]),a("p",[s._v("触发：")]),s._v(" "),a("div",{staticClass:"language-vue line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[s._v("methods: { add1 () { // 触发 this.$store.dispatch('addAsync') //携带参数 this.$store.dispatch('addAsyncN',5) } }\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("第二种方式：")]),s._v(" "),a("ol",[a("li",[s._v("按需导入 mapActions")]),s._v(" "),a("li",[s._v("映射为 methods 函数 ...mapActions(['addAsync','addAsyncN'])")])]),s._v(" "),a("h3",{attrs:{id:"getter"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getter"}},[s._v("#")]),s._v(" Getter")]),s._v(" "),a("hr"),s._v(" "),a("blockquote",[a("p",[s._v("Getter 用于对 Store 中的数据进行加工处理形成新的数据")]),s._v(" "),a("ol",[a("li",[s._v("Getter 对已有的 Store 数据进行加工形成新的数据。")]),s._v(" "),a("li",[s._v("Store 数据发生变化，Getter 的数据也会跟着变化。")])])]),s._v(" "),a("p",[s._v("定义：")]),s._v(" "),a("div",{staticClass:"language-vue line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[s._v("export default new Vuex.Store({ state: { count: 0 }, getters: { showNum: state => { return '当前1最新数量是【' + state.count + '】' } } }\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("使用：")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("方式 1")])]),s._v(" "),a("li",[a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("this.$store.getters.名称\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("方式 2")]),s._v(" "),a("ul",[a("li",[s._v("按需导入 mapGetters")]),s._v(" "),a("li",[s._v("进行映射 ...mapGetters(['showNum'])")])])])]),s._v(" "),a("hr")])}),[],!1,null,null,null);t.default=n.exports}}]);