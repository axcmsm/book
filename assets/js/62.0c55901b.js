(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{491:function(s,t,n){"use strict";n.r(t);var a=n(16),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"系统性能定时监控"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#系统性能定时监控"}},[s._v("#")]),s._v(" 系统性能定时监控")]),s._v(" "),n("p",[s._v("Python 可以通过 "),n("code",[s._v("subprocess")]),s._v(" 模块调⽤并获取监控系统信息,但要编写大量代码很麻烦。")]),s._v(" "),n("p",[n("code",[s._v("psutil模块")]),s._v("正是来解决这个问题的,是个第三方模块。")]),s._v(" "),n("blockquote",[n("p",[s._v("是python的系统监控进程的管理工具，可以实现命令行中类似"),n("code",[s._v("ps、top、lsof、 netstat、ifconfig、who、df、kill、free、nice、ionice、iostat、iotop")]),s._v("等等命令的功能")]),s._v(" "),n("p",[s._v("官网文档: <（https://pythonhosted.org/psutil/）>")])]),s._v(" "),n("p",[n("strong",[s._v("安装")]),s._v(":"),n("code",[s._v("pip3 install psutil")])]),s._v(" "),n("p",[n("strong",[s._v("查看版本信息")]),s._v("：")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[s._v("python3\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" psutil\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("psutil"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("version_info\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[n("strong",[s._v("常⻅功能")]),s._v(":")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("获取CPU信息 "),n("code",[s._v("psutil.cpu_xxx()")])]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" cpu_count"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#逻辑CPU核数 可以通过设置logical=False来返回物理CPU的个数 ")]),s._v("\n例如：psutil"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cpu_count"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("logical"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("False")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" cpu_times"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#CPU的⽤户、系统、空闲时间cpu_times()⽅法来获取，将返回⼀个python元 组。")]),s._v("\n\t（使⽤percpu"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),s._v("时，返回⼀个列表）\n\tuser ：⽤户时间 被正常的⽤户进 程所占⽤的时间，在linux下也包括了访客的时间 \n\tsystem "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("系统时间 在内核中执⾏的进程占有CPU的时间 其中有些参数在不同的平台下也会有所不同 \n\tnice"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("UNIX"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("被优先级⾼的进程所占⽤的时间 \n\tiowait"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Linux"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("等待I"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("O完成的时间 \n\tirq"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Linux"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("BSD"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("硬件中断维持所花费的时间 \n\tsoftirq"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Linux"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：软件中断维持所花费的时间 \n\tdpc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("windows"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：花费在dpc（（Deferred Procedure Call） \n\tWindows操作系统中的⼀种中断调⽤机制）过程中的时间。 \n\t\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" cpu_percent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#获取CPU的使⽤率 cpu_percent()⽅法会返回⼀个浮点值表示当前CPU的利⽤率，")]),s._v("\n\t其中有两个参数 interval与percpu，interval表示间隔，默认为"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("，输⼊命令后直接返回，\n    percpu是个"),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("bool")]),s._v("值，等于Ture的时候输出每个CPU的利⽤率，此时返回⼀个列 表\n    interval"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.5")]),s._v(" 设置刷新时间间隔为"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.5")]),s._v("秒 percpu"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),s._v(" 获取每个CPU使⽤率 \t\n 例"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("psutil"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cpu_percent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("interval"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.5")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("percpu"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("获取内存信息 :"),n("code",[s._v("xxx_momory()")])]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" virtual_memory"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#在系统中内存的利⽤率信息通常有如下")]),s._v("\n    tatal"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("物理内存的总数 \n    available"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("可⽤内存，表示没有进⼊交换区的内存，可以直接分配给进程。\n    used：已经被使⽤的内存数\n    free"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("空闲内存，指完全没有被使⽤的内存 \n    cache"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("缓存的使⽤数⽬\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("buffer")]),s._v("：缓冲的使⽤数⽬\n    swap"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("交换分区使⽤的数⽬ 如果需要获得某个具体的信息，可以进⾏如下操作\n    momory"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("free 、momory"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("used 等\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" swap_memory"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#⽤于获取交换分区的信息")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("磁盘信息 "),n("code",[s._v("disk_xxx()")]),s._v(" 类似"),n("code",[s._v("fdisk")]),s._v("命令")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" disk_partitions"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#⽤于获取完整的分区信息（逻辑设备名，挂载点权限，⽂件系统等等）， 返回⼀个元组")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" disk_usage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#返回硬盘，分区或者⽬录的使⽤情况，单位字节 “/” 表示获取根⽬录（系统）磁盘使⽤情况")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" disk_io_counters"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#获取硬盘的I/O个数,读写信息，返回⼀个元组")]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#perdisk参数，当为True时返回每个磁盘的信息，此时返回⼀个字典")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("⽹络信息 "),n("code",[s._v("net_xxx()")])]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" net_io_counters"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#⽤于获取⽹络总的I/O信息，返回⼀个元组,默认pernic=False ")]),s._v("\n\t当pernic为"),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),s._v("时返回每个⽹路接⼝的I"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("O信息此时返回⼀个字典\n    bytes_sent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 发出的⽐特数 \n    bytes_recv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 收到的⽐特数 \n    packets_sent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("发出的包数量 \n    packets_recv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 接受的包数量 \n    errin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("接收时出现的错误总数 \n    errout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 发送时出现的错误总数 \n    dropin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 发送过来时丢包的数量 \n    dropout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 发出时丢包的数量 \n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" net_connection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#返回⼀个系统中的套接字的链接信息，以⼀个列表的形式返回")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("获得开机时间")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[s._v("psutil"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("boot_time"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# 获得开机时间（LINUX格式返回） datetime.datetime.fromtimestamp(psutil.boot_time()).strftime("%Y-%m-%d %H:%M:%S") ')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2017-06-30 17:21:04'")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("活动⽤户")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[s._v("psutil"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("users"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#获取⽤户的信息")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])])]),s._v(" "),n("p",[s._v("例如")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#!/home/demo/.Envs/1-basics-python3/bin/python3  #开启了虚拟环境的")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#!/usr/bin/python3  #无虚拟环境")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" psutil \n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" datetime \n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1、定义变量保存cpu硬件信息 ")]),s._v("\ncpu_info "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" psutil"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cpu_percent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("interval"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.5")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2、定义变量保存内存使⽤情况 ")]),s._v("\nmemory_info "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" psutil"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("virtual_memory"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 3、定义变量保存磁盘使⽤情况 ")]),s._v("\ndisk_info "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" psutil"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("disk_usage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 4、获取⽹络收发数量")]),s._v("\nnet_info "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" psutil"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("net_io_counters"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 5、获取系统时间 ")]),s._v("\ncurrent_time "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" datetime"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("datetime"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("now"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("strftime"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"%Y-%m-%d %T"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 6、开始记录信息到⽇志⽂件中")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 6.1 拼接记录信息的字符串 ")]),s._v("\nlog_str "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"|-------------------|------------|-------------|-------------|----------------------------|\\n"')]),s._v(" log_str "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"| 监控时间 | CPU使⽤率 | 内存使⽤率 | 硬盘使⽤率 | ⽹络收发量 |\\n"')]),s._v(" \nlog_str "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"| | (共%d核CPU) | (总计%dG内存) | (总计%dG硬盘)| |\\n"')]),s._v(" \nlog_str "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"|-------------------|------------|-------------|-------------|----------------------------|\\n"')]),s._v(" log_str "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"|%s| %s%% | %s%% | %s%% | 收:%s/发:%s |\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("current_time"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" cpu_info"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" memory_info"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("percent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" disk_info"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("percent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" net_info"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("bytes_recv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" net_info"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("bytes_sent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \nlog_str "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"|-------------------|------------|-------------|-------------|----------------------------|\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("log_str"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("、写⼊数据到⽂件中 \n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("open")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"log.txt"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"a"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("file")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("file")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("write"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("log_str "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"\\n\\n"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br")])]),n("blockquote",[n("p",[s._v("添加执行权限   执行:"),n("code",[s._v("./linux系统监控程序.py")])])]),s._v(" "),n("h2",{attrs:{id:"自动发邮件功能"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#自动发邮件功能"}},[s._v("#")]),s._v(" ⾃动发邮件功能")]),s._v(" "),n("p",[s._v("."),n("code",[s._v("yagmail")]),s._v(" 模块:实现⾃动发邮件功能")]),s._v(" "),n("p",[s._v("github项⽬地址:< https://github.com/kootenpv/yagmail >")]),s._v(" "),n("p",[n("strong",[s._v("安装")]),s._v(":"),n("code",[s._v("pip3 install yagmail")])]),s._v(" "),n("p",[s._v("示例：")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" yagmail\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#链接邮箱服务器 ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# user@126.com 发件⼈邮箱 ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1234 发件⼈邮箱授权码(授权码，注意不是邮箱密码) ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# smtp.126.com ⽹易126邮箱发件服务器")]),s._v("\nyag "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" yagmail"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("SMTP"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" user"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user@126.com"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" password"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1234"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" host"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'smtp.126.com'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 邮箱正⽂ ")]),s._v("\ncontents "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'This is the body, and here is just text http://somedomain/image.png'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'You can find an audio file attached.'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/local/path/song.mp3'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" \n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发送邮件 ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# taaa@126.com 收件⼈邮箱 ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# subject 邮件主题 ")]),s._v("\nyag"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("send"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'taaa@126.com'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'subject'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" contents"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("p",[n("strong",[s._v("监控配合邮件案例")]),s._v("：")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#!/usr/bin/python3 ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" psutil \n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" datetime \n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" yagmail "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("send_mail")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("contents"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('""" 发送邮件 """')]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 链接邮箱服务器 ")]),s._v("\n    yag "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" yagmail"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("SMTP"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxxxx@163.com"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" password"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxxxx"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" host"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"smtp.163.com"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 给单个接受者发送邮件 ")]),s._v("\n    yag"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("send"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'xxxx@qq.com'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[系统监控报告]'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" contents"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("linux_monitor")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("time"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 获取硬件信息 ")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1、获取cpu使⽤率 ")]),s._v("\n        cpu_info "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" psutil"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cpu_percent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("interval"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("time"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2、内存使⽤率 ")]),s._v("\n        memory_info "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" psutil"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("virtual_memory"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("percent\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 3、磁盘使⽤率 ")]),s._v("\n        disk_info "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" psutil"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("disk_usage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("percent \n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 4、获取⽹络收发数量 ")]),s._v("\n        net_info "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" psutil"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("net_io_counters"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 5、获取当前系统时间 ")]),s._v("\n        log_time "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" datetime"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("datetime"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("now"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("strftime"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"%Y-%m-%d %T"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 6、记录⽇志信息 ")]),s._v("\n        log_str "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"|-------------------|------------|-------------|-------------|----------------------------|\\n"')]),s._v(" \n        log_str "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"| 监控时间 | CPU使⽤率 | 内存使⽤率 | 硬盘使⽤率 | ⽹络收发量 |\\n"')]),s._v(" log_str "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"| | (共%d核CPU) | (总计%dG内存) | (总计%dG硬盘)| |\\n"')]),s._v(" \n        log_str "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"|-------------------|------------|-------------|-------------|----------------------------|\\n"')]),s._v(" \n        log_str "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"|%s| %s%% | %s%% | %s%% | 收:%d/发:%d |\\n"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("log_time"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" cpu_info"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" memory_info"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" disk_info"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" net_info"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("bytes_sent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" net_info"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("bytes_recv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n        log_str "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"|-------------------|------------|-------------|-------------|----------------------------|\\n"')]),s._v(" \n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("log_str"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 保存到⽇志⽂件中 ")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("open")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"log.txt"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"a"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("file")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" \n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 写⽂件 ")]),s._v("\n        \t"),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("file")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("write"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("log_str"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"\\n\\n"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" log_str \n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" \n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开始循环 ")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" \n                "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 每隔1秒获取⼀次状态")]),s._v("\n                contents "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" linux_monitor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n                "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发送邮件 ")]),s._v("\n                send_mail"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("contents"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" __name__ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'__main__'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" \n    main"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br")])]),n("blockquote",[n("p",[s._v("设置多用户 "),n("code",[s._v("yag.send(['aa@126.com','bb@qq.com','cc@gmail.com'], 'subject', contents)")])]),s._v(" "),n("p",[s._v("带有附件的："),n("code",[s._v("yag.send('aaaa@126.com', '发送附件', contents, [\"d://log.txt\",\"d://baidu_img.jpg\"])")])])]),s._v(" "),n("h2",{attrs:{id:"虚拟环境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#虚拟环境"}},[s._v("#")]),s._v(" 虚拟环境")]),s._v(" "),n("p",[s._v("适配不同版本的项目的版本兼容性问题")]),s._v(" "),n("p",[n("code",[s._v("virtualenv")]),s._v("模块 ⽤于创建独⽴的Python环境，多个Python相互独⽴，互不影响，它能够")]),s._v(" "),n("blockquote",[n("ol",[n("li",[n("p",[s._v("在没有权限的情况下安装新套件")])]),s._v(" "),n("li",[n("p",[s._v("不同应⽤可以使⽤不同的套件版本")])]),s._v(" "),n("li",[n("p",[s._v("套件升级不影响其他应⽤")])])])]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#安装虚拟环境命令")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" pip "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" virtualenv \n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" pip "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" virtualenvwrapper\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#配置环境变量")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1、创建⽬录⽤来存放虚拟环境 ")]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$HOME")]),s._v("/.virtualenvs \n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2、打开~/.bashrc⽂件，并添加如下： ")]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("WORKON_HOME")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$HOME")]),s._v("/.virtualenvs \n\t"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /usr/local/bin/virtualenvwrapper.sh\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 3、运⾏")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" ~/.bashrc\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("p",[n("strong",[s._v("基本使用")]),s._v("：")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#创建虚拟环境  创建虚拟环境需要联⽹")]),s._v("\nmkvirtualenv "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p python3 虚拟环境名称\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看 虚拟环境的命令")]),s._v("\nworkon 两次tab键 或者 lsvirtualenv\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#启动/切换 虚拟环境")]),s._v("\nworkon 虚拟环境名\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#退出虚拟环境")]),s._v("\ndeactivate\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#删除虚拟环境的命令 :")]),s._v("\nrmvirtualenv 虚拟环境名称   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#需要先退出再删除")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看虚拟环境中安装的包")]),s._v("\npip freeze\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("p",[s._v("工具安装包的位置："),n("code",[s._v("~/.virtualenvs/py3_flask/lib/python3.5/site-package")])]),s._v(" "),n("p",[s._v("例如安装flask:"),n("code",[s._v("pip install flask==0.10.1")])]),s._v(" "),n("h2",{attrs:{id:"网络通信"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#网络通信"}},[s._v("#")]),s._v(" 网络通信")]),s._v(" "),n("p",[n("strong",[s._v("⽹络编程")]),s._v("：让在不同的电脑上的软件能够进⾏数据传递，即进程之间的通信")]),s._v(" "),n("p",[n("strong",[s._v("IP地址")]),s._v("：(IPv4) IP 地址是IP协议提供的⼀种统⼀的地址格式,是联网电脑的⼀个编号("),n("strong",[s._v("有才能正常通信")]),s._v(")。")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("作用:⽤来在⽹络中标记⼀台电脑")])]),s._v(" "),n("li",[n("p",[s._v("包括：⽹络号和主机号")])]),s._v(" "),n("li",[n("p",[s._v("分类：")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[s._v("A类"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("126.255")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".255")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".254")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("由"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("字节的⽹络地址和"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("字节主机地址 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nB类"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("128.1")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("191.255")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".255")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".254")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("个字节的⽹络地址和"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("个字节的主机地址组成 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\nC类"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.0")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("223.255")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".255")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".254")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("字节的⽹络地址和"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("字节的主机地址 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("110")]),s._v("\n\t主机全零（“"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("”）地址对应于当前主机\n\t全“"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("”的IP地址（“"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".255")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".255")]),s._v("”）是当前⼦⽹的⼴播地址 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1110")]),s._v("\nD类"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("224.0")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("239.255")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".255")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".254")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("⽤于多点⼴播\nE类"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("E类地址保留，仅作实验和开发⽤"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("以“"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1111")]),s._v("”开始，为将来使⽤保留\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("私有:")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.0")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("～"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.255")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".255")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".255")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("内⽹，虚拟机中常出现，A类"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("～"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.31")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".255")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".255")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("内⽹、⼦⽹，B类"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#⽤于回路测试  127.0.0.1 本机ip localhost特殊域名映射到这个ip上")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("～"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".255")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".255")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("内⽹、⼦⽹，C类"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])])])]),s._v(" "),n("p",[n("strong",[s._v("IPv4和IPv6")]),s._v(":")]),s._v(" "),n("blockquote",[n("p",[s._v("IPv4:互联⽹协议的第四版，也是第一个被广泛使用的，是互联网技术的基石,采用 '点分十进制' 表示。")]),s._v(" "),n("p",[s._v("现在存在网络地址严重不足的情况。")]),s._v(" "),n("p",[s._v("IPv6:⽤于替代现⾏版本IP协议(IPv4)的下⼀代IP协议。采用'点分十六进制'表示")]),s._v(" "),n("p",[s._v("提供更多的网络地址")])]),s._v(" "),n("p",[n("code",[s._v("netstat")]),s._v("命令是监控TCP/IP⽹络的⾮常有⽤的⼯具.")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://gitee.com/axcmsm/tmp/raw/master/bigdata/20210922171039.png",alt:""}})]),s._v(" "),n("p",[n("strong",[s._v("常用参数")]),s._v("：")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" －an "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看端口状态")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -an "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查询所有含有21的端⼝使⽤情况")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#sof -i [tcp/udp]:端⼝号 （可以查看端⼝号被哪个程序占⽤）")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("lsof")]),s._v(" -i :21\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -ntl "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#（可以查看服务器socket）")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[n("strong",[s._v("⽹络传输⽅式")])]),s._v(" "),n("ul",[n("li",[s._v("⾯向有连接型:TCP 协议是可靠的、基于字节流的传输层通信协议")]),s._v(" "),n("li",[s._v("⾯向⽆连接型. UDP 协议是有资源消耗⼩, 处理速度快的优点（不可靠）")])]),s._v(" "),n("p",[n("strong",[s._v("socket")]),s._v("：是⽀持TCP/IP的⽹络通信的基本操作单元,类似通信的两⽅的⼀种约定。")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://gitee.com/axcmsm/tmp/raw/master/bigdata/20210922171606.png",alt:""}})]),s._v(" "),n("blockquote",[n("p",[n("strong",[s._v("能实现不同主机间的进程间通信")])])]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" socket\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#创建⼀个 socket    ")]),s._v("\nsocket"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("socket"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("AddressFamily"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" Type"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#参数⼀：AddressFamily(地址簇) ")]),s._v("\n\tsocket"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("AF_INET    IPv4（默认） \n\tsocket"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("AF_INET6   IPv6 socket"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("AF_UNIX 只能够⽤于单⼀的Unix系统进程间通信\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#参数⼆：Type(类型) ")]),s._v("\n\tsocket"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("SOCK_STREAM 流式socket "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" TCP （默认）\n    socket"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("SOCK_DGRAM 数据报式socket "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" UDP\n    socket"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("SOCK_RAW 可处理ICMP、IGMP等⽹络报⽂"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#原始协议的低级访问")]),s._v("\n    socket"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("SOCK_RDM 可靠的UDP形式保证交付数据报但不保证顺序"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#仅限于⾼级⽤户或管理员运⾏的程序使⽤")]),s._v("\n    socket"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("SOCK_SEQPACKET 可靠的连续数据包服务\n例：\t\n "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建tcp的套接字 ")]),s._v("\n s "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" socket"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("socket"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("socket"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("AF_INET"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" socket"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("SOCK_STREAM"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建udp的套接字")]),s._v("\n s1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" socket"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("socket"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("socket"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("AF_INET"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" socket"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("SOCK_DGRAM"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ...这⾥是使⽤套接字的功能（省略）... ")]),s._v("\n\n "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不⽤的时候，关闭套接字 ")]),s._v("\n s"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("close"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n s1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("close"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br")])]),n("p",[n("strong",[s._v("Socket对象内置方法")]),s._v("：")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("服务端")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[s._v("s"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("bind"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#绑定地址（host,port）到套接字， 在AF_INET下,以元组 （host,port）的形式表示地址。 ")]),s._v("\ns"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("listen"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#开始TCP监听。backlog指定在拒绝连接之前，操作系统 可以挂起的最⼤连接数量。该值⾄少为1，⼤部分应⽤程 序设为5 ")]),s._v("\ns"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("accept"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#被动接受TCP客户端连接,(阻塞式)等待连接的到来")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("客户端")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[s._v("s"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("connect"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#主动初始化TCP服务器连接，address的格式为元组（hostname,port），如果连接出错，返回socket.error 错误。 ")]),s._v("\ns"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("connect_ex"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#connect()函数的扩展版本,出错时返回出错码,⽽不是抛出 异常")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("公共")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("TCP\ns.recv()\t#接收TCP数据，数据以字符串形式返回，bufsize指定要 接收的最⼤数据量。\n\t\t\tflag提供有关消息的其他信息，通常 可以忽略。 \ns.send()\t#发送TCP数据，将string中的数据发送到连接的套接字。\n\t\t\t返回值是要发送的字节数量，该数量可能⼩于string的字节⼤⼩。\ns.sendall() #完整发送TCP数据，完整发送TCP数据。将string中的数 据发送到连接的套接字，\n\t\t\t 但在返回之前会尝试发送所有 数据。成功返回None，失败则抛出异常。\n\n\n#UDP\ns.recvfrom()#接收UDP数据，与recv()类似，但返回值是 （data,address）。\n\t\t其中data是包含接收数据的字符串， address是发送数据的套接字地址。\ns.sendto() 发送UDP数据，将数据发送到套接字，address是形式为 （ipaddr，port）的元组，指定远程地址。\ns.close() 关闭套接字\n\ns.getpeername() 返回连接套接字的远程地址。\ns.setsockopt(level,optname,value) 设置给定套接字选项的值。\ns.getsockopt(level,optname[.buflen]) 返回套接字选项的值。\ns.settimeout(timeout) 设置套接字操作的超时期，timeout是⼀个浮点数，单位 是秒。值为None表示没有超时期。\ns.gettimeout() 返回当前超时期的值，单位是秒，如果没有设置超时 期，则返回None。\ns.fileno() 返回套接字的⽂件描述符。\ns.setblocking(flag) 如果flag为0，则将套接字设为⾮阻塞模式，否则将套接 字设为阻塞模式（默认值）。\n\t\t⾮阻塞模式下，如果调⽤ recv()没有发现任何数据，\n\t\t或send()调⽤⽆法⽴即发送数 据，那么将引起socket.error异常。\ns.makefile() 创建⼀个与该套接字相关连的⽂件\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br")])]),n("img",{staticStyle:{zoom:"%"},attrs:{src:"https://gitee.com/axcmsm/tmp/raw/master/bigdata/20210922173303.png"}})])]),s._v(" "),n("p",[n("strong",[s._v("编码转换")]),s._v(":encode和decode()对字符串编码和解码")]),s._v(" "),n("p",[s._v("参数：")]),s._v(" "),n("div",{staticClass:"language-pyhton line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("#参数\nencoding -- 可选参数，要使⽤的编码，默认编码为 'utf-8'。\nerrors -- 可选参数，设置不同错误的处理⽅案。默认为 'strict',意为编码错误引起⼀个 UnicodeError。 \n其他可能得值有 'ignore', 'replace', 'xmlcharrefreplace', 'backslashreplace' \n以及通 过 codecs.register_error() 注册的任何值。\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("blockquote",[n("p",[s._v("详情参照"),n("a",{attrs:{href:"https://docs.python.org/3/library/stdtypes.html?highlight=decode#str.enc",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),n("OutboundLink")],1)])]),s._v(" "),n("p",[n("strong",[s._v("TCP")]),s._v(":")]),s._v(" "),n("img",{staticStyle:{zoom:"25%"},attrs:{src:"https://gitee.com/axcmsm/tmp/raw/master/bigdata/20210922174358.png"}}),s._v(" "),n("p",[n("strong",[s._v("tcp的三次握手")]),s._v(":"),n("img",{attrs:{src:"https://gitee.com/axcmsm/tmp/raw/master/bigdata/20210922174933.png",alt:""}})]),s._v(" "),n("p",[s._v("解释：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("（1）第⼀次握⼿：Client将标志位SYN置为1，随机产⽣⼀个值seq=J，并将该数据包发送给Server， Client进⼊SYN_SENT状态，等待Server确认。\n（2）第⼆次握⼿：Server收到数据包后由标志位SYN=1知道Client请求建⽴连接，Server将标志位 SYN和ACK都置为1，ack=J+1，随机产⽣⼀个值seq=K，并将该数据包发送给Client以确认连接请 求，Server进⼊SYN_RCVD状态。\n（3）第三次握⼿：Client收到确认后，检查ack是否为J+1，ACK是否为1，如果正确则将标志位ACK 置为1，ack=K+1，并将该数据包发送给Server，Server检查ack是否为K+1，ACK是否为1，如果正确 则连接建⽴成功，Client和Server进⼊ESTABLISHED状态，完成三次握⼿，随后Client与Server之间 可以开始传输数据了。\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("blockquote",[n("p",[s._v("为什么需要三次握⼿，两次不可以吗？或者四次、五次可以吗?")]),s._v(" "),n("p",[s._v("总结：第三次握⼿是为了防⽌：如果客户端迟迟没有收到服务器返回确认报⽂，这时会放弃 连接，重新启动⼀条连接请求，但问题是：服务器不知道客户端没有收到，所以他会收到两个连接，浪费连接开销。如果每次都是这样，就会浪费多个连接开销。")])]),s._v(" "),n("p",[n("strong",[s._v("tcp的4次挥⼿是⽤于断开连接")])])])}),[],!1,null,null,null);t.default=e.exports}}]);