(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{456:function(s,t,a){"use strict";a.r(t);var n=a(16),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"ğŸ¦ddl"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¦ddl"}},[s._v("#")]),s._v(" ğŸ¦DDL")]),s._v(" "),a("p",[s._v("æ•°æ®å®šä¹‰è¯­è¨€(ä¸»è¦æŒæ¡"),a("strong",[s._v("å»ºè¡¨")]),s._v("ä½¿ç”¨)ï¼šCREATEã€ALTERä¸DROP æ“ä½œå¯¹è±¡åŒ…æ‹¬æ•°æ®åº“ã€è¡¨ã€è§†å›¾....")]),s._v(" "),a("p",[a("strong",[s._v("å»ºè¡¨å®Œæ•´è¯­æ³•æ ‘")]),s._v("ï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/axcmsm/tmp/raw/master/bigdata/20210911173904.png",alt:""}})]),s._v(" "),a("p",[s._v("è§£é‡Šï¼š")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("ï¼ˆ"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("ï¼‰"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" åˆ›å»ºä¸€ä¸ªæŒ‡å®šåå­—çš„è¡¨ã€‚å¦‚æœç›¸åŒåå­—çš„è¡¨å·²ç»å­˜åœ¨ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ï¼›\nç”¨æˆ·å¯ä»¥ç”¨ "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("IF")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXISTS")]),s._v(" é€‰é¡¹æ¥å¿½ç•¥è¿™ä¸ªå¼‚å¸¸ã€‚\nï¼ˆ"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("ï¼‰EXTERNAL å…³é”®å­—å¯ä»¥è®©ç”¨æˆ·åˆ›å»ºä¸€ä¸ªå¤–éƒ¨è¡¨ï¼Œåœ¨å»ºè¡¨çš„åŒæ—¶å¯ä»¥æŒ‡å®šä¸€ä¸ªæŒ‡å‘å®\né™…æ•°æ®çš„è·¯å¾„ï¼ˆLOCATIONï¼‰ï¼Œåœ¨åˆ é™¤è¡¨çš„æ—¶å€™ï¼Œå†…éƒ¨è¡¨çš„å…ƒæ•°æ®å’Œæ•°æ®ä¼šè¢«ä¸€èµ·åˆ é™¤ï¼Œè€Œå¤–\néƒ¨è¡¨åªåˆ é™¤å…ƒæ•°æ®ï¼Œä¸åˆ é™¤æ•°æ®ã€‚\nï¼ˆ"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("ï¼‰"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v("ï¼šä¸ºè¡¨å’Œåˆ—æ·»åŠ æ³¨é‡Šã€‚\nï¼ˆ"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("ï¼‰PARTITIONED "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v("åˆ›å»ºåˆ†åŒºè¡¨\nï¼ˆ"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("ï¼‰"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CLUSTERED")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v("åˆ›å»ºåˆ†æ¡¶è¡¨\nï¼ˆ"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("ï¼‰SORTED "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v("ä¸å¸¸ç”¨ï¼Œå¯¹æ¡¶ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—å¦å¤–æ’åº\nï¼ˆ"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("ï¼‰"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ROW")]),s._v(" FORMAT DELIMITED  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("é»˜è®¤çš„åˆ†éš”ç¬¦æ˜¯\\"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("001")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FIELDS")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TERMINATED")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("char")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" å­—æ®µä¹‹é—´çš„åˆ†éš”ç¬¦ \n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("COLLECTION ITEMS "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TERMINATED")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("char")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" é›†åˆä¹‹é—´çš„åˆ†éš”ç¬¦\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("MAP "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEYS")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TERMINATED")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("char")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" ï¼ˆmapæ˜ å°„kvä¹‹é—´åˆ†éš”ç¬¦ï¼‰\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LINES")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TERMINATED")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("char")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("     è¡Œæ•°æ®ä¹‹é—´çš„åˆ†éš”ç¬¦\n\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" SERDE serde_name \n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WITH")]),s._v(" SERDEPROPERTIES "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("property_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("property_value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" property_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("property_value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\tç”¨æˆ·åœ¨å»ºè¡¨çš„æ—¶å€™å¯ä»¥è‡ªå®šä¹‰SerDeæˆ–è€…ä½¿ç”¨è‡ªå¸¦çš„SerDeã€‚å¦‚æœæ²¡æœ‰æŒ‡å®š"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ROW")]),s._v(" FORMAT æˆ–è€…"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ROW")]),s._v(" FORMAT DELIMITEDï¼Œå°†ä¼šä½¿ç”¨è‡ªå¸¦çš„SerDeã€‚åœ¨å»ºè¡¨çš„æ—¶å€™ï¼Œç”¨æˆ·è¿˜éœ€è¦ä¸ºè¡¨æŒ‡å®šåˆ—ï¼Œç”¨æˆ·åœ¨æŒ‡å®šè¡¨çš„åˆ—çš„åŒæ—¶ä¹Ÿä¼šæŒ‡å®šè‡ªå®šä¹‰çš„SerDeï¼ŒHiveé€šè¿‡SerDeç¡®å®šè¡¨çš„å…·ä½“çš„åˆ—çš„æ•°æ®ã€‚\nSerDeæ˜¯Serialize"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Deserilizeçš„ç®€ç§°ï¼Œhiveä½¿ç”¨Serdeè¿›è¡Œè¡Œå¯¹è±¡çš„åºåˆ—ä¸ååºåˆ—åŒ–ã€‚\nï¼ˆ"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("ï¼‰STORED "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v("æŒ‡å®šå­˜å‚¨æ–‡ä»¶ç±»å‹\nå¸¸ç”¨çš„å­˜å‚¨æ–‡ä»¶ç±»å‹ï¼šSEQUENCEFILEï¼ˆäºŒè¿›åˆ¶åºåˆ—æ–‡ä»¶ï¼‰ã€TEXTFILEï¼ˆæ–‡æœ¬ï¼‰ã€RCFILEï¼ˆåˆ—å¼å­˜å‚¨æ ¼å¼æ–‡ä»¶ï¼‰\nå¦‚æœæ–‡ä»¶æ•°æ®æ˜¯çº¯æ–‡æœ¬ï¼Œå¯ä»¥ä½¿ç”¨STOREDASTEXTFILEã€‚å¦‚æœæ•°æ®éœ€è¦å‹ç¼©ï¼Œä½¿ç”¨STORED "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" SEQUENCEFILEã€‚\nï¼ˆ"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("ï¼‰LOCATION ï¼šæŒ‡å®šè¡¨åœ¨HDFSä¸Šçš„å­˜å‚¨ä½ç½®ã€‚\nï¼ˆ"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("ï¼‰"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v("ï¼šåè·ŸæŸ¥è¯¢è¯­å¥ï¼Œæ ¹æ®æŸ¥è¯¢ç»“æœåˆ›å»ºè¡¨ã€‚\nï¼ˆ"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("ï¼‰"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("LIKE")]),s._v("å…è®¸ç”¨æˆ·å¤åˆ¶ç°æœ‰çš„è¡¨ç»“æ„ï¼Œä½†æ˜¯ä¸å¤åˆ¶æ•°æ®ã€‚\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br")])]),a("p",[a("strong",[s._v("æ•°æ®ç±»å‹")]),s._v("ï¼š")]),s._v(" "),a("ul",[a("li",[s._v("åŸç”Ÿæ•°æ®ç±»å‹ï¼š\n"),a("ul",[a("li",[s._v("æ•°å€¼ç±»å‹ï¼š"),a("strong",[s._v("int")]),s._v("ã€"),a("strong",[s._v("double")]),s._v("ã€floatã€bigintã€smallintã€tinyint....")]),s._v(" "),a("li",[s._v("æ—¶é—´æ—¥æœŸç±»å‹ï¼š"),a("strong",[s._v("timestamp")]),s._v("ã€"),a("strong",[s._v("data")]),s._v("ã€interval...")]),s._v(" "),a("li",[s._v("å­—ç¬¦ä¸²ç±»å‹ï¼š"),a("strong",[s._v("string")]),s._v("ã€varcharã€char....")]),s._v(" "),a("li",[s._v("æ‚é¡¹æ•°æ®ç±»å‹ï¼šbooleanã€binary....")])])]),s._v(" "),a("li",[s._v("å¤æ‚æ•°æ®ç±»å‹ï¼š"),a("strong",[s._v("array")]),s._v("æ•°ç»„ã€"),a("strong",[s._v("map")]),s._v("æ˜ å°„ã€structç»“æ„ã€unionè”åˆä½“")])]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("æ³¨æ„")]),s._v(" "),a("p",[s._v("æ•°æ®ç±»å‹è‹±æ–‡å­—æ¯å¤§å°å†™ä¸æ•æ„Ÿã€æ”¯æŒJavaæ•°æ®ç±»å‹ã€æ•°æ®ç±»å‹ä¸ä¸€è‡´Hiveä¼šå°è¯•éšå¼è½¬æ¢ï¼Œä½†æ˜¯ä¸ä¿è¯æˆåŠŸ")]),s._v(" "),a("p",[s._v("å¤æ‚æ•°æ®ç±»å‹çš„ä½¿ç”¨é€šå¸¸éœ€è¦å’Œåˆ†éš”ç¬¦æŒ‡å®šè¯­æ³•é…åˆä½¿ç”¨")]),s._v(" "),a("p",[s._v("CASTå‡½æ•° ï¼šæ˜¾ç¤ºè½¬æ¢")])]),s._v(" "),a("p",[a("strong",[s._v("é»˜è®¤è·¯å¾„")]),s._v("ï¼š"),a("code",[s._v("/conf/hive-site.xmlé…ç½®æ–‡ä»¶çš„hive.metastore.warehouse.dirå±æ€§æŒ‡å®šï¼Œé»˜è®¤å€¼æ˜¯ï¼š/user/hive/warehouseã€‚")]),s._v(" å¯ç”¨locationæŒ‡å®š")]),s._v(" "),a("p",[a("strong",[s._v("å¤–éƒ¨è¡¨")]),s._v("ï¼šhiveåªç®¡ç†å…ƒæ•°æ®ï¼Œä¸ä¼šç®¡ç†çœŸæ­£çš„æ•°æ®ï¼Œåˆ é™¤è¡¨å³åˆ é™¤å…ƒæ•°æ® "),a("strong",[s._v("å…³é”®å­—")]),a("code",[s._v("external")]),s._v("   (æ•°æ®ä¸æ˜“ç”¨å¤–éƒ¨)")]),s._v(" "),a("p",[a("strong",[s._v("å†…å¤–éƒ¨è¡¨è½¬æ¢")]),s._v("ï¼š")]),s._v(" "),a("ol",[a("li",[s._v("æŸ¥è¯¢è¡¨ç±»å‹ "),a("code",[s._v("desc formatted student2;")])]),s._v(" "),a("li",[s._v("ä¿®æ”¹å†…éƒ¨è¡¨ student2 ä¸ºå¤–éƒ¨è¡¨ "),a("code",[s._v("alter table student2 set tblproperties('EXTERNAL'='TRUE');")])]),s._v(" "),a("li",[s._v("ä¿®æ”¹å¤–éƒ¨è¡¨ student2 ä¸ºå†…éƒ¨è¡¨ "),a("code",[s._v("alter table student2 set tblproperties('EXTERNAL'='FALSE');")])])]),s._v(" "),a("p",[a("strong",[s._v("åˆ†åŒºè¡¨")]),s._v("ï¼šï¼ˆæ‰«ææŒ‡å®šåˆ†åŒºï¼Œè¿‡æ»¤ï¼Œé¿å…å…¨å±€æ‰«æï¼‰ "),a("strong",[s._v("partitioned by")]),s._v("ï¼ˆåˆ†åŒºå­—æ®µ)   "),a("strong",[s._v("åˆ†åŒºå­—æ®µä¸èƒ½åœ¨è¡¨ä¸­å·²å­˜åœ¨")]),s._v(",åŒä¸€åˆ†åŒºåœ¨åŒä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("åŠ è½½æ–¹å¼ï¼š"),a("strong",[s._v("é™æ€åˆ†åŒº")]),s._v("`load data [local] inpath 'æ–‡ä»¶è·¯å¾„' into table è¡¨å partition(åˆ†åŒºå­—æ®µ='åˆ†åŒºå€¼'...)ï¼›")])]),s._v(" "),a("li",[a("p",[s._v("åŠ è½½æ–¹å¼ï¼š"),a("strong",[s._v("åŠ¨æ€åˆ†åŒº")]),s._v(" "),a("code",[s._v("insert+select")]),s._v(" é«˜æ•ˆ")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#æ˜¯å¦å¼€å¯åŠ¨æ€åˆ†åŒºåŠŸèƒ½\nset hive.exec.dynamic.partition=true;\n#æŒ‡å®šåŠ¨æ€åˆ†åŒºæ¨¡å¼ï¼Œåˆ†ä¸ºnonstickéä¸¥æ ¼æ¨¡å¼å’Œstrictä¸¥æ ¼æ¨¡å¼ã€‚\n#strictä¸¥æ ¼æ¨¡å¼è¦æ±‚è‡³å°‘æœ‰ä¸€ä¸ªåˆ†åŒºä¸ºé™æ€åˆ†åŒºã€‚\nset hive.exec.dynamic.partition.mode=nonstrict;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[a("code",[s._v("insert into table è¡¨å partition(role) select å­—æ®µ,åˆ†åŒºå­—æ®µ from è¡¨å;")])])]),s._v(" "),a("li",[a("p",[s._v("æŸ¥è¯¢ï¼šå°½é‡å…ˆä½¿ç”¨whereè¿›è¡Œåˆ†åŒºè¿‡æ»¤")])]),s._v(" "),a("li",[a("p",[s._v("å¤šé‡åˆ†åŒºï¼šåˆ†åŒºä¸‹åµŒå¥—åˆ†åŒºï¼Œå¸¸è§ï¼š"),a("strong",[s._v("åŒåˆ†åŒºè¡¨")])]),s._v(" "),a("blockquote",[a("p",[s._v("åˆ†åŒºè¡¨æ˜¯ä¼˜åŒ–æ‰‹æ®µã€åˆ†åŒºå­—æ®µæ˜¯è™šæ‹Ÿå­—æ®µä¸åœ¨æ•°æ®æ–‡ä»¶ä¸­")])])])]),s._v(" "),a("p",[a("strong",[s._v("åˆ†æ¡¶è¡¨")]),s._v(":ä¼˜åŒ–æŸ¥è¯¢  æŠŠæ–‡ä»¶åˆ†æˆå‡ ä¸ªéƒ¨åˆ†(æ¯ä¸€ä¸ªéƒ¨åˆ†ä»£è¡¨ä¸€ä¸ªæ¡¶)  "),a("strong",[s._v("å­—æ®µéœ€è¦åœ¨è¡¨ä¸­å­˜åœ¨")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("åˆ†æ¡¶è§„åˆ™ï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Bucket number = hash_function(bucketing_column)  mod   num_buckets\nåˆ†æ¡¶ç¼–å·      = å“ˆå¸Œæ–¹æ³•ï¼ˆåˆ†æ¡¶å­—æ®µï¼‰           å–æ¨¡  åˆ†æ¡¶ä¸ªæ•°\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("clustered by è¡¨å­—æ®µ ï¼ˆsorted by å­—æ®µ asc|descï¼‰into æ¡¶ä¸ªæ•° bucket")])])]),s._v(" "),a("li",[a("p",[s._v("åŠ è½½æ•°æ®æ–¹å¼")]),s._v(" "),a("ul",[a("li",[s._v("åˆ›å»ºåˆ†æ¡¶è¡¨")]),s._v(" "),a("li",[s._v("åˆ›å»ºæ™®é€šè¡¨æŠŠæ•°æ®åŠ è½½è¿›å»")]),s._v(" "),a("li",[a("code",[s._v("insert into åˆ†æ¡¶è¡¨ +select * from æ™®é€šè¡¨")])])])]),s._v(" "),a("li",[a("p",[s._v("å¥½å¤„ï¼š")]),s._v(" "),a("ul",[a("li",[s._v("åŸºäºåˆ†æ¡¶å­—æ®µæ‰«æï¼Œå‡å°‘å…¨è¡¨æŸ¥è¯¢")]),s._v(" "),a("li",[s._v("joinæ—¶æé«˜mræ‰§è¡Œæ•ˆç‡ï¼Œå‡å°‘ç¬›å¡å°”ç§¯æ•°é‡ï¼ˆjoinå­—æ®µè¿›è¡Œåˆ†æ¡¶æ“ä½œï¼‰")]),s._v(" "),a("li",[s._v("å¯¹æ•°æ®è¿›è¡Œé«˜æ•ˆæŠ½æ ·")])])])]),s._v(" "),a("p",[a("strong",[s._v("äº‹åŠ¡è¡¨")]),s._v("ï¼šï¼ˆéå¸¸æ…¢ã€ä¸æ˜¯ä¸»æ–¹å‘ï¼‰åªæœ‰äº‹åŠ¡è¡¨æ‰èƒ½è¿›è¡Œupdataã€delete")]),s._v(" "),a("p",[s._v("å¼€å¯äº‹åŠ¡è¡¨ï¼š")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--1ã€å¼€å¯äº‹åŠ¡é…ç½®ï¼ˆå¯ä»¥ä½¿ç”¨setè®¾ç½®å½“å‰sessionç”Ÿæ•ˆ ä¹Ÿå¯ä»¥é…ç½®åœ¨hive-site.xmlä¸­ï¼‰")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("support"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("concurrency "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--Hiveæ˜¯å¦æ”¯æŒå¹¶å‘")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("enforce"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("bucketing "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--ä»Hive2.0å¼€å§‹ä¸å†éœ€è¦  æ˜¯å¦å¼€å¯åˆ†æ¡¶åŠŸèƒ½")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("exec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dynamic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("partition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("mode")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" nonstrict"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--åŠ¨æ€åˆ†åŒºæ¨¡å¼  éä¸¥æ ¼")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("manager "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("apache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hadoop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lockmgr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("DbTxnManager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("compactor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("initiator"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--æ˜¯å¦åœ¨Metastoreå®ä¾‹ä¸Šè¿è¡Œå¯åŠ¨çº¿ç¨‹å’Œæ¸…ç†çº¿ç¨‹")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("compactor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("worker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("threads "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--åœ¨æ­¤metastoreå®ä¾‹ä¸Šè¿è¡Œå¤šå°‘ä¸ªå‹ç¼©ç¨‹åºå·¥ä½œçº¿ç¨‹ã€‚")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--2ã€åˆ›å»ºHiveäº‹åŠ¡è¡¨")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" trans_student"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\nid "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\nname String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\nage "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("clustered")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" buckets stored "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" orc TBLPROPERTIES"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'transactional'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'true'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("p",[a("strong",[s._v("è§†å›¾")]),s._v("ï¼šè™šæ‹Ÿè¡¨ä¿æŠ¤æ•°æ®ç®€åŒ–æ“ä½œ")]),s._v(" "),a("p",[s._v("è¯­æ³•:")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--hiveä¸­æœ‰ä¸€å¼ çœŸå®çš„åŸºç¡€è¡¨t_usa_covid19")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" itheima"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("t_usa_covid19"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--1ã€åˆ›å»ºè§†å›¾")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("view")]),s._v(" v_usa_covid19 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" count_date"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" county"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("deaths "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" t_usa_covid19 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("limit")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--èƒ½å¦ä»å·²æœ‰çš„è§†å›¾ä¸­åˆ›å»ºè§†å›¾å‘¢  å¯ä»¥çš„")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("view")]),s._v(" v_usa_covid19_from_view "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" v_usa_covid19 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("limit")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--2ã€æ˜¾ç¤ºå½“å‰å·²æœ‰çš„è§†å›¾")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("tables")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" views"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--hive v2.2.0ä¹‹åæ”¯æŒ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--3ã€è§†å›¾çš„æŸ¥è¯¢ä½¿ç”¨")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" v_usa_covid19"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--èƒ½å¦æ’å…¥æ•°æ®åˆ°è§†å›¾ä¸­å‘¢ï¼Ÿ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--ä¸è¡Œ æŠ¥é”™  SemanticException:A view cannot be used as target table for LOAD or INSERT")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" v_usa_covid19 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" count_date"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("county"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("deaths "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" t_usa_covid19"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--4ã€æŸ¥çœ‹è§†å›¾å®šä¹‰")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" v_usa_covid19"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--5ã€åˆ é™¤è§†å›¾")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("drop")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("view")]),s._v(" v_usa_covid19_from_view"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--6ã€æ›´æ”¹è§†å›¾å±æ€§")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alter")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("view")]),s._v(" v_usa_covid19 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" TBLPROPERTIES "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'comment'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'This is a view'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--7ã€æ›´æ”¹è§†å›¾å®šä¹‰")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alter")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("view")]),s._v(" v_usa_covid19 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" county"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("deaths "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" t_usa_covid19 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("limit")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br")])]),a("p",[a("strong",[s._v("ç‰©åŒ–è§†å›¾")]),s._v(":é€šè¿‡é¢„è®¡ç®—ï¼Œæé«˜æŸ¥è¯¢æ€§èƒ½ï¼Œå½“ç„¶éœ€è¦å ç”¨ä¸€å®šçš„å­˜å‚¨ç©ºé—´ã€‚")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("ç‰©åŒ–è§†å›¾çš„åˆ›å»ºè¯­æ³•\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" MATERIALIZED "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VIEW")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("IF")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXISTS")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("db_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("materialized_view_name\v    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DISABLE")]),s._v(" REWRITE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" materialized_view_comment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("PARTITIONED "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("col_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CLUSTERED")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("col_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DISTRIBUTED")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("col_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" SORTED "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("col_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ROW")]),s._v(" FORMAT row_format"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("STORED "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" file_format"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" STORED "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'storage.handler.class.name'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WITH")]),s._v(" SERDEPROPERTIES "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("LOCATION hdfs_path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("TBLPROPERTIES "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("property_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("property_value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# show materialized view; æŸ¥çœ‹åˆ›å»ºçš„è§†å›¾")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# explain select  æŸ¥çœ‹sqlæ‰§è¡Œè®¡åˆ’")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("p",[a("strong",[s._v("å…¶ä»–è¯­æ³•")]),s._v("ï¼š")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("æ•°æ®åº“DDlæ“ä½œ")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("create database æ•°æ®åº“å ï¼ˆé»˜è®¤è·¯å¾„**/user/hive/warehouse/*.db**)")])]),s._v(" "),a("li",[a("p",[s._v("desc database æ˜¾ç¤ºæ•°æ®ä¿¡æ¯")])]),s._v(" "),a("li",[a("p",[s._v("use database åˆ‡æ¢æ•°æ®åº“")])]),s._v(" "),a("li",[a("p",[s._v("drop database åˆ é™¤æ•°æ®åº“ [cascade|restrict]")]),s._v(" "),a("blockquote",[a("p",[a("code",[s._v("[CASCADE|RESTRICT]")]),s._v("è¡¨ç¤ºæ˜¯å¦éœ€è¦å¼ºåˆ¶åˆ é™¤è¯¥åº“åŠå…¶ç›¸å…³çš„è¡¨ï¼Œé»˜è®¤ä¸º"),a("code",[s._v("RESTRICT")]),s._v("ã€‚")])])]),s._v(" "),a("li",[a("p",[s._v("alter database ä¿®æ”¹Hiveä¸­çš„æ•°æ®åº“å…³è”çš„å…ƒæ•°æ®")])])])]),s._v(" "),a("li",[a("p",[s._v("è¡¨DDLæ“ä½œ")]),s._v(" "),a("ul",[a("li",[s._v("desc table æ˜¾ç¤ºå»ºè¡¨è¯­å¥ ï¼ˆformattion,ä»¥è¡¨æ ¼æ ¼å¼æ˜¾ç¤ºå…ƒæ•°æ®)")]),s._v(" "),a("li",[s._v("drop table åˆ é™¤è¡¨")]),s._v(" "),a("li",[s._v("truncate table åˆ é™¤æ‰€æœ‰è¡Œä¿ç•™æ•°æ®ç»“æ„")]),s._v(" "),a("li",[s._v("alter table ä¿®æ”¹è¡¨ç»“æ„")])])]),s._v(" "),a("li",[a("p",[s._v("åˆ†åŒºDDLæ“ä½œ(Alter table)")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("add partition  æ›´æ”¹è¡¨å…ƒæ•°æ® (éœ€è¦ä¿è¯å¢åŠ çš„åˆ†åŒºä½ç½®è·¯å¾„ä¸‹ï¼Œæ•°æ®å·²ç»å­˜åœ¨ï¼Œæˆ–è€…å¢åŠ å®Œåˆ†åŒºä¹‹åå¯¼å…¥åˆ†åŒºæ•°æ®)")])]),s._v(" "),a("li",[a("p",[s._v("rename partition åˆ†åŒºé‡å‘½å")])]),s._v(" "),a("li",[a("p",[s._v("drop partition åˆ é™¤åˆ†åŒº")])]),s._v(" "),a("li",[a("p",[s._v("alter partition ä¿®æ”¹åˆ†åŒº")])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("MSCK partition")]),s._v(" æ£€æŸ¥åˆ†åŒºå…ƒæ•°æ®ä¿®å¤")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--1ã€å¢åŠ åˆ†åŒº")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALTER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" table_name "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PARTITION")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'20170101'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" location\v    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/user/hadoop/warehouse/table_name/dt=20170101'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--ä¸€æ¬¡æ·»åŠ ä¸€ä¸ªåˆ†åŒº")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALTER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" table_name "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PARTITION")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2008-08-08'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" country"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'us'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" location "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/path/to/us/part080808'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PARTITION")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2008-08-09'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" country"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'us'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" location "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/path/to/us/part080809'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--ä¸€æ¬¡æ·»åŠ å¤šä¸ªåˆ†åŒº")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--2ã€é‡å‘½ååˆ†åŒº")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALTER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" table_name "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PARTITION")]),s._v(" partition_spec "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RENAME")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TO")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PARTITION")]),s._v(" partition_spec"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALTER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" table_name "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PARTITION")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2008-08-09'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RENAME")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TO")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PARTITION")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'20080809'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--3ã€åˆ é™¤åˆ†åŒº")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALTER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" table_name "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("IF")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXISTS")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PARTITION")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2008-08-08'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" country"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'us'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALTER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" table_name "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("IF")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXISTS")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PARTITION")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2008-08-08'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" country"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'us'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PURGE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--ç›´æ¥åˆ é™¤æ•°æ® ä¸è¿›åƒåœ¾æ¡¶")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--5ã€ä¿®æ”¹åˆ†åŒº")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--æ›´æ”¹åˆ†åŒºæ–‡ä»¶å­˜å‚¨æ ¼å¼")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALTER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" table_name "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PARTITION")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2008-08-09'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" FILEFORMAT file_format"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--æ›´æ”¹åˆ†åŒºä½ç½®")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALTER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" table_name "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PARTITION")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2008-08-09'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" LOCATION "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"new location"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--4ã€ä¿®å¤åˆ†åŒº")]),s._v("\nMSCK "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("REPAIR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" table_name "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DROP")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("SYNC PARTITIONS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br")])])])])]),s._v(" "),a("li",[a("p",[s._v("show è¯­æ³•")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--1ã€æ˜¾ç¤ºæ‰€æœ‰æ•°æ®åº“ SCHEMASå’ŒDATABASESçš„ç”¨æ³• åŠŸèƒ½ä¸€æ ·")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("databases")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" schemas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--2ã€æ˜¾ç¤ºå½“å‰æ•°æ®åº“æ‰€æœ‰è¡¨/è§†å›¾/ç‰©åŒ–è§†å›¾/åˆ†åŒº/ç´¢å¼•")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("tables")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLES")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("IN")]),s._v(" database_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--æŒ‡å®šæŸä¸ªæ•°æ®åº“")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--3ã€æ˜¾ç¤ºå½“å‰æ•°æ®åº“ä¸‹æ‰€æœ‰è§†å›¾")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Show")]),s._v(" Views"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" VIEWS "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'test_*'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('-- show all views that start with "test_"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" VIEWS "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" test1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- show views from database test1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" VIEWS "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("IN")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" database_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--4ã€æ˜¾ç¤ºå½“å‰æ•°æ®åº“ä¸‹æ‰€æœ‰ç‰©åŒ–è§†å›¾")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" MATERIALIZED VIEWS "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("IN")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" database_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--5ã€æ˜¾ç¤ºè¡¨åˆ†åŒºä¿¡æ¯ï¼Œåˆ†åŒºæŒ‰å­—æ¯é¡ºåºåˆ—å‡ºï¼Œä¸æ˜¯åˆ†åŒºè¡¨æ‰§è¡Œè¯¥è¯­å¥ä¼šæŠ¥é”™")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" partitions table_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--6ã€æ˜¾ç¤ºè¡¨/åˆ†åŒºçš„æ‰©å±•ä¿¡æ¯")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXTENDED")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("IN")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" database_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("LIKE")]),s._v(" table_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extended")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("like")]),s._v(" student"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--7ã€æ˜¾ç¤ºè¡¨çš„å±æ€§ä¿¡æ¯")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" TBLPROPERTIES table_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" tblproperties student"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--8ã€æ˜¾ç¤ºè¡¨ã€è§†å›¾çš„åˆ›å»ºè¯­å¥")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("db_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("table_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("view_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" student"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--9ã€æ˜¾ç¤ºè¡¨ä¸­çš„æ‰€æœ‰åˆ—ï¼ŒåŒ…æ‹¬åˆ†åŒºåˆ—ã€‚")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COLUMNS")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("IN")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" table_name "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("IN")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" db_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("columns")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" student"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--10ã€æ˜¾ç¤ºå½“å‰æ”¯æŒçš„æ‰€æœ‰è‡ªå®šä¹‰å’Œå†…ç½®çš„å‡½æ•°")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" functions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--11ã€Describe desc")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--æŸ¥çœ‹è¡¨ä¿¡æ¯")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("desc")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extended")]),s._v(" table_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--æŸ¥çœ‹è¡¨ä¿¡æ¯ï¼ˆæ ¼å¼åŒ–ç¾è§‚ï¼‰")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("desc")]),s._v(" formatted table_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--æŸ¥çœ‹æ•°æ®åº“ç›¸å…³ä¿¡æ¯")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("describe")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("database")]),s._v(" database_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br")])])])]),s._v(" "),a("h2",{attrs:{id:"dml"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dml"}},[s._v("#")]),s._v(" DML")]),s._v(" "),a("p",[a("strong",[s._v("åŠ è½½æ•°æ®")]),s._v("ï¼š")]),s._v(" "),a("ul",[a("li",[a("p",[a("strong",[s._v("load")]),s._v("ï¼šï¼ˆä»æœ¬åœ°æ˜¯å¤åˆ¶,ä»hadfsæ˜¯ç§»åŠ¨ï¼‰")]),s._v(" "),a("p",[s._v("å¯ä»¥åŠ è½½é‡å†™insert as selectã€ä½¿ç”¨inputformatã€serdeæŒ‡å®šè¾“å…¥æ ¼å¼")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# åŸºæœ¬è¯­æ³•\nload data [local] inpath 'æ•°æ®çš„ path' [overwrite] into table \nstudent [partition (partcol1=val1,â€¦)];\nï¼ˆ1ï¼‰load data:è¡¨ç¤ºåŠ è½½æ•°æ®\nï¼ˆ2ï¼‰local:è¡¨ç¤ºä»æœ¬åœ°åŠ è½½æ•°æ®åˆ° hive è¡¨ï¼›å¦åˆ™ä» HDFS åŠ è½½æ•°æ®åˆ° hive è¡¨ \nï¼ˆ3ï¼‰inpath:è¡¨ç¤ºåŠ è½½æ•°æ®çš„è·¯å¾„\nï¼ˆ4ï¼‰overwrite:è¡¨ç¤ºè¦†ç›–è¡¨ä¸­å·²æœ‰æ•°æ®ï¼Œå¦åˆ™è¡¨ç¤ºè¿½åŠ \nï¼ˆ5ï¼‰into table:è¡¨ç¤ºåŠ è½½åˆ°å“ªå¼ è¡¨\nï¼ˆ6ï¼‰student:è¡¨ç¤ºå…·ä½“çš„è¡¨\nï¼ˆ7ï¼‰partition:è¡¨ç¤ºä¸Šä¼ åˆ°æŒ‡å®šåˆ†åŒº\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("As Select")]),s._v(" : "),a("code",[s._v("create table if not exists student as select id, name from student;")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("Import")]),s._v(" "),a("strong",[s._v("æ•°æ®åˆ°æŒ‡å®š")]),s._v(" "),a("strong",[s._v("Hive")]),s._v(" "),a("strong",[s._v("è¡¨ä¸­")]),s._v(" :"),a("code",[s._v("import table student from '/user/hive/warehouse/export/student';")])])])]),s._v(" "),a("p",[a("strong",[s._v("æ’å…¥æ•°æ®")])]),s._v(" "),a("ul",[a("li",[a("p",[a("strong",[s._v("Insert")]),s._v("ï¼šintoï¼ˆè¿½åŠ ï¼‰overwriteï¼ˆè¦†ç›–ï¼‰ é€šå¸¸insert+select")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--step1:åˆ›å»ºä¸€å¼ æºè¡¨student")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("drop")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("exists")]),s._v(" student"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" student"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("num "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("name string"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("sex string"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("age "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("dept string"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\v"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("row")]),s._v(" format delimited\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fields")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("terminated")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("','")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--åŠ è½½æ•°æ®")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("load")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("data")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("local")]),s._v(" inpath "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/root/hivedata/students.txt'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" student"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--step2ï¼šåˆ›å»ºä¸€å¼ ç›®æ ‡è¡¨  åªæœ‰ä¸¤ä¸ªå­—æ®µ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" student_from_insert"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sno "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("sname string"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--ä½¿ç”¨insert+selectæ’å…¥æ•°æ®åˆ°æ–°è¡¨ä¸­")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" student_from_insert "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" num"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("name "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" student"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" student_insert1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("å¤šé‡æ’å…¥:ä¸€æ¬¡æ‰«æï¼Œå¤šæ¬¡æ’å…¥")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-----------multiple inserts----------------------")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--å½“å‰åº“ä¸‹å·²æœ‰ä¸€å¼ è¡¨student")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" student"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--åˆ›å»ºä¸¤å¼ æ–°è¡¨")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" student_insert1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sno "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" student_insert2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sname string"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--å¤šé‡æ’å…¥")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" student\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" overwrite "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" student_insert1\v"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" num\v"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" overwrite "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" student_insert2\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("åŠ¨æ€åˆ†åŒºæ’å…¥ï¼šinsert + select")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("é™æ€ï¼š"),a("code",[s._v("LOAD DATA INPATH 'è·¯å¾„' INTO TABLE è¡¨å partition(country =\"China\");")])])]),s._v(" "),a("li",[a("p",[s._v("åŠ¨æ€ï¼š æŒ‰å­—æ®µé¡ºåºå³å¯")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--1ã€é¦–å…ˆè®¾ç½®åŠ¨æ€åˆ†åŒºæ¨¡å¼ä¸ºéä¸¥æ ¼æ¨¡å¼ é»˜è®¤å·²ç»å¼€å¯äº†åŠ¨æ€åˆ†åŒºåŠŸèƒ½")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("exec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dynamic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("partition")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("exec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dynamic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("partition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("mode")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" nonstrict"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--2ã€å½“å‰åº“ä¸‹å·²æœ‰ä¸€å¼ è¡¨student")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" student"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--3ã€åˆ›å»ºåˆ†åŒºè¡¨ ä»¥sdeptä½œä¸ºåˆ†åŒºå­—æ®µ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" student_partition"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Sno "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("Sname string"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("Sex string"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("Sage "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" partitioned "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Sdept string"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--4ã€æ‰§è¡ŒåŠ¨æ€åˆ†åŒºæ’å…¥æ“ä½œ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" student_partition "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("partition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Sdept"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" num"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("sex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("age"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("dept "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" student"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--å…¶ä¸­ï¼Œnum,name,sex,ageä½œä¸ºè¡¨çš„å­—æ®µå†…å®¹æ’å…¥è¡¨ä¸­")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--deptä½œä¸ºåˆ†åŒºå­—æ®µå€¼")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])])])])])]),s._v(" "),a("p",[a("strong",[s._v("æ•°æ®å¯¼å‡º")]),s._v(":")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("Insert")]),s._v(" "),a("strong",[s._v("å¯¼å‡º")])])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å°†æŸ¥è¯¢çš„ç»“æœå¯¼å‡ºåˆ°æœ¬åœ°å¯¼å‡ºåˆ°æœ¬åœ°")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" overwrite "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("local")]),s._v(" directory "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/opt/module/hive/data/export/student'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" student"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å°†æŸ¥è¯¢çš„ç»“æœæ ¼å¼åŒ–å¯¼å‡ºåˆ°æœ¬åœ°")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" overwrite "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("local")]),s._v(" directory "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/opt/module/hive/data/export/student1'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ROW")]),s._v(" FORMAT DELIMITED "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FIELDS")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TERMINATED")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\\t'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" student"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å°†æŸ¥è¯¢çš„ç»“æœå¯¼å‡ºåˆ° HDFS ä¸Š(æ²¡æœ‰ local)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" overwrite directory "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/user/atguigu/student2'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ROW")]),s._v(" FORMAT DELIMITED "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FIELDS")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TERMINATED")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\\t'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" student"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  Hadoop å‘½ä»¤å¯¼å‡ºåˆ°æœ¬åœ°")]),s._v("\ndfs "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("get "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("hive"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("warehouse"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("student"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("student"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txt\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("opt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("module"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("data")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("export"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("student3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("ul",[a("li",[a("strong",[s._v("Hive Shell")]),s._v(" "),a("strong",[s._v("å‘½ä»¤å¯¼å‡º")])])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" ./bin/hive -e "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'select * from default.student;'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n/opt/module/hive/data/export/student4.txt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[a("p",[a("strong",[s._v("Export")]),s._v(" "),a("strong",[s._v("å¯¼å‡ºåˆ°")]),s._v(" "),a("strong",[s._v("HDFS")]),s._v(" "),a("strong",[s._v("ä¸Š")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" table default.student \nto "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/user/hive/warehouse/export/student'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("Sqoop")]),s._v(" "),a("strong",[s._v("å¯¼å‡º")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("æ¸…é™¤è¡¨ä¸­æ•°æ®Truncate")])])])]),s._v(" "),a("p",[a("strong",[s._v("äº‹åŠ¡è¡¨")]),s._v("ï¼š")]),s._v(" "),a("blockquote",[a("p",[s._v("INSERTè¯­å¥ä¼šç›´æ¥åˆ›å»ºdeltaç›®å½•ï¼›\nDELETEç›®å½•çš„å‰ç¼€æ˜¯delete_deltaï¼›\nUPDATEè¯­å¥é‡‡ç”¨äº†split-updateç‰¹æ€§ï¼Œå³å…ˆåˆ é™¤ã€åæ’å…¥ï¼›")]),s._v(" "),a("p",[s._v("å¯åœ¨INSERTã€DELETEæœ€åé¢æ·»åŠ äº‹åŠ¡id")]),s._v(" "),a("p",[s._v("å‚æ•°è®¾ç½®ï¼š")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# clientç«¯")]),s._v("\nå¯ä»¥ä½¿ç”¨"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v("è®¾ç½®å½“å‰"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("session")]),s._v("ç”Ÿæ•ˆ ä¹Ÿå¯ä»¥é…ç½®åœ¨hive"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("site"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("xmlä¸­ï¼‰\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("support"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("concurrency "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--Hiveæ˜¯å¦æ”¯æŒå¹¶å‘")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("enforce"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("bucketing "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--ä»Hive2.0å¼€å§‹ä¸å†éœ€è¦  æ˜¯å¦å¼€å¯åˆ†æ¡¶åŠŸèƒ½")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("exec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dynamic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("partition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("mode")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" nonstrict"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--åŠ¨æ€åˆ†åŒºæ¨¡å¼  éä¸¥æ ¼")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("manager "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("apache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hadoop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lockmgr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("DbTxnManager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æœåŠ¡ç«¯")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("compactor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("initiator"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--æ˜¯å¦åœ¨Metastoreå®ä¾‹ä¸Šè¿è¡Œå¯åŠ¨å‹ç¼©åˆå¹¶")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("compactor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("worker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("threads "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--åœ¨æ­¤metastoreå®ä¾‹ä¸Šè¿è¡Œå¤šå°‘ä¸ªåˆå¹¶ç¨‹åºå·¥ä½œçº¿ç¨‹ã€‚")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])])]),s._v(" "),a("p",[a("strong",[s._v("æ›´æ–°ã€åˆ é™¤æ•°æ®")]),s._v(":update.. setã€delete from")]),s._v(" "),a("h2",{attrs:{id:"â›³dql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#â›³dql"}},[s._v("#")]),s._v(" â›³DQL")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://cwiki.apache.org/confluence/display/Hive/LanguageManual+Select",target:"_blank",rel:"noopener noreferrer"}},[s._v("æ–‡æ¡£"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("strong",[s._v("æŸ¥è¯¢æ•°æ®")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è¯­æ³•ç»“æ„")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WITH")]),s._v(" CommonTableExpression "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" CommonTableExpression"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALL")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DISTINCT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" select_expr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" select_expr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" table_reference\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" where_condition"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GROUP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" col_list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" col_list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("CLUSTER "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" col_list\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("DISTRIBUTE "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" col_list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("SORT "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" col_list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LIMIT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("offset")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[a("strong",[s._v("è§£é‡Š")]),s._v("ï¼š")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALL")]),s._v(" ã€"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DISTINCT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("å»é‡"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":ç”¨äºæŒ‡å®šæŸ¥è¯¢è¿”å›ç»“æœä¸­é‡å¤çš„è¡Œå¦‚ä½•å¤„ç†\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" è¿‡æ»¤ "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ASC")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DESC")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" å…¨å±€æ’åº "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GROUP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" åˆ†ç»„ "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("HAVING")]),s._v(" åˆ†ç»„è¿‡æ»¤\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LIMIT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("èµ·å§‹ä½ç½®"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("è¿”å›å‡ ä¸ª"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" åˆ†é¡µ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("é»˜è®¤é‡"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("å¼€å§‹"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# HAVINGä¸WHEREåŒºåˆ«")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("having")]),s._v("æ˜¯åœ¨åˆ†ç»„åå¯¹æ•°æ®è¿›è¡Œè¿‡æ»¤\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v("æ˜¯åœ¨åˆ†ç»„å‰å¯¹æ•°æ®è¿›è¡Œè¿‡æ»¤\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("having")]),s._v("åé¢å¯ä»¥ä½¿ç”¨èšåˆå‡½æ•°\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v("åé¢ä¸å¯ä»¥ä½¿ç”¨èšåˆå‡½æ•°\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ‰§è¡Œé¡ºåº")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("group")]),s._v("ï¼ˆå«èšåˆï¼‰"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("having")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v("ï¼›\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ–°æ·»åŠ ")]),s._v("\nWUTH "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" ä¸´æ—¶ç»“æœé›† "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v("ã€"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v("ã€ "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" è§†å›¾ä¸­ä½¿ç”¨ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nCLUSTER "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" æ ¹æ®æŒ‡å®šå­—æ®µå°†æ•°æ®åˆ†ç»„ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("åªèƒ½æ­£åº"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("hash")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" ä¾‹:ç”·å¥³åˆ†å¼€\nDISTRIBUTE "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("SORT "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" æ ¹æ®æŒ‡å®šå­—æ®µå°†æ•°æ®åˆ†ç»„ å¯æŒ‡å®šæ’åºè§„åˆ™\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Union")]),s._v(" è”åˆç»“æœé›†"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("distinct")]),s._v("å»é‡"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nå­æŸ¥è¯¢:ï¼ˆ"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" å­å†…åˆ¤æ–­ï¼‰ ï¼ˆ"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXISTS")]),s._v(" å­çˆ¶åˆ¤æ–­ï¼‰\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[a("strong",[s._v("è¿æ¥æ“ä½œ")]),s._v(":")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å†…è¿æ¥ innner join  éƒ½å¯ä»¥çœç•¥ä¸å†™ ï¼ˆå–äº¤é›†ï¼‰")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å·¦ã€å³å¤–è¿æ¥ left join  ï¼ˆå–å·¦è¾¹åŠ äº¤é›†ã€ç±»ä¸»æŸ¥æå¸¦é™„ï¼Œæ²¡æœ‰è¿”å›ç©ºï¼‰")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å…¨å¤–è¿æ¥  full join :åŒ¹é…çš„è¡Œå…¨éƒ¨æ”¾å› æ²¡æœ‰åŠ¨ä¸ºç©º")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# left semi join å·¦åŠå¼€è¿æ¥ ï¼ˆä»…è¿”å›å·¦è¾¹è®°å½•ï¼‰")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cross join äº¤å‰è¿æ¥ï¼ˆç¬›å¡å°”ç§¯ï¼‰")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("æ³¨æ„")]),s._v(" "),a("p",[s._v("å…è®¸ä½¿ç”¨å¤æ‚çš„è”æ¥è¡¨è¾¾å¼,æ”¯æŒéç­‰å€¼è¿æ¥ã€åŒä¸€æŸ¥è¯¢ä¸­å¯ä»¥è¿æ¥2ä¸ªä»¥ä¸Šçš„è¡¨")]),s._v(" "),a("p",[s._v("å¦‚æœæ¯ä¸ªè¡¨åœ¨è”æ¥å­å¥ä¸­ä½¿ç”¨ç›¸åŒçš„åˆ—ï¼Œåˆ™Hiveå°†å¤šä¸ªè¡¨ä¸Šçš„è”æ¥è½¬æ¢ä¸ºå•ä¸ªMRä½œä¸š")]),s._v(" "),a("p",[s._v("joinæ—¶çš„æœ€åä¸€ä¸ªè¡¨ä¼šé€šè¿‡reduceræµå¼ä¼ è¾“ï¼Œå¹¶åœ¨å…¶ä¸­ç¼“å†²ä¹‹å‰çš„å…¶ä»–è¡¨ï¼Œå› æ­¤ï¼Œå°†å¤§è¡¨æ”¾ç½®åœ¨æœ€åæœ‰åŠ©äºå‡å°‘reduceré˜¶æ®µç¼“å­˜æ•°æ®æ‰€éœ€è¦çš„å†…å­˜")]),s._v(" "),a("p",[s._v("åœ¨joinçš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡è¯­æ³•STREAMTABLEæç¤ºæŒ‡å®šè¦æµå¼ä¼ è¾“çš„è¡¨ã€‚å¦‚æœçœç•¥STREAMTABLEæç¤ºï¼Œåˆ™Hiveå°†æµå¼ä¼ è¾“æœ€å³è¾¹çš„è¡¨ "),a("code",[s._v("SELECT STREAMTABLE(a) a.val, b.val, c.val FROM a JOIN b ON (a.key = b.key1) JOIN c ON (c.key = b.key1)")])]),s._v(" "),a("p",[s._v("joinåœ¨WHEREæ¡ä»¶ä¹‹å‰è¿›è¡Œã€‚")]),s._v(" "),a("p",[s._v("å¦‚æœé™¤ä¸€ä¸ªè¦è¿æ¥çš„è¡¨ä¹‹å¤–çš„æ‰€æœ‰è¡¨éƒ½å¾ˆå°ï¼Œåˆ™å¯ä»¥å°†å…¶ä½œä¸ºä»…mapä½œä¸šæ‰§è¡Œï¼ˆmapjoinï¼‰ã€‚")]),s._v(" "),a("p",[a("code",[s._v("SELECT /*+ MAPJOIN(b) */ a.key, a.value FROM a JOIN b ON a.key = b.key")])])]),s._v(" "),a("p",[a("strong",[s._v("æŸ¥è¯¢åŸç†")])]),s._v(" "),a("ol",[a("li",[s._v("å…ˆæ ¹æ®è¡¨ååœ¨å…ƒæ•°æ®ä¸­è¿›è¡ŒæŸ¥è¯¢è¡¨å¯¹åº”çš„HDFSç›®å½•")]),s._v(" "),a("li",[s._v("ç„¶åå°†æ•´ä¸ªHDFSä¸­è¡¨çš„ç›®å½•ä½œä¸ºåº•å±‚æŸ¥è¯¢çš„è¾“å…¥ï¼Œå¯ä»¥é€šè¿‡explainå‘½ä»¤æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’ä¾èµ–çš„æ•°æ®")])]),s._v(" "),a("h2",{attrs:{id:"å‚æ•°é…ç½®"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å‚æ•°é…ç½®"}},[s._v("#")]),s._v(" å‚æ•°é…ç½®")]),s._v(" "),a("p",[a("strong",[s._v("Hiveå¸¸ç”¨äº¤äº’å‘½ä»¤")])]),s._v(" "),a("ul",[a("li",[s._v("â€œ-eâ€ä¸è¿›å…¥hiveçš„äº¤äº’çª—å£æ‰§è¡Œsqlè¯­å¥")]),s._v(" "),a("li",[s._v("â€œ-fâ€æ‰§è¡Œè„šæœ¬ä¸­sqlè¯­å¥")]),s._v(" "),a("li",[s._v("é€€å‡ºçª—å£ exit; quit;")]),s._v(" "),a("li",[s._v("dfs -ls / æŸ¥çœ‹hdfsæ–‡ä»¶ç³»ç»Ÿ")]),s._v(" "),a("li",[s._v("cat "),a("code",[s._v(".hivehistory")]),s._v(" æŸ¥çœ‹å†å²æ–‡ä»¶")]),s._v(" "),a("li",[s._v("-help æŸ¥çœ‹å‘½å")]),s._v(" "),a("li",[s._v("--hiveconf <property=value>  è®¾ç½®å‚æ•°")]),s._v(" "),a("li",[s._v("--service service_name   å¯åŠ¨hiveçš„ç›¸å…³æœåŠ¡ ä¾‹ï¼šmetastoreæœåŠ¡å’Œhiveserver2")])]),s._v(" "),a("p",[a("strong",[s._v("å®¢æˆ·ç«¯äºå±æ€§é…ç½®")]),s._v("ï¼š")]),s._v(" "),a("ul",[a("li",[s._v("å…¨å±€ä¿®æ”¹é…ç½®ï¼š"),a("code",[s._v("/conf/hive-site.xml")])]),s._v(" "),a("li",[s._v("hiveconfé…ç½®ï¼šä¾‹ï¼š"),a("code",[s._v("bin/hive --hiveconf hive.root.logger=DEBUG,console")])]),s._v(" "),a("li",[s._v("setå‘½ä»¤: (ä¼šè¯çº§åˆ«) ä¾‹ï¼š"),a("code",[s._v("set hive.exec.dynamic.partition=true;")])]),s._v(" "),a("li",[s._v("æœåŠ¡ç‰¹å®šé…ç½®æ–‡ä»¶:"),a("code",[s._v("hivemetastore-site.xmlã€hiveserver2-site.xml")])])]),s._v(" "),a("p",[s._v("ä¼˜å…ˆçº§:setè®¾ç½® > hiveconfå‚æ•° > hive-site.xmlé…ç½®æ–‡ä»¶")]),s._v(" "),a("h2",{attrs:{id:"è¿ç®—ç¬¦"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è¿ç®—ç¬¦"}},[s._v("#")]),s._v(" è¿ç®—ç¬¦")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--æ˜¾ç¤ºæ‰€æœ‰çš„å‡½æ•°å’Œè¿ç®—ç¬¦")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" functions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--æŸ¥çœ‹è¿ç®—ç¬¦æˆ–è€…å‡½æ•°çš„ä½¿ç”¨è¯´æ˜")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("describe")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--ä½¿ç”¨extended å¯ä»¥æŸ¥çœ‹æ›´åŠ è¯¦ç»†çš„ä½¿ç”¨è¯´æ˜")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("describe")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extended")]),s._v(" count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[a("strong",[s._v("å†…ç½®è¿ç®—ç¬¦")]),s._v("ï¼šå…³ç³»è¿ç®—ã€ç®—æœ¯è¿ç®—ã€é€»è¾‘è¿ç®—")]),s._v(" "),a("p",[s._v("å¯ä»¥åˆ›å»ºç©ºè¡¨æµ‹è¯•,ä¾‹ï¼š"),a("code",[s._v("select sal +1 from emp")])]),s._v(" "),a("p",[s._v("å…³ç³»ï¼š")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("â€¢ç­‰å€¼æ¯”è¾ƒ: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" ã€"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\nâ€¢ä¸ç­‰å€¼æ¯”è¾ƒ: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<>")]),s._v(" ã€"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v("\nâ€¢å°äºæ¯”è¾ƒ: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("\nâ€¢å°äºç­‰äºæ¯”è¾ƒ: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v("\nâ€¢å¤§äºæ¯”è¾ƒ: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nâ€¢å¤§äºç­‰äºæ¯”è¾ƒ: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),s._v("\nâ€¢ç©ºå€¼åˆ¤æ–­: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("IS")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å¸¸ç”¨")]),s._v("\nâ€¢éç©ºåˆ¤æ–­: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("IS")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å¸¸ç”¨")]),s._v("\nâ€¢"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("LIKE")]),s._v("æ¯”è¾ƒ: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("LIKE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("å¤šä¸ª _ä¸€ä¸ª   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å¸¸ç”¨")]),s._v("\nâ€¢JAVAçš„"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("LIKE")]),s._v("æ“ä½œ: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("RLIKE")]),s._v("  æ”¯æŒæ­£åˆ™  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å¸¸ç”¨")]),s._v("\nâ€¢"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("REGEXP")]),s._v("æ“ä½œ: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("REGEXP")]),s._v(" æ”¯æŒæ­£åˆ™\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("ç®—æœ¯è¿ç®—ï¼š")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("â€¢åŠ æ³•æ“ä½œ: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\nâ€¢å‡æ³•æ“ä½œ: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("\nâ€¢ä¹˜æ³•æ“ä½œ: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\nâ€¢é™¤æ³•æ“ä½œ: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\nâ€¢å–æ•´æ“ä½œ: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("div")]),s._v(" \t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å¸¸ç”¨")]),s._v("\nâ€¢å–ä½™æ“ä½œ: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("   \t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å¸¸ç”¨ ")]),s._v("\nâ€¢ä½ä¸æ“ä½œ: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("   \t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å¸¸ç”¨")]),s._v("\nâ€¢ä½æˆ–æ“ä½œ: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   \t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å¸¸ç”¨")]),s._v("\nâ€¢ä½å¼‚æˆ–æ“ä½œ: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),s._v(" \t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å¸¸ç”¨")]),s._v("\nâ€¢ä½å–åæ“ä½œ: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("é€»è¾‘ï¼š")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("â€¢ä¸æ“ä½œ: A "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" B\nâ€¢æˆ–æ“ä½œ: A "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("OR")]),s._v(" B\nâ€¢éæ“ä½œ: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" A ã€"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("A\nâ€¢åœ¨:A "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("IN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("val1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" val2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nâ€¢ä¸åœ¨:A "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("IN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("val1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" val2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nâ€¢é€»è¾‘æ˜¯å¦å­˜åœ¨: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXISTS")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("subquery"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h2",{attrs:{id:"å‡½æ•°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å‡½æ•°"}},[s._v("#")]),s._v(" "),a("strong",[s._v("å‡½æ•°")])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("æç¤º")]),s._v(" "),a("p",[s._v("show functionsæŸ¥çœ‹å½“ä¸‹å¯ç”¨çš„æ‰€æœ‰å‡½æ•°")]),s._v(" "),a("p",[s._v("desc function upper æ˜¾ç¤ºè‡ªå¸¦çš„å‡½æ•°çš„ç”¨æ³•")]),s._v(" "),a("p",[s._v("describe function extended funcname æ¥è¯¦ç»†æŸ¥çœ‹å‡½æ•°çš„ä½¿ç”¨æ–¹å¼ã€‚")])]),s._v(" "),a("p",[a("strong",[s._v("å†…ç½®å‡½æ•°")]),s._v("ï¼šæ•°å€¼ç±»å‹å‡½æ•°ã€æ—¥æœŸç±»å‹å‡½æ•°ã€å­—ç¬¦ä¸²ç±»å‹å‡½æ•°ã€é›†åˆå‡½æ•°ã€æ¡ä»¶å‡½æ•°ç­‰")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("å­—ç¬¦ä¸²")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("â€¢æ­£åˆ™è¡¨è¾¾å¼æ›¿æ¢å‡½æ•°ï¼šregexp_replace "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- å¸¸ç”¨")]),s._v("\nâ€¢å­—ç¬¦ä¸²è¿æ¥å‡½æ•°ï¼šconcat "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å¸¸ç”¨")]),s._v("\nâ€¢URLè§£æå‡½æ•°ï¼šparse_url "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å¸¸ç”¨")]),s._v("\nâ€¢jsonè§£æå‡½æ•°ï¼šget_json_object "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å¸¸ç”¨")]),s._v("\nâ€¢å¸¦åˆ†éš”ç¬¦å­—ç¬¦ä¸²è¿æ¥å‡½æ•°ï¼šconcat_ws "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å¸¸ç”¨")]),s._v("\nâ€¢å­—ç¬¦ä¸²æˆªå–å‡½æ•°ï¼šsubstr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("substring "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å¸¸ç”¨")]),s._v("\nâ€¢åˆ†å‰²å­—ç¬¦ä¸²å‡½æ•°: split "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å¸¸ç”¨")]),s._v("\nâ€¢å­—ç¬¦ä¸²é•¿åº¦å‡½æ•°ï¼šlength\nâ€¢å­—ç¬¦ä¸²åè½¬å‡½æ•°ï¼šreverse\nâ€¢å­—ç¬¦ä¸²è½¬å¤§å†™å‡½æ•°ï¼šupper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("ucase\nâ€¢å­—ç¬¦ä¸²è½¬å°å†™å‡½æ•°ï¼šlower"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("lcase\nâ€¢å»ç©ºæ ¼å‡½æ•°ï¼štrim\nâ€¢å·¦è¾¹å»ç©ºæ ¼å‡½æ•°ï¼šltrim\nâ€¢å³è¾¹å»ç©ºæ ¼å‡½æ•°ï¼šrtrim\nâ€¢æ­£åˆ™è¡¨è¾¾å¼è§£æå‡½æ•°ï¼šregexp_extract\nâ€¢ç©ºæ ¼å­—ç¬¦ä¸²å‡½æ•°ï¼šspace\nâ€¢é‡å¤å­—ç¬¦ä¸²å‡½æ•°ï¼š"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("repeat")]),s._v("\nâ€¢é¦–å­—ç¬¦asciiå‡½æ•°ï¼šascii\nâ€¢å·¦è¡¥è¶³å‡½æ•°ï¼šlpad\nâ€¢å³è¡¥è¶³å‡½æ•°ï¼šrpad\nâ€¢é›†åˆæŸ¥æ‰¾å‡½æ•°: find_in_set\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("æ—¥æœŸ")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("â€¢æ—¥æœŸæ¯”è¾ƒå‡½æ•°: datediff "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å¸¸ç”¨")]),s._v("\nâ€¢æ—¥æœŸå¢åŠ å‡½æ•°: date_add "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å¸¸ç”¨")]),s._v("\nâ€¢è·å–å½“å‰æ—¥æœŸ: "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("current_date")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å¸¸ç”¨")]),s._v("\nâ€¢è·å–å½“å‰æ—¶é—´æˆ³: "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("current_timestamp")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å¸¸ç”¨")]),s._v("\nâ€¢UNIXæ—¶é—´æˆ³è½¬æ—¥æœŸå‡½æ•°: from_unixtime "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å¸¸ç”¨")]),s._v("\nâ€¢è·å–å½“å‰UNIXæ—¶é—´æˆ³å‡½æ•°: unix_timestamp "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å¸¸ç”¨")]),s._v("\nâ€¢æ—¥æœŸè½¬UNIXæ—¶é—´æˆ³å‡½æ•°: unix_timestamp "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å¸¸ç”¨")]),s._v("\nâ€¢æŒ‡å®šæ ¼å¼æ—¥æœŸè½¬UNIXæ—¶é—´æˆ³å‡½æ•°: unix_timestamp "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å¸¸ç”¨")]),s._v("\nâ€¢æŠ½å–æ—¥æœŸå‡½æ•°: to_date\nâ€¢æ—¥æœŸè½¬å¹´å‡½æ•°: "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("year")]),s._v("\nâ€¢æ—¥æœŸè½¬æœˆå‡½æ•°: "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("month")]),s._v("\nâ€¢æ—¥æœŸè½¬å¤©å‡½æ•°: "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("day")]),s._v("\nâ€¢æ—¥æœŸè½¬å°æ—¶å‡½æ•°: "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("hour")]),s._v("\nâ€¢æ—¥æœŸè½¬åˆ†é’Ÿå‡½æ•°: "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("minute")]),s._v("\nâ€¢æ—¥æœŸè½¬ç§’å‡½æ•°: "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("second")]),s._v("\nâ€¢æ—¥æœŸè½¬å‘¨å‡½æ•°: weekofyear\nâ€¢æ—¥æœŸå‡å°‘å‡½æ•°: date_sub\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("æ•°å­¦å‡½æ•°")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("â€¢å–æ•´å‡½æ•°: round "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å¸¸ç”¨")]),s._v("\nâ€¢æŒ‡å®šç²¾åº¦å–æ•´å‡½æ•°: round "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å¸¸ç”¨")]),s._v("\nâ€¢å‘ä¸‹å–æ•´å‡½æ•°: floor"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å¸¸ç”¨")]),s._v("\nâ€¢å‘ä¸Šå–æ•´å‡½æ•°: ceil"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å¸¸ç”¨")]),s._v("\nâ€¢å–éšæœºæ•°å‡½æ•°: rand"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å¸¸ç”¨")]),s._v("\nâ€¢äºŒè¿›åˆ¶å‡½æ•°: bin\nâ€¢è¿›åˆ¶è½¬æ¢å‡½æ•°: conv\nâ€¢ç»å¯¹å€¼å‡½æ•°: abs\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("é›†åˆå‡½æ•°")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("â€¢é›†åˆå…ƒç´ sizeå‡½æ•°: size"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Map"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("K"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("V"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" size"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Array"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("T"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nâ€¢å–mapé›†åˆ"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("keys")]),s._v("å‡½æ•°: map_keys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Map"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("K"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("V"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nâ€¢å–mapé›†åˆ"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),s._v("å‡½æ•°: map_values"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Map"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("K"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("V"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nâ€¢åˆ¤æ–­æ•°ç»„æ˜¯å¦åŒ…å«æŒ‡å®šå…ƒç´ : array_contains"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Array"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("T"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nâ€¢æ•°ç»„æ’åºå‡½æ•°:sort_array"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Array"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("T"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("æ¡ä»¶å‡½æ•°")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("â€¢æ¡ä»¶è½¬æ¢å‡½æ•°: "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CASE")]),s._v(" a "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" b "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v(" c "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" d "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ELSE")]),s._v(" f"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å¸¸ç”¨")]),s._v("\nâ€¢"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v("æ¡ä»¶åˆ¤æ–­: "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" testCondition"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" T valueTrue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" T valueFalseOrNull"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nâ€¢ç©ºåˆ¤æ–­å‡½æ•°: isnull"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" a "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nâ€¢éç©ºåˆ¤æ–­å‡½æ•°: isnotnull "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" a "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nâ€¢ç©ºå€¼è½¬æ¢å‡½æ•°: nvl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("T "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" T default_value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nâ€¢éç©ºæŸ¥æ‰¾å‡½æ•°: "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COALESCE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("T v1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" T v2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nâ€¢"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("nullif")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" b "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": å¦‚æœa "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" bï¼Œåˆ™è¿”å›"),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("ï¼›å¦åˆ™è¿”å›"),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("ã€‚å¦åˆ™è¿”å›ä¸€ä¸ª\nâ€¢assert_true: å¦‚æœ"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'condition'")]),s._v("ä¸ä¸ºçœŸï¼Œåˆ™å¼•å‘å¼‚å¸¸ï¼Œå¦åˆ™è¿”å›"),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("ç±»å‹è½¬æ¢å‡½æ•° "),a("code",[s._v("cast()")]),s._v("æ˜¾å¼çš„æ•°æ®ç±»å‹è½¬æ¢")])]),s._v(" "),a("li",[a("p",[s._v("æ•°æ®è„±æ•å‡½æ•°:")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("â€¢mask_hash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("string"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("char")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),s._v(" str"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å¸¸ç”¨")]),s._v("\nâ€¢mask_first_n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("string str"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nâ€¢mask_last_n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("string str"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nâ€¢mask_show_first_n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("string str"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nâ€¢mask_show_last_n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("string str"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nâ€¢mask\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("å…¶ä»–æ‚é¡¹å‡½æ•°")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("â€¢MD5åŠ å¯†: md5"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("string"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("binary")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å¸¸ç”¨")]),s._v("\nâ€¢åå°„å‡½æ•°: reflect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("class"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" method"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" arg1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" arg2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å¸¸ç”¨")]),s._v("\nâ€¢å–å“ˆå¸Œå€¼å‡½æ•°:"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("hash")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å¸¸ç”¨")]),s._v("\nâ€¢SHA"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("åŠ å¯†: sha1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("string"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("binary")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å¸¸ç”¨")]),s._v("\nâ€¢crc32åŠ å¯†:\nâ€¢SHA"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("å®¶æ—ç®—æ³•åŠ å¯†ï¼šsha2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("string"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("binary")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("SHA"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("224")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" SHA"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("256")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" SHA"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("384")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" SHA"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nâ€¢hiveè°ƒç”¨javaæ–¹æ³•: java_method"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("class"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" method"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" arg1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" arg2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nâ€¢"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("current_user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("ã€logged_in_user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("ã€current_database"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("ã€version"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("å¸¸ç”¨")]),s._v("ï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# ä»£æ›¿nvlå‡½æ•°\nselect comm,nvl(comm, -1) from emp; \n# ä»£æ›¿\nselect\n dept_id,\n sum(case sex when 'ç”·' then 1 else 0 end) male_count,\n sum(case sex when 'å¥³' then 1 else 0 end) female_count\nfrom emp_sex\ngroup by dept_id;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])])])]),s._v(" "),a("p",[a("strong",[s._v("è‡ªå®šä¹‰å‡½æ•°")]),s._v("ï¼šUDF(ä¸€è¿›ä¸€å‡ºï¼‰ã€UDAF(å¤šè¿›ä¸€å‡º)ã€UDTF(ä¸€è¿›å¤šå‡º)")]),s._v(" "),a("p",[s._v("æ­¥éª¤ï¼š")]),s._v(" "),a("ol",[a("li",[s._v("å†™ä¸€ä¸ªjavaç±»ï¼Œç»§æ‰¿UDFï¼Œå¹¶é‡è½½evaluateæ–¹æ³•ï¼Œæ–¹æ³•ä¸­å®ç°å‡½æ•°çš„ä¸šåŠ¡é€»è¾‘ï¼›")]),s._v(" "),a("li",[s._v("é‡è½½æ„å‘³ç€å¯ä»¥åœ¨ä¸€ä¸ªjavaç±»ä¸­å®ç°å¤šä¸ªå‡½æ•°åŠŸèƒ½ï¼›")]),s._v(" "),a("li",[s._v("ç¨‹åºæ‰“æˆjaråŒ…ï¼Œä¸Šä¼ HS2æœåŠ¡å™¨æœ¬åœ°æˆ–è€…HDFS;")]),s._v(" "),a("li",[s._v("å®¢æˆ·ç«¯å‘½ä»¤è¡Œä¸­æ·»åŠ jaråŒ…åˆ°Hiveçš„classpathï¼š hive>add JAR /xxxx/udf.jar;")]),s._v(" "),a("li",[s._v("æ³¨å†Œæˆä¸ºä¸´æ—¶å‡½æ•°ï¼ˆç»™UDFå‘½åï¼‰ï¼šcreate temporary function å‡½æ•°å as 'UDFç±»å…¨è·¯å¾„';\nHQLä¸­ä½¿ç”¨å‡½æ•°ã€‚")])]),s._v(" "),a("p",[a("strong",[s._v("å‡½æ•°é«˜é˜¶")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("explode ç‚¸å¼€ ï¼ˆæ¥æ”¶mapã€arrayç±»å‹,ç„¶åç‚¸å¼€æ¯ä¸ªå…ƒç´ æ‹†å¼€å˜æˆä¸€è¡Œæ•°æ®ï¼‰è™šæ‹Ÿè¡¨")])]),s._v(" "),a("li",[a("p",[s._v("lateral View ä¿¯è§†å›¾ ä¸“é—¨ç”¨äºæ­é…explodeè¿™æ ·çš„UDTFå‡½æ•°  (ç”¨ä½œè¿æ¥)")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ä¾‹ï¼š")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("team_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("year")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- lateral view è®¾ç½®åæ‰å¯ä»¥ä½¿ç”¨explode ç‚¸å¼€çš„æ•°æ®")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" the_nba_championship a lateral "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("view")]),s._v(" explode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("champion_year"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" b "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("year")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("year")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("desc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("Aggrregationèšåˆå‡½æ•° ï¼‰udaf")]),s._v(" "),a("p",[s._v("åŸºç¡€èšåˆ")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# æ­é…Group Byè¯­æ³•ä¸€èµ·ä½¿ç”¨ï¼Œåˆ†ç»„åè¿›è¡Œèšåˆæ“ä½œ\ncountç»Ÿè®¡ã€maxã€minã€sumæ±‚å’Œã€avgå¹³å‡å€¼`\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("å¢å¼ºèšåˆï¼šgrouping_sets(å¤šç»„ï¼‰ã€cubeï¼ˆæ‰€æœ‰ï¼‰ã€rollupï¼ˆå·¦ä¾§ä¸ºä¸»ï¼‰")]),s._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[s._v("ç‚¹å‡»æŸ¥çœ‹")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("ä¾‹ï¼šgrouping_setsï¼ˆå¤šä¸ªåˆ†ç»„é€»è¾‘å†™åˆ°ä¸€èµ·ï¼‰\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("month")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("day")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("COUNT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DISTINCT")]),s._v(" cookieid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" nums"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\nGROUPING__ID\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" cookie_info\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GROUP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("month")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("day")]),s._v("\nGROUPING SETS "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("month")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("day")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" GROUPING__ID"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--grouping_idè¡¨ç¤ºè¿™ä¸€ç»„ç»“æœå±äºå“ªä¸ªåˆ†ç»„é›†åˆï¼Œ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--æ ¹æ®grouping setsä¸­çš„åˆ†ç»„æ¡ä»¶monthï¼Œdayï¼Œ1æ˜¯ä»£è¡¨monthï¼Œ2æ˜¯ä»£è¡¨day")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--ç­‰ä»·äº")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("month")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("COUNT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DISTINCT")]),s._v(" cookieid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" nums"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" GROUPING__ID "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" cookie_info "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GROUP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("month")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UNION")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALL")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("month")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("day")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("COUNT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DISTINCT")]),s._v(" cookieid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" nums"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" GROUPING__ID "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" cookie_info "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GROUP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("day")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cube ç»„åˆè¿›è¡Œèšåˆ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("------cube---------------")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("month")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("day")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("COUNT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DISTINCT")]),s._v(" cookieid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" nums"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\nGROUPING__ID\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" cookie_info\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GROUP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("month")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("day")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WITH")]),s._v(" CUBE\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" GROUPING__ID"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--ç­‰ä»·äº")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("COUNT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DISTINCT")]),s._v(" cookieid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" nums"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" GROUPING__ID "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" cookie_info\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UNION")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALL")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("month")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("COUNT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DISTINCT")]),s._v(" cookieid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" nums"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" GROUPING__ID "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" cookie_info "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GROUP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("month")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UNION")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALL")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("day")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("COUNT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DISTINCT")]),s._v(" cookieid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" nums"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" GROUPING__ID "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" cookie_info "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GROUP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("day")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UNION")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALL")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("month")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("day")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("COUNT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DISTINCT")]),s._v(" cookieid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" nums"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" GROUPING__ID "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" cookie_info "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GROUP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("month")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("day")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--rollup---------------æ¯”å¦‚ï¼Œä»¥monthç»´åº¦è¿›è¡Œå±‚çº§èšåˆï¼š")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("month")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("day")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("COUNT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DISTINCT")]),s._v(" cookieid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" nums"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\nGROUPING__ID\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" cookie_info\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GROUP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("month")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("day")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WITH ROLLUP")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" GROUPING__ID"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br")])])])]),s._v(" "),a("li",[a("p",[s._v("çª—å£å‡½æ•°ï¼šOLAPå‡½æ•°ï¼ˆè¾“å‡ºå¤šè¡Œèšåˆï¼‰")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("æ™®é€šèšåˆåè¾“å‡ºä¸€è¡Œæˆ–ç»“æœ")])]),s._v(" "),a("li",[a("p",[s._v("olap è¾“å‡ºç»“æœä¹Ÿè¾“å‡ºè‡ªèº«è¡Œ")])]),s._v(" "),a("li",[a("p",[s._v("è¯­æ³•ï¼š é€‚åˆTopnä¸šåŠ¡")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Function(arg1,..., argn) OVER ([PARTITION BY <...>] [ORDER BY <....>] [<window_expression>])\n--å…¶ä¸­Function(arg1,..., argn) å¯ä»¥æ˜¯ä¸‹é¢åˆ†ç±»ä¸­çš„ä»»æ„ä¸€ä¸ª\n--èšåˆå‡½æ•°ï¼šæ¯”å¦‚sum max avgç­‰\n--æ’åºå‡½æ•°ï¼šæ¯”å¦‚rank row_numberç­‰\n--åˆ†æå‡½æ•°ï¼šæ¯”å¦‚lead lag first_valueç­‰\n--OVER [PARTITION BY <...>] ç±»ä¼¼äºgroup by ç”¨äºæŒ‡å®šåˆ†ç»„  æ¯ä¸ªåˆ†ç»„ä½ å¯ä»¥æŠŠå®ƒå«åšçª—å£\n--å¦‚æœæ²¡æœ‰PARTITION BY é‚£ä¹ˆæ•´å¼ è¡¨çš„æ‰€æœ‰è¡Œå°±æ˜¯ä¸€ç»„\n--[ORDER BY <....>]  ç”¨äºæŒ‡å®šæ¯ä¸ªåˆ†ç»„å†…çš„æ•°æ®æ’åºè§„åˆ™ æ”¯æŒASCã€DESC\n--[<window_expression>] ç”¨äºæŒ‡å®šæ¯ä¸ªçª—å£ä¸­ æ“ä½œçš„æ•°æ®èŒƒå›´ é»˜è®¤æ˜¯çª—å£ä¸­æ‰€æœ‰è¡Œ\n\n--æ’åº\n#row_number é€’å¢ï¼Œä¸è€ƒè™‘é‡å¤  ä¼šæ ¹æ®é¡ºåºè®¡ç®—\n#rank è€ƒè™‘é‡å¤ï¼ŒæŒ¤å åç»­ä½ç½® æ€»æ•°ä¸ä¼šå˜\n#dense_rank æ’åºç›¸åŒæ—¶ä¼šé‡å¤ï¼Œæ€»æ•°ä¼šå‡å°‘\n\n--åˆ†æ\nLAG(col,n,DEFAULT) ç”¨äºç»Ÿè®¡çª—å£å†…å¾€ä¸Šç¬¬nè¡Œå€¼\nLEAD(col,n,DEFAULT) ç”¨äºç»Ÿè®¡çª—å£å†…å¾€ä¸‹ç¬¬nè¡Œå€¼\nFIRST_VALUE å–åˆ†ç»„å†…æ’åºåï¼Œæˆªæ­¢åˆ°å½“å‰è¡Œï¼Œç¬¬ä¸€ä¸ªå€¼\nLAST_VALUE å–åˆ†ç»„å†…æ’åºåï¼Œæˆªæ­¢åˆ°å½“å‰è¡Œï¼Œæœ€åä¸€ä¸ªå€¼\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])])])])]),s._v(" "),a("li",[a("p",[s._v("æŠ½æ ·å‡½æ•°")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rand() # éšæœºä½†æ•°åº¦ä¸å¿«")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--ä½¿ç”¨order by+randä¹Ÿå¯ä»¥å®ç°åŒæ ·çš„æ•ˆæœ ä½†æ˜¯æ•ˆç‡ä¸é«˜")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" student\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" rand"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LIMIT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Block åŸºäºæ•°æ®å—æŠ½æ ·    #ä¸éšæœºä½†æ•°åº¦å¿«")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("---blockæŠ½æ ·")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--æ ¹æ®è¡Œæ•°æŠ½æ ·")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" student TABLESAMPLE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ROWS")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--æ ¹æ®æ•°æ®å¤§å°ç™¾åˆ†æ¯”æŠ½æ ·")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" student TABLESAMPLE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PERCENT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--æ ¹æ®æ•°æ®å¤§å°æŠ½æ ·")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--æ”¯æŒæ•°æ®å•ä½ b/B, k/K, m/M, g/G")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" student TABLESAMPLE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("k"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Bucket table åŸºäºåˆ†æ¡¶è¡¨æŠ½æ · ä¼˜ç‚¹æ˜¯æ—¢éšæœºé€Ÿåº¦ä¹Ÿå¾ˆå¿«")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è¯­æ³•")]),s._v("\nTABLESAMPLE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("BUCKET x "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("OUT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("OF")]),s._v(" y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nä¾‹ï¼š\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" stu_buck tablesample"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("bucket "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("out")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("of")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ³¨æ„ï¼šx çš„å€¼å¿…é¡»å°äºç­‰äº y çš„å€¼")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br")])])])]),s._v(" "),a("h2",{attrs:{id:"è°ƒä¼˜"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è°ƒä¼˜"}},[s._v("#")]),s._v(" è°ƒä¼˜")]),s._v(" "),a("p",[a("strong",[s._v("è¡¨è®¾è®¡ä¼˜åŒ–")]),s._v("ï¼šåˆ†åŒºè¡¨ã€åˆ†æ¡¶è¡¨   ï¼ˆç´¢å¼•è®¾è®¡ è¿‡æ—¶ï¼‰")]),s._v(" "),a("p",[a("strong",[s._v("è¡¨æ•°æ®ä¼˜åŒ–")]),s._v("ï¼šæ–‡ä»¶æ ¼å¼ã€æ•°æ®å‹ç¼©ã€å­˜å‚¨ä¼˜åŒ–")]),s._v(" "),a("p",[s._v("æ–‡ä»¶æ ¼å¼ï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("TextFileï¼ˆé»˜è®¤ï¼‰ é€‚åˆå°æ–‡ä»¶\nSequenceFile(äºŒè¿›åˆ¶)  é€‚åˆäºå°é‡æ•°æ®ï¼Œä½†æ˜¯æŸ¥è¯¢åˆ—æ¯”è¾ƒå¤šçš„åœºæ™¯\nORC åˆ—å¼å­˜å‚¨æ ¼å¼ é€‚ç”¨äºHiveä¸­å¤§å‹çš„å­˜å‚¨ã€æŸ¥è¯¢ # æ¨è\nParquet æ˜¯é«˜æ•ˆçš„æ•°æ®ç¼–ç å’Œå‹ç¼©  ä¸æ”¯æŒdml é€‚ç”¨äºå­—æ®µæ•°éå¸¸å¤šï¼Œæ— æ›´æ–°ï¼Œåªå–éƒ¨åˆ†åˆ—çš„æŸ¥è¯¢\nåœ¨å»ºè¡¨æ—¶ç”¨stored as å‹ç¼©æ ¼å¼  æŒ‡å®š\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("æ•°æ®å‹ç¼©ï¼šå‡å°ioã€ä¼ è¾“ã€å ç”¨ç©ºé—´ ã€å¢åŠ cpuè´Ÿè·ã€è§£å‹é•¿")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/axcmsm/tmp/raw/master/bigdata/20210912001113.png",alt:""}})]),s._v(" "),a("p",[s._v("å¯¹æ¯”ï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/axcmsm/tmp/raw/master/bigdata/20210912001232.png",alt:""}})]),s._v(" "),a("p",[s._v("é…ç½®ï¼š")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--å¼€å¯hiveä¸­é—´ä¼ è¾“æ•°æ®å‹ç¼©åŠŸèƒ½")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--1ï¼‰å¼€å¯hiveä¸­é—´ä¼ è¾“æ•°æ®å‹ç¼©åŠŸèƒ½")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("exec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("compress"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("intermediate"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--2ï¼‰å¼€å¯mapreduceä¸­mapè¾“å‡ºå‹ç¼©åŠŸèƒ½")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" mapreduce"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("map"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("output"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("compress"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--3ï¼‰è®¾ç½®mapreduceä¸­mapè¾“å‡ºæ•°æ®çš„å‹ç¼©æ–¹å¼")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" mapreduce"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("map"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("output"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("compress"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("codec"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("apache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hadoop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("io"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("compress"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("SnappyCodec"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--å¼€å¯Reduceè¾“å‡ºé˜¶æ®µå‹ç¼©")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--1ï¼‰å¼€å¯hiveæœ€ç»ˆè¾“å‡ºæ•°æ®å‹ç¼©åŠŸèƒ½")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("exec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("compress"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("output"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--2ï¼‰å¼€å¯mapreduceæœ€ç»ˆè¾“å‡ºæ•°æ®å‹ç¼©")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" mapreduce"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("output"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("fileoutputformat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("compress"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--3ï¼‰è®¾ç½®mapreduceæœ€ç»ˆæ•°æ®è¾“å‡ºå‹ç¼©æ–¹å¼")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" mapreduce"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("output"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("fileoutputformat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("compress"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("codec "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("apache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hadoop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("io"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("compress"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("SnappyCodec"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--4ï¼‰è®¾ç½®mapreduceæœ€ç»ˆæ•°æ®è¾“å‡ºå‹ç¼©ä¸ºå—å‹ç¼©")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" mapreduce"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("output"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("fileoutputformat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("compress"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("BLOCK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("p",[s._v("ä¾‹ï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("æŒ‡å®šä¸ºtextfileæ ¼å¼ï¼Œå¹¶ä½¿ç”¨snappyå‹ç¼© #97mb\næŒ‡å®šä¸ºorcæ ¼å¼ï¼Œå¹¶ä½¿ç”¨snappyå‹ç¼© # 44mb\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("ä¼˜åŒ–å­˜å‚¨")]),s._v("ï¼š")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("é¿å…å°æ–‡ä»¶ç”Ÿæˆ")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- å¦‚æœhiveçš„ç¨‹åºï¼Œåªæœ‰maptaskï¼Œå°†MapTaskäº§ç”Ÿçš„æ‰€æœ‰å°æ–‡ä»¶è¿›è¡Œåˆå¹¶")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("merge")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mapfiles"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- å¦‚æœhiveçš„ç¨‹åºï¼Œæœ‰Mapå’ŒReduceTask,å°†ReduceTaskäº§ç”Ÿçš„æ‰€æœ‰å°æ–‡ä»¶è¿›è¡Œåˆå¹¶")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("merge")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mapredfiles"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- æ¯ä¸€ä¸ªåˆå¹¶çš„æ–‡ä»¶çš„å¤§å°ï¼ˆ244Mï¼‰")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("merge")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("size"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("per"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("task"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("256000000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- å¹³å‡æ¯ä¸ªæ–‡ä»¶çš„å¤§å°ï¼Œå¦‚æœå°äºè¿™ä¸ªå€¼å°±ä¼šè¿›è¡Œåˆå¹¶(15M)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("merge")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("smallfiles"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("avgsize"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16000000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("åˆå¹¶å°æ–‡ä»¶ CombineHiveInputFormat ï¼ˆå¹³å‡å€¼ç­‰è¦æ…é‡ï¼‰")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# CombineHiveInputFormat")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- è®¾ç½®Hiveä¸­åº•å±‚MapReduceè¯»å–æ•°æ®çš„è¾“å…¥ç±»ï¼šå°†æ‰€æœ‰æ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªå¤§æ–‡ä»¶ä½œä¸ºè¾“å…¥")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("input"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("format"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("apache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hadoop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("io"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("CombineHiveInputFormat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("å­˜å‚¨ä¼˜åŒ–-ORCæ–‡ä»¶ç´¢å¼•:Row Group Index å’Œ Bloom Filter Index")])]),s._v(" "),a("li",[a("p",[s._v("ORCçŸ¢é‡åŒ–æŸ¥è¯¢:å¿…é¡»ä»¥ORCæ ¼å¼å­˜å‚¨æ•°æ®")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- å¼€å¯çŸ¢é‡åŒ–æŸ¥è¯¢")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vectorized"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("execution"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("enabled "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vectorized"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("execution"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("reduce"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("enabled "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å¿…é¡»ä»¥ORCæ ¼å¼å­˜å‚¨æ•°æ®")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])])]),s._v(" "),a("p",[a("strong",[s._v("jobä½œä¸šä¼˜åŒ–")]),s._v("ï¼š-")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("ExplainæŸ¥è¯¢è®¡åˆ’ "),a("code",[s._v("æŸ¥çœ‹hqlå®ç°æ­¥éª¤æµç¨‹")]),s._v("è¾…åŠ©ç”¨æˆ·å¯¹Hiveè¿›è¡Œä¼˜åŒ–")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#è¯­æ³•")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXPLAIN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("FORMATTED"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXTENDED")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("DEPENDENCY"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AUTHORIZATION")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" query\nFORMATTEDï¼šå¯¹æ‰§è¡Œè®¡åˆ’è¿›è¡Œæ ¼å¼åŒ–ï¼Œè¿”å›JSONæ ¼å¼çš„æ‰§è¡Œè®¡åˆ’\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXTENDED")]),s._v("ï¼šæä¾›ä¸€äº›é¢å¤–çš„ä¿¡æ¯ï¼Œæ¯”å¦‚æ–‡ä»¶çš„è·¯å¾„ä¿¡æ¯\nDEPENDENCYï¼šä»¥JSONæ ¼å¼è¿”å›æŸ¥è¯¢æ‰€ä¾èµ–çš„è¡¨å’Œåˆ†åŒºçš„åˆ—è¡¨ \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AUTHORIZATION")]),s._v("ï¼šåˆ—å‡ºéœ€è¦è¢«æˆæƒçš„æ¡ç›®ï¼ŒåŒ…æ‹¬è¾“å…¥ä¸è¾“å‡º\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#åŒ…å«éƒ¨åˆ†")]),s._v("\næŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ Stageä¾èµ–å…³ç³» Stageå†…å®¹\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://gitee.com/axcmsm/tmp/raw/master/bigdata/20210912002142.png",alt:""}}),a("img",{attrs:{src:"https://gitee.com/axcmsm/tmp/raw/master/bigdata/20210912002225.png",alt:""}}),a("img",{attrs:{src:"https://gitee.com/axcmsm/tmp/raw/master/bigdata/20210912002249.png",alt:""}})])]),s._v(" "),a("li",[a("p",[s._v("mrå±æ€§ä¼˜åŒ–:  æœ¬åœ°æ¨¡å¼ã€ï¼ˆJVMé‡ç”¨ è¿‡æ—¶ï¼‰ å¹¶è¡Œæ‰§è¡Œ")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- å¼€å¯æœ¬åœ°æ¨¡å¼ è‡ªåŠ¨åˆ¤æ–­è·‘æœ¬åœ°å¼€å§‹è·‘é›†ç¾¤")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("exec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("mode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("local")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("auto "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# JVMé‡ç”¨ ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- Hadoop3ä¹‹å‰çš„é…ç½®ï¼Œåœ¨mapred-site.xmlä¸­æ·»åŠ ä»¥ä¸‹å‚æ•°")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- Hadoop3ä¸­å·²ä¸å†æ”¯æŒè¯¥é€‰é¡¹")]),s._v("\nmapreduce"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("job"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jvm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("numtasks"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å¹¶è¡Œåº¦æœºåˆ¶ å¤šä¸ªStageä¹‹é—´æ²¡æœ‰ä¾èµ–å…³ç³»æ—¶ï¼Œå…è®¸å¤šä¸ªStageå¹¶è¡Œæ‰§è¡Œï¼Œæé«˜æ€§èƒ½ã€‚")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- å¼€å¯Stageå¹¶è¡ŒåŒ–ï¼Œé»˜è®¤ä¸ºfalse")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("exec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("parallel"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- æŒ‡å®šå¹¶è¡ŒåŒ–çº¿ç¨‹æ•°ï¼Œé»˜è®¤ä¸º8")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("exec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("parallel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("thread"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("number"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("Joinä¼˜åŒ–")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("å°è¡¨joinå¤§è¡¨ mapjoin")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# ä¸ç»è¿‡suffle ä½¿ç”¨å†…å­˜å­˜æ”¾å°è¡¨è¿æ¥å¤§è¡¨\nhive.auto.convert.join=true ï¼ˆé»˜è®¤è‡ªåŠ¨å¼€å¯ï¼‰\nå¦‚æœæ˜¯2.0\n-- 2.0ç‰ˆæœ¬ä¹‹å‰çš„æ§åˆ¶å±æ€§\nhive.mapjoin.smalltable.filesize=25M\n-- 2.0ç‰ˆæœ¬å¼€å§‹ç”±ä»¥ä¸‹å‚æ•°æ§åˆ¶\nhive.auto.convert.join.noconditionaltask.size=512000000\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("å¤§è¡¨joinå¤§è¡¨ reduce join")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("hive.auto.convert.join=true ï¼ˆé»˜è®¤è‡ªåŠ¨å¼€å¯ï¼‰ é»˜è®¤åˆ¤æ–­æ˜¯æ‰“è¡¨reduce å°è¡¨map\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("å¤§è¡¨joinä¼˜åŒ– Bucker Join")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# é€‚åˆé€‚åˆäºå¤§è¡¨Joinå¤§è¡¨")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("optimize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("bucketmapjoin "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nè¯­æ³•ï¼š"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("clustered")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" colName\nè¦æ±‚ï¼šåˆ†æ¡¶å­—æ®µ "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Join")]),s._v("å­—æ®µ ï¼Œæ¡¶çš„ä¸ªæ•°ç›¸ç­‰æˆ–è€…æˆå€æ•°\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ä½¿ç”¨Sort Merge Bucket Joinï¼ˆSMBï¼‰ åŸºäºæœ‰åºçš„æ•°æ®Join")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("optimize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("bucketmapjoin "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("auto"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("convert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sortmerge"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("join")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("optimize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("bucketmapjoin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sortedmerge "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("auto"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("convert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sortmerge"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("noconditionaltask"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nè¦æ±‚ï¼šåˆ†æ¡¶å­—æ®µ "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Join")]),s._v("å­—æ®µ "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" æ’åºå­—æ®µ ï¼Œæ¡¶çš„ä¸ªæ•°ç›¸ç­‰æˆ–è€…æˆå€æ•°\nè¯­æ³•ï¼š"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("clustered")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" colName sorted "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("colName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])])])])]),s._v(" "),a("li",[a("p",[s._v("ä¼˜åŒ–å™¨ï¼šä¼˜åŒ–å…³è”ã€å¼•æ“ã€åˆ†æå™¨")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å¼€å¯å…³è”ä¼˜åŒ–")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("optimize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("correlation"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# RBO ä¸ºè§„åˆ™çš„ä¼˜åŒ–å™¨ é»˜è®¤")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å¼€å¯CBO å¼•æ“ åŸºäºä»£ä»·çš„ä¼˜åŒ–å™¨")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cbo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("enable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("compute")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("query"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("using")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("stats"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("stats"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fetch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("column")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("stats"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("PPD ä¸‹æ¨ä¸å½±å“æœ€ç»ˆç»“æœçš„æƒ…å†µä¸‹ï¼Œå°½é‡å°†è¿‡æ»¤æ¡ä»¶æå‰æ‰§è¡Œ")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("optimize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ppd"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ä½¿ç”¨æ–¹å¼ å…ˆè¿‡æ»¤å†join")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value2 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" table1 a\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("join")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" table2 b "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ds"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'20181201'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ds"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'20190101'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" c\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è§„åˆ™")]),s._v("\nå¯¹äº"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Inner")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("ã€"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Full")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("outer")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Join")]),s._v("ï¼Œæ¡ä»¶å†™åœ¨"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v("åé¢ï¼Œè¿˜æ˜¯"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v("åé¢ï¼Œæ€§èƒ½ä¸Šé¢æ²¡æœ‰åŒºåˆ«ï¼›\nå¯¹äº"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Left")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("outer")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Join")]),s._v(" ï¼Œå³ä¾§çš„è¡¨å†™åœ¨"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v("åé¢ã€å·¦ä¾§çš„è¡¨å†™åœ¨"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v("åé¢ï¼Œæ€§èƒ½ä¸Šæœ‰æé«˜ï¼›\nå¯¹äº"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Right")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("outer")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Join")]),s._v("ï¼Œå·¦ä¾§çš„è¡¨å†™åœ¨"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v("åé¢ã€å³ä¾§çš„è¡¨å†™åœ¨"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v("åé¢ï¼Œæ€§èƒ½ä¸Šæœ‰æé«˜ï¼›\nå½“æ¡ä»¶åˆ†æ•£åœ¨ä¸¤ä¸ªè¡¨æ—¶ï¼Œè°“è¯ä¸‹æ¨å¯æŒ‰ä¸Šè¿°ç»“è®º"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("å’Œ"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("è‡ªç”±ç»„åˆã€‚\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("æ•°æ®å€¾æ–œ")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("èšåˆã€åˆ†ç»„ï¼šå¼€å¯Mapç«¯èšåˆã€å®ç°éšæœºåˆ†åŒºã€æ•°æ®å€¾æ–œæ—¶è‡ªåŠ¨è´Ÿè½½å‡è¡¡")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å¼€å¯Mapç«¯èšåˆ(ä¼˜å…ˆè€ƒè™‘)")]),s._v("\nhive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("map"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("aggr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å®ç°éšæœºåˆ†åŒº")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" distribute "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" rand"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ndistribute "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v("ç”¨äºæŒ‡å®šåº•å±‚æŒ‰ç…§å“ªä¸ªå­—æ®µä½œä¸º"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Key")]),s._v("å®ç°åˆ†åŒºã€åˆ†ç»„ç­‰\né€šè¿‡rankå‡½æ•°éšæœºå€¼å®ç°éšæœºåˆ†åŒºï¼Œé¿å…æ•°æ®å€¾æ–œ\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ•°æ®å€¾æ–œæ—¶è‡ªåŠ¨è´Ÿè½½å‡è¡¡")]),s._v("\nhive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("groupby"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("skewindata"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("å½“å‰ç¨‹åºä¼šè‡ªåŠ¨é€šè¿‡ä¸¤ä¸ªMapReduceæ¥è¿è¡Œ\nç¬¬ä¸€ä¸ªMapReduceè‡ªåŠ¨è¿›è¡Œéšæœºåˆ†å¸ƒåˆ°Reducerä¸­ï¼Œæ¯ä¸ªReduceråšéƒ¨åˆ†èšåˆæ“ä½œï¼Œè¾“å‡ºç»“æœ\nç¬¬äºŒä¸ªMapReduceå°†ä¸Šä¸€æ­¥èšåˆçš„ç»“æœå†æŒ‰ç…§ä¸šåŠ¡ï¼ˆ"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("group")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v("ï¼‰è¿›è¡Œå¤„ç†ï¼Œä¿è¯ç›¸åŒçš„åˆ†å¸ƒåˆ°ä¸€èµ·ï¼Œæœ€ç»ˆèšåˆå¾—åˆ°ç»“æœ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("joinè¿æ¥ï¼šMap Joinã€Bucket Joinã€Skew Join")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æå‰è¿‡æ»¤ å°†å¤§æ•°æ®å˜æˆå°æ•°æ®ï¼Œå®ç°Map Join")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value2 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" table1 a\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("join")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" table2 b "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ds"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'20181201'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ds"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'20190101'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" c\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ä½¿ç”¨Bucket Join")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ä½¿ç”¨Skew Join ")]),s._v("\nï¼ˆå€¾æ–œæ•°æ®mapã€æ²¡æœ‰å°±ç”¨reduceï¼Œæœ€ç»ˆMap "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Join")]),s._v("çš„ç»“æœå’ŒReduce "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Join")]),s._v("çš„ç»“æœè¿›è¡Œ"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Union")]),s._v("åˆå¹¶ï¼‰\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- å¼€å¯è¿è¡Œè¿‡ç¨‹ä¸­skewjoin")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("optimize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("skewjoin"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- å¦‚æœè¿™ä¸ªkeyçš„å‡ºç°çš„æ¬¡æ•°è¶…è¿‡è¿™ä¸ªèŒƒå›´")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("skewjoin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- åœ¨ç¼–è¯‘æ—¶åˆ¤æ–­æ˜¯å¦ä¼šäº§ç”Ÿæ•°æ®å€¾æ–œ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("optimize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("skewjoin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("compiletime"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- ä¸åˆå¹¶ï¼Œæå‡æ€§èƒ½")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("optimize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("union")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("remove"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- å¦‚æœHiveçš„åº•å±‚èµ°çš„æ˜¯MapReduceï¼Œå¿…é¡»å¼€å¯è¿™ä¸ªå±æ€§ï¼Œæ‰èƒ½å®ç°ä¸åˆå¹¶")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" mapreduce"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("input"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("fileinputformat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("input"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dir"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("recursive"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])])])])])]),s._v(" "),a("p",[a("strong",[s._v("3.0æ–°ç‰¹æ€§")]),s._v("ï¼š")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("é…ç½®Tezæ‰§è¡Œ(Tezå°†å¤šä¸ªæœ‰ä¾èµ–çš„ä½œä¸šè½¬æ¢æˆä¸€ä¸ªä½œä¸šå†™ä¸€æ¬¡å³å¯)ï¼Œåé¢é…ç½®spark  ï¼ˆå¾…ç»­ï¼‰")])]),s._v(" "),a("li",[a("p",[s._v("LLAPå®æ—¶é•¿æœŸå¤„ç†ã€å°†æ•°æ®ç¼“å†²åŸºäºyarnå®ˆæŠ¤è¿›ç¨‹å½“ä¸­ å½“å‰åªæ”¯æŒtexå¼•æ“")]),s._v(" "),a("p",[a("img",{attrs:{src:"D:%5Chuanjin%5Cgit_book%5Cbook%5Cvuepress_vdoing%5Cvidoing%5Cbook%5Cdocs%5C01.%E5%A4%A7%E6%95%B0%E6%8D%AE%5C40.%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%5C35.%E3%80%8Ahive%E3%80%8B%5Cimg%5C20210912005051.png",alt:""}})])]),s._v(" "),a("li",[a("p",[s._v("ç‹¬ç«‹æ¨¡å¼ï¼šMetastoreæœ¬èº«å¯ä»¥å®Œå…¨åµŒå…¥åˆ°ç”¨æˆ·è¿›ç¨‹ä¸­ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºæœåŠ¡è¿è¡Œï¼Œä¾›å…¶ä»–è¿›ç¨‹è¿æ¥")])])]),s._v(" "),a("h2",{attrs:{id:"æ¡ˆä¾‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ¡ˆä¾‹"}},[s._v("#")]),s._v(" "),a("strong",[s._v("æ¡ˆä¾‹")])]),s._v(" "),a("p",[a("strong",[s._v("æ¡ˆä¾‹")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("hiveå¤šå­—èŠ‚åˆ†éš”ç¬¦å¤„ç†")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ›¿æ¢åˆ†éš”ç¬¦ (ä½¿ç”¨MRæå‰å°†æ•°æ®ä¸­çš„å¤šå­—èŠ‚åˆ†éš”ç¬¦æ›¿æ¢ä¸ºå•å­—èŠ‚åˆ†éš”ç¬¦)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# RegexSerDeæ­£åˆ™åŠ è½½ (å¸¸ç”¨ORCSerDe ã€RegexSerDeã€JsonSerDe)")]),s._v("\nä¾‹ï¼š"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("æ¨èä½¿ç”¨æ­£åˆ™åŠ è½½çš„æ–¹å¼"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ROW")]),s._v(" FORMAT SERDE "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'org.apache.hadoop.hive.serde2.RegexSerDe'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WITH")]),s._v(" SERDEPROPERTIES "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"input.regex"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"([0-9]*)\\\\|\\\\|(.*)\\\\|\\\\|(.*)\\\\|\\\\|(.*)\\\\|\\\\|(.*)\\\\|\\\\|(.*)"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#è‡ªå®šä¹‰InputFormat ï¼ˆä¸æ¨èï¼‰")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.")]),s._v(" è‡ªå®šä¹‰InputFormatï¼Œç»§æ‰¿TextInputFormat\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.")]),s._v(" è‡ªå®šä¹‰RecordReaderï¼Œå®ç°RecordReaderæ¥å£ï¼Œå®ç°"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("next")]),s._v("æ–¹æ³•\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.")]),s._v(" æ‰“æˆjaråŒ…ï¼Œæ·»åŠ åˆ°Hiveçš„classpathä¸­\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.")]),s._v("åˆ›å»ºè¡¨æ—¶ï¼ŒæŒ‡å®šInputFormatä¸ºè‡ªå®šä¹‰çš„InputFormat\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("urlè§£æå‡½æ•°")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/axcmsm/tmp/raw/master/bigdata/20210912010049.png",alt:""}})]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ä½¿ç”¨urlè§£æå‡½æ•° parse_urlå’Œparse_url_tupleï¼›")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#parse_urlï¼ˆä¸€å¯¹ä¸€ï¼‰ åªèƒ½è¿”å›æŒ‡å®šçš„ä¸€ä¸ªkey ")]),s._v("\nè¯­æ³•ï¼š\nparse_url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" partToExtract"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" extracts a part "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" a URL \nParts: HOST"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" PATH"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" QUERY"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" REF"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" PROTOCOL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" AUTHORITY"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FILE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" USERINFO "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#parse_url_tuple (ä¸€å¯¹å¤š) å¯ä»¥è¿”å›å¤šä¸ªkey ä¾‹:path host ...")]),s._v("\nè¯­æ³•ï¼š\nparse_url_tuple"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" partname1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" partname2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" partnameN"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" extracts N "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("N"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" parts "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" a URL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\nIt takes a URL "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" one "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("or")]),s._v(" multiple partnames"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("returns")]),s._v(" a tuple"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ä¾‹å¦‚ï¼šæŸ¥è¯¢tb_urlä¸­æ¯ä¸ªurlçš„PROTOCOLã€HOSTã€QUERY")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" parse_url_tuple"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"PROTOCOL"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"HOST"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"PATH"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("protocol"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("host"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" tb_url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å¼Šç«¯ selectæ—¶ä¸èƒ½åŒ…å«å…¶ä»–å­—æ®µã€ä¸èƒ½åµŒå¥—è°ƒç”¨ã€ä¸èƒ½ä¸group byç­‰æ”¾åœ¨ä¸€èµ·è°ƒç”¨ç­‰ç­‰")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è§£å†³ï¼šç›´æ¥åœ¨selectåå•ç‹¬ä½¿ç”¨ æˆ–è€…ä¸Lateral Viewæ”¾åœ¨ä¸€èµ·ä½¿ç”¨")]),s._v("\nåŸºæœ¬è¯­æ³•ï¼š\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" â€¦â€¦ "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" tabelA lateral "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("view")]),s._v(" UDTF"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("xxx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" åˆ«å "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" col1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("col2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("col3â€¦â€¦\nä¾‹ï¼š\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v("\na"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\nb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("host "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" host"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\nb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("path "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\nc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("protocol "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" protocol"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\nc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("query "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" query\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" tb_url a\nlateral "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("view")]),s._v(" parse_url_tuple"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"HOST"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"PATH"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" b "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" host"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("path\nlateral "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("view")]),s._v(" parse_url_tuple"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"PROTOCOL"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"QUERY"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" c "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" protocol"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("query"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("è¡Œåˆ—è½¬æ¢åº”ç”¨")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("è¡Œè½¬åˆ—")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('# å¤šå¯¹å¤š caseå‡½æ•°\ncase å­—æ®µ when æ¡ä»¶ then æ»¡è¶³æ‰§è¡Œ when æ¡ä»¶ then æ»¡è¶³æ‰§è¡Œ... else éƒ½ä¸æ»¡è¶³æ‰§è¡Œ endç»“æŸ\n# å¤šå¯¹å• \nconcat å‡½æ•°  åˆèµ·æ¥(ä»»æ„ç©ºå°±ä¸ºç©º)\nselect concat("it","cast","And","heima");\n+-----------------+\n| itcastAndheima  |\n+-----------------+\nconcat_wså‡½æ•° åˆèµ·æ¥(å¯æŒ‡å®šåˆ†éš”ç¬¦,ä»»æ„ä¸ä¸ºç©ºå°±ä¸ä¸ºç©ºï¼‰\nselect concat_ws("-","itcast","And","heima");\n+-------------------+\n| itcast-And-heima  |\n+-------------------+\ncollect_listå‡½æ•° ï¼ˆäºå°†ä¸€åˆ—ä¸­çš„å¤šè¡Œåˆå¹¶ä¸ºä¸€è¡Œï¼Œä¸è¿›è¡Œå»é‡ï¼‰\nselect collect_list(å­—æ®µ) from row2col1;\n+----------------------------+\n| ["a","a","a","b","b","b"]  |\n+----------------------------+\ncollect_setå‡½æ•°  ( ç”¨äºå°†ä¸€åˆ—ä¸­çš„å¤šè¡Œåˆå¹¶ä¸ºä¸€è¡Œï¼Œå¹¶è¿›è¡Œå»é‡)\nselect collect_set(å­—æ®µ) from row2col1;\n+------------+\n| ["b","a"]  |\n+------------+\næ±‡æ€»ï¼Œäº§ç”Ÿ Array ç±»å‹å­—æ®µ\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("åˆ—æ¢è¡Œ")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('# å¤šå¯¹å¤š\nunionå…³é”®å­— ï¼ˆå°†å¤šä¸ªselectè¯­å¥ç»“æœåˆå¹¶ä¸ºä¸€ä¸ªï¼Œä¸”ç»“æœå»é‡ä¸”æ’åº)\n# å•å¯¹å¤š\nexplode ç‚¸å¼€\nexplode( Map | Array)\nä¾‹å¦‚ï¼šselect explode(split("a,b,c,d",","));\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])])])])]),s._v(" "),a("li",[a("p",[s._v("jsonæ•°æ®å¤„ç†")]),s._v(" "),a("p",[s._v("å‡½æ•°")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# jsonå‡½æ•°å¤„ç† get_json_object(å•ä¸ª)ã€json_tupl(å¤šä¸ª)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# select get_json_object(JSONå­—ç¬¦ä¸², æŒ‡å®šè¦è¿”å›çš„å­—æ®µ) from è¡¨å")]),s._v("\næŒ‡å®šè¦è¿”å›çš„å­—æ®µï¼Œé€šè¿‡$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("columnNameçš„æ–¹å¼æ¥æŒ‡å®špath\nä¾‹ï¼š"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("å•ä¸ª"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--è·å–è®¾å¤‡åç§°")]),s._v("\nget_json_object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("json"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$.device"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" device"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--è·å–è®¾å¤‡ç±»å‹")]),s._v("\nget_json_object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("json"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$.deviceType"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" deviceType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--è·å–è®¾å¤‡ä¿¡å·å¼ºåº¦")]),s._v("\nget_json_object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("json"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$.signal"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" signal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--è·å–æ—¶é—´")]),s._v("\nget_json_object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("json"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$.time"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" stime\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" tb_json_test1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#json_tupl(å¤šä¸ª)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--json_tuple")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--å•ç‹¬ä½¿ç”¨")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--è§£ææ‰€æœ‰å­—æ®µ")]),s._v("\njson_tuple"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("json"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"device"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"deviceType"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"signal"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"time"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("device"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("deviceType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("signal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("stime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" tb_json_test1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--æ­é…ä¾§è§†å›¾ä½¿ç”¨")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v("\njson"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("device"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("deviceType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("signal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("stime\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" tb_json_test1\nlateral "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("view")]),s._v(" json_tuple"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("json"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"device"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"deviceType"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"signal"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"time"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" b\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" device"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("deviceType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("signal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("stime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br")])]),a("p",[s._v("åŠ è½½å™¨")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å»ºè¡¨æŒ‡å®šåŠ è½½å™¨")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--JsonSerD")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--åˆ›å»ºè¡¨")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" tb_json_test2 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\ndevice string"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\ndeviceType string"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\nsignal "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("double")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("time")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" string\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- æŒ‡å®šåŠ è½½å™¨")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ROW")]),s._v(" FORMAT SERDE "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'org.apache.hive.hcatalog.data.JsonSerDe'")]),s._v("\nSTORED "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" TEXTFILE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("load")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("data")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("local")]),s._v(" inpath "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/root/hivedata/device.json'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" tb_json_test2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("blockquote",[a("p",[s._v("æ€»ç»“ï¼šä¸€è¡Œä¸ªåˆ«å­—æ®µjsonç”¨å‡½æ•°ï¼Œæ•´ä¸ªæ–‡ä»¶ç”¨åŠ è½½å™¨")])])]),s._v(" "),a("li",[a("p",[s._v("çª—å£å‡½æ•°åº”ç”¨")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("è¿ç»­ç™»å½•")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ç¬›å¡å°”ç§¯å®ç° è‡ªè¿æ¥è¿‡æ»¤")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ä½¿ç”¨çª—å£å‡½æ•°æ¥å®ç°")]),s._v("\nlead"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("colNameï¼ŒNï¼ŒdefautValue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ncolNameï¼šå–å“ªä¸€åˆ—çš„å€¼\nNï¼šå‘ååç§»Nè¡Œ\ndefaultValueï¼šå¦‚æœå–ä¸åˆ°è¿”å›çš„é»˜è®¤å€¼\næˆ‘ä»¬å¯ä»¥å¯¹ç”¨æˆ·IDè¿›è¡Œåˆ†åŒºï¼ŒæŒ‰ç…§ç™»é™†æ—¶é—´è¿›è¡Œæ’åºï¼Œé€šè¿‡leadå‡½æ•°è®¡ç®—å‡ºç”¨æˆ·ä¸‹æ¬¡ç™»é™†æ—¶é—´\né€šè¿‡æ—¥æœŸå‡½æ•°è®¡ç®—å‡ºç™»é™†ä»¥åç¬¬äºŒå¤©çš„æ—¥æœŸï¼Œå¦‚æœç›¸ç­‰å³ä¸ºè¿ç»­ä¸¤å¤©ç™»å½•ã€‚\nä¾‹ï¼š\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----çª—å£å‡½æ•°å®ç°")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# åˆ›å»ºè™šæ‹Ÿè¡¨")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" t1 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v("\nuserid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\nlogintime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--æœ¬æ¬¡ç™»é™†æ—¥æœŸçš„ç¬¬äºŒå¤©")]),s._v("\ndate_add"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("logintime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" nextday"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--æŒ‰ç…§ç”¨æˆ·idåˆ†åŒºï¼ŒæŒ‰ç…§ç™»é™†æ—¥æœŸæ’åºï¼Œå–ä¸‹ä¸€æ¬¡ç™»é™†æ—¶é—´ï¼Œå–ä¸åˆ°å°±ä¸º0")]),s._v("\nlead"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("logintime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("over")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("partition")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" userid "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" logintime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" nextlogin\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" tb_login "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ç„¶åå–å‡ºä¸Šä¸€å¤©ç›¸ç­‰")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("distinct")]),s._v(" userid "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" t1 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" nextday "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" nextlogin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å¦‚æœæ˜¯è¿ç»­Nå¤©")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--\tè¿ç»­Nå¤©")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v("\nuserid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\nlogintime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--\tæœ¬æ¬¡ç™»é™†æ—¥æœŸçš„ç¬¬Nå¤©")]),s._v("\ndate_add"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("logintime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("N"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" nextday"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--\tæŒ‰ç…§ç”¨æˆ·idåˆ†åŒºï¼ŒæŒ‰ç…§ç™»é™†æ—¥æœŸæ’åºï¼Œå–ä¸‹ä¸‹ä¸€æ¬¡ç™»é™†æ—¶é—´ï¼Œå–ä¸åˆ°å°±ä¸º0")]),s._v("\nlead"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("logintime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("N"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("over")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("partition")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" userid "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" logintime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" nextlogin\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" tb_login"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å†å–å‡ºå³å¯")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("è”çº§ç´¯åŠ æ±‚å’Œ")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("ç»Ÿè®¡å‡ºæ¯ä¸ªç”¨æˆ·æ¯ä¸ªæœˆçš„æ¶ˆè´¹æ€»é‡‘é¢\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ–¹æ¡ˆä¸€åˆ†ç»„ç»Ÿè®¡è‡ªè¿æ¥ã€åˆ†ç»„èšåˆ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ–¹æ¡ˆäºŒåˆ†ç»„ç»Ÿè®¡çª—å£èšåˆå‡½æ•°sum")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sum")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("colName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("over")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("partition")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" col "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" col"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ncolNameï¼šå¯¹æŸä¸€åˆ—çš„å€¼è¿›è¡Œæ±‚å’Œ\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- ç»Ÿè®¡æ¯ä¸ªç”¨æˆ·æ¯ä¸ªæœˆæ¶ˆè´¹é‡‘é¢åŠç´¯è®¡æ€»é‡‘é¢")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v("\nuserid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\nmth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\nm_money"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sum")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("m_money"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("over")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("partition")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" userid "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" mth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" t_money\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" tb_money_mtn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("åˆ†ç»„topN")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("TopNå‡½æ•°ï¼šrow_numberã€rankã€dense_rank\nrow_numberï¼šå¯¹æ¯ä¸ªåˆ†åŒºçš„æ•°æ®è¿›è¡Œç¼–å·ï¼Œå¦‚æœå€¼ç›¸åŒï¼Œç»§ç»­ç¼–å·\nrankï¼šå¯¹æ¯ä¸ªåˆ†åŒºçš„æ•°æ®è¿›è¡Œç¼–å·ï¼Œå¦‚æœå€¼ç›¸åŒï¼Œç¼–å·ç›¸åŒï¼Œä½†ç•™ä¸‹ç©ºä½\ndense_rankï¼šå¯¹æ¯ä¸ªåˆ†åŒºçš„æ•°æ®è¿›è¡Œç¼–å·ï¼Œå¦‚æœå€¼ç›¸åŒï¼Œç¼–å·ç›¸åŒï¼Œä¸ç•™ä¸‹ç©ºä½\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ä¾‹1ï¼šæŒ‰ç…§éƒ¨é—¨åˆ†åŒºï¼Œæ¯ä¸ªéƒ¨é—¨å†…éƒ¨æŒ‰ç…§è–ªæ°´é™åºæ’åº")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v("\n    empno"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    ename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    salary"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    deptno\nrow_nmuber"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("salary"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("over")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("partition")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v("  empno orde "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" salary"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" tb_emp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ä¾‹2ï¼šç»Ÿè®¡æ¯ä¸ªéƒ¨åˆ†è–ªèµ„æœ€é«˜çš„å‰2åå‘˜å·¥ä¿¡æ¯")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" t1 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v("\n empno"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n ename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n salary"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n deptno\nrow_number"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("over")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("partition")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" deptno "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" salary "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("desc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" rn\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" tb_emp\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å†æŸ¥è¯¢å³å¯")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" t1 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" rn "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br")])])])])]),s._v(" "),a("li",[a("p",[s._v("æ‹‰é“¾è¡¨è®¾è®¡ä¸å®ç°")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#è§£å†³æ•°æ®åŒæ­¥è¦†ç›–ç­‰é—®é¢˜ï¼ˆä¿å­˜å†å²çŠ¶æ€ï¼‰")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å®ç°è¿‡ç¨‹")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.")]),s._v("åˆ›å»ºodså±‚å¢é‡è¡¨ï¼Œç”¨åšå­˜å‚¨æ–°æ•°æ®\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.")]),s._v("åˆ›å»ºTMPå±‚ä½œä¸´æ—¶è¡¨ï¼Œç”¨åšæ‹‰å–ODSå±‚æ•°æ®å’ŒDWå±‚æ•°æ®æ±‡æ€»"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("union")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("all")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("ç„¶åå†é‡å†™ç»™Dwå±‚\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.")]),s._v("Dwå±‚æ‹‰é“¾è¡¨\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])])]),s._v(" "),a("hr"),s._v(" "),a("p",[a("strong",[s._v("å®æˆ˜")])]),s._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[s._v("ç‚¹å‡»æŸ¥çœ‹")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("ç»Ÿè®¡è§†é¢‘è§‚çœ‹æ•° Top10")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# æ€è·¯æ’åº åŠ åˆ†é¡µ\nselect \nvieoId,\nviews\nfrom\nè¡¨å\norder by\nviews desc\nlimit 10;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("ç»Ÿè®¡è§†é¢‘ç±»åˆ«çƒ­åº¦ Top10")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# åˆ†ç»„ç»Ÿè®¡ä¸ªæ•°+æ’åº+æ‹¿å‡ºæœ€å¤šçš„10æ¡ åˆ†é¡µ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" \nt1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("category_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("t1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("videoId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" hot\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" \n\tvide0id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("category_name\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v("\n\tgulivideo_orc\n\tlateral "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VIEW")]),s._v(" explode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("category"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" gulivideo_orc_tmp "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" category_name\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("t1\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("group")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v("\n\tt1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("category_name\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v("\n\thot "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("desc")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("limit")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("- ç»Ÿè®¡å‡ºè§†é¢‘è§‚çœ‹æ•°æœ€é«˜çš„ 20 ä¸ªè§†é¢‘çš„æ‰€å±ç±»åˆ«ä»¥åŠç±»åˆ«åŒ…å« Top20 è§†é¢‘çš„ä¸ªæ•°")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å…ˆç»Ÿè®¡æœ€é«˜20ä¸ªè§†é¢‘çš„æ‰€å±æ¡æ‰€æœ‰ä¿¡æ¯")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#æ‹¿å‡ºå…¶ä¸­ç±»åˆ«åˆ†è£‚(åˆ—è½¬è¡Œ)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#æŸ¥è¯¢æ”¹è§†é¢‘åˆ†ç±»åç§°å’Œæ”¹åˆ†ç±»ä¸‹æœ‰å¤šå°‘ä¸ª20çš„è§†é¢‘")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v("\n\tt2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("category_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n \t"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("COUNT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("t2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("videoId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" video_sum\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v("\n t1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("videoId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n category_name\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" \n videoId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n views "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n category \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" \n gulivideo_orc\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" \n views \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DESC")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LIMIT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" t1\nlateral "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("view")]),s._v(" explode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("t1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("category"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" category_name "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" t2\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GROUP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" t2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("category_name\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("ç»Ÿè®¡è§†é¢‘è§‚çœ‹æ•° Top50 æ‰€å…³è”è§†é¢‘çš„æ‰€å±ç±»åˆ«æ’åº")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ç»Ÿè®¡å‰50çš„è§†é¢‘æ‰€å…³è”çš„è§†é¢‘(æ•°ç»„) ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å°†å…³è”è§†é¢‘ç‚¸å¼€")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ç‚¸å¼€è¡¨ join åŸè¡¨ å»å‡ºç±»åˆ«(æ•°ç»„)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ç‚¸å¼€ç±»åˆ«æ•°ç»„ å¯¹ç±»åˆ«è¿›è¡Œåˆ†ç»„æ±‚count å®‰è£…countæ’åº")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v("\n t6"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("category_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n t6"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("video_sum"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n rank"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("over")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" t6"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("video_sum "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DESC")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" rk\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v("\n t5"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("category_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("COUNT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("t5"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("relatedid_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" video_sum\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v("\n t4"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("relatedid_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n category_name\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" \n t2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("relatedid_id "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n t3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("category \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" \n relatedid_id\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" \n videoId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n views"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n relatedid \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" \n gulivideo_orc\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("ç»Ÿè®¡æ¯ä¸ªç±»åˆ«ä¸­çš„è§†é¢‘çƒ­åº¦ Top10,ä»¥ Music ä¸ºä¾‹")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v("\nt1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("videoId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n t1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("views"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n t1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("category_name\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v("\n videoId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n views"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n category_name\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" gulivideo_orc\nlateral "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VIEW")]),s._v(" explode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("category"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" gulivideo_orc_tmp "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" category_name\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("t1 \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" \n t1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("category_name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Music"')]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" \n t1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("views \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DESC")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LIMIT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("ç»Ÿè®¡æ¯ä¸ªç±»åˆ«è§†é¢‘è§‚çœ‹æ•° Top10")]),s._v(" "),a("div",{staticClass:"language-SQL line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" \n t2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("videoId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n t2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("views"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n t2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("category_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n t2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("rk\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" \n t1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("videoId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n t1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("views"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n t1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("category_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n rank"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("over")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PARTITION")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" t1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("category_name "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" t1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("views "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DESC")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" rk\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v("\n videoId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n views"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n category_name\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" gulivideo_orc\nlateral "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VIEW")]),s._v(" explode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("category"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" gulivideo_orc_tmp "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" category_name\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("t1\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("t2\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" t2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("rk "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("ç»Ÿè®¡ä¸Šä¼ è§†é¢‘æœ€å¤šçš„ç”¨æˆ· Top10 ä»¥åŠä»–ä»¬ä¸Šä¼ çš„è§†é¢‘è§‚çœ‹æ¬¡æ•°åœ¨å‰ 20 çš„è§†é¢‘")]),s._v(" "),a("div",{staticClass:"language-SQL line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" \n t2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("videoId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n t2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("views"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n t2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("uploader\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" \n uploader"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n videos\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" gulivideo_user_orc \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" \n videos\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DESC")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LIMIT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" t1\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("JOIN")]),s._v(" gulivideo_orc t2 \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" t1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("uploader "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" t2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("uploader\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" \n t2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("views \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DESC")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LIMIT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])])])])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"å¸¸è§é”™è¯¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¸¸è§é”™è¯¯"}},[s._v("#")]),s._v(" å¸¸è§é”™è¯¯")]),s._v(" "),a("ul",[a("li",[a("p",[a("strong",[s._v("å¦‚æœæ›´æ¢")]),s._v(" "),a("strong",[s._v("Tez")]),s._v(" "),a("strong",[s._v("å¼•æ“åï¼Œæ‰§è¡Œä»»åŠ¡å¡ä½ï¼Œå¯ä»¥å°è¯•è°ƒèŠ‚å®¹é‡è°ƒåº¦å™¨çš„èµ„æºè°ƒåº¦ç­–ç•¥")])]),s._v(" "),a("p",[a("code",[s._v("/etc/hadoop/capacity-scheduler.xml æ”¹æˆ1")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("è¿æ¥ä¸ä¸Š")]),s._v(" "),a("strong",[s._v("mysql")]),s._v(" "),a("strong",[s._v("æ•°æ®åº“")]),s._v(" å¯¼é”™å¯åŠ¨åŒ…ã€user è¡¨ä¸­çš„ä¸»æœºåç§°æ²¡æœ‰éƒ½ä¿®æ”¹ä¸º%")])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("ä¸èƒ½æ‰§è¡Œ")]),s._v(" "),a("strong",[s._v("mapreduce")]),s._v(" "),a("strong",[s._v("ç¨‹åº")]),s._v(" yarnæ²¡å¼€å¯")])]),s._v(" "),a("li",[a("p",[s._v("mysql"),a("strong",[s._v("æŠ¥")]),s._v(" "),a("strong",[s._v("MySQL server PID file could not be found!")]),s._v(" "),a("strong",[s._v("å¼‚å¸¸")])]),s._v(" "),a("p",[a("code",[s._v("åœ¨/var/lock/subsys/mysql è·¯å¾„ä¸‹åˆ›å»º hadoop102.pidï¼Œå¹¶åœ¨æ–‡ä»¶ä¸­æ·»åŠ å†…å®¹ï¼š4396")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("æŠ¥")]),s._v(" "),a("strong",[s._v("service mysql status MySQL is not running, but lock file (/var/lock/subsys/mysql[å¤±è´¥]å¼‚ å¸¸")])]),s._v(" "),a("p",[a("code",[s._v("åœ¨/var/lib/mysql ç›®å½•ä¸‹åˆ›å»ºï¼šadoop102.pid æ–‡ä»¶ï¼Œå¹¶ä¿®æ”¹æƒé™ä¸º 777ã€‚")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("JVM")]),s._v(" "),a("strong",[s._v("å †å†…å­˜æº¢å‡º")]),s._v(":"),a("code",[s._v("java.lang.OutOfMemoryError: Java heap space")])]),s._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[s._v("#  yarn-site.xml\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("yarn.scheduler.maximum-allocation-mb"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("2048"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("yarn.scheduler.minimum-allocation-mb"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("2048"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("yarn.nodemanager.vmem-pmem-ratio"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("2.1"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("mapred.child.java.opts"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("-Xmx1024m"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("è™šæ‹Ÿå†…å­˜é™åˆ¶")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# yarn-site.xml")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("yarn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("nodemanager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vmem"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("check")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("enabled"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("value")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("value")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])])])])}),[],!1,null,null,null);t.default=e.exports}}]);