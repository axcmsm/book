<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Hdfsåˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿ | ğŸ¦</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="webå‰ç«¯æŠ€æœ¯åšå®¢,ç®€æ´è‡³ä¸Š,ä¸“æ³¨webå‰ç«¯å­¦ä¹ ä¸æ€»ç»“ã€‚JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,githubç­‰æŠ€æœ¯æ–‡ç« ã€‚">
    <meta name="keywords" content="ä¸ªäººæŠ€æœ¯åšå®¢,åç«¯,å¤§æ•°æ®,æŠ€æœ¯æ–‡æ¡£,å­¦ä¹ ,js,vue,python,css3,java,javaEE,SpringBoot,Spring,Hadoop,html5,git,github,markdown">
    <meta name="theme-color" content="#11a8cd">
    <link rel="preload" href="/assets/css/0.styles.546f0649.css" as="style"><link rel="preload" href="/assets/js/app.e7d9515b.js" as="script"><link rel="preload" href="/assets/js/2.125ae6e8.js" as="script"><link rel="preload" href="/assets/js/17.c9772d78.js" as="script"><link rel="prefetch" href="/assets/js/10.95c2d7b0.js"><link rel="prefetch" href="/assets/js/100.b4e10546.js"><link rel="prefetch" href="/assets/js/101.d6d23fe2.js"><link rel="prefetch" href="/assets/js/102.b368fb26.js"><link rel="prefetch" href="/assets/js/103.b87bfabc.js"><link rel="prefetch" href="/assets/js/104.3d0ae07d.js"><link rel="prefetch" href="/assets/js/105.e9f9588c.js"><link rel="prefetch" href="/assets/js/106.76130cbc.js"><link rel="prefetch" href="/assets/js/107.11dd35ba.js"><link rel="prefetch" href="/assets/js/108.de8bb9b7.js"><link rel="prefetch" href="/assets/js/109.e26f138c.js"><link rel="prefetch" href="/assets/js/11.5682c637.js"><link rel="prefetch" href="/assets/js/110.2c9036b9.js"><link rel="prefetch" href="/assets/js/111.d91b7424.js"><link rel="prefetch" href="/assets/js/112.0edf9093.js"><link rel="prefetch" href="/assets/js/113.dbc0bf4d.js"><link rel="prefetch" href="/assets/js/114.439ad4ee.js"><link rel="prefetch" href="/assets/js/115.0cff9cd8.js"><link rel="prefetch" href="/assets/js/116.fd44dc61.js"><link rel="prefetch" href="/assets/js/117.e893d264.js"><link rel="prefetch" href="/assets/js/118.ec4b3d32.js"><link rel="prefetch" href="/assets/js/119.ea5c3eba.js"><link rel="prefetch" href="/assets/js/12.5a51d307.js"><link rel="prefetch" href="/assets/js/120.9aaee23f.js"><link rel="prefetch" href="/assets/js/121.4fc7842c.js"><link rel="prefetch" href="/assets/js/122.2b8f75d1.js"><link rel="prefetch" href="/assets/js/123.78dbfead.js"><link rel="prefetch" href="/assets/js/124.84b6382a.js"><link rel="prefetch" href="/assets/js/125.c2a2a818.js"><link rel="prefetch" href="/assets/js/126.83ea2963.js"><link rel="prefetch" href="/assets/js/127.dffd5eae.js"><link rel="prefetch" href="/assets/js/128.bb0a0738.js"><link rel="prefetch" href="/assets/js/129.45a56702.js"><link rel="prefetch" href="/assets/js/13.d1b5b29f.js"><link rel="prefetch" href="/assets/js/130.7fee331a.js"><link rel="prefetch" href="/assets/js/131.6aaa557b.js"><link rel="prefetch" href="/assets/js/132.9526e280.js"><link rel="prefetch" href="/assets/js/133.610c1c84.js"><link rel="prefetch" href="/assets/js/134.1dcf27f7.js"><link rel="prefetch" href="/assets/js/14.83de980a.js"><link rel="prefetch" href="/assets/js/15.0fa06ae1.js"><link rel="prefetch" href="/assets/js/16.d1d3c9c1.js"><link rel="prefetch" href="/assets/js/18.7cbf0ef4.js"><link rel="prefetch" href="/assets/js/19.66ee7cfc.js"><link rel="prefetch" href="/assets/js/20.8fbb5432.js"><link rel="prefetch" href="/assets/js/21.74a586bf.js"><link rel="prefetch" href="/assets/js/22.f85a2ced.js"><link rel="prefetch" href="/assets/js/23.a65163b5.js"><link rel="prefetch" href="/assets/js/24.5c2898c6.js"><link rel="prefetch" href="/assets/js/25.929f22ff.js"><link rel="prefetch" href="/assets/js/26.20d74c65.js"><link rel="prefetch" href="/assets/js/27.e790af79.js"><link rel="prefetch" href="/assets/js/28.6b84abe6.js"><link rel="prefetch" href="/assets/js/29.acc0fc34.js"><link rel="prefetch" href="/assets/js/3.dd3750e6.js"><link rel="prefetch" href="/assets/js/30.fadb6cbd.js"><link rel="prefetch" href="/assets/js/31.386f82c2.js"><link rel="prefetch" href="/assets/js/32.e934f71c.js"><link rel="prefetch" href="/assets/js/33.684ac64c.js"><link rel="prefetch" href="/assets/js/34.38f8fd76.js"><link rel="prefetch" href="/assets/js/35.3fe27233.js"><link rel="prefetch" href="/assets/js/36.993695b7.js"><link rel="prefetch" href="/assets/js/37.d735018c.js"><link rel="prefetch" href="/assets/js/38.0d23a384.js"><link rel="prefetch" href="/assets/js/39.808de65c.js"><link rel="prefetch" href="/assets/js/4.4a137b18.js"><link rel="prefetch" href="/assets/js/40.2fc7d5f7.js"><link rel="prefetch" href="/assets/js/41.6647cff7.js"><link rel="prefetch" href="/assets/js/42.f4d93aa6.js"><link rel="prefetch" href="/assets/js/43.a5d40107.js"><link rel="prefetch" href="/assets/js/44.3ae864d3.js"><link rel="prefetch" href="/assets/js/45.c66f1afe.js"><link rel="prefetch" href="/assets/js/46.750f2be2.js"><link rel="prefetch" href="/assets/js/47.1722c1b9.js"><link rel="prefetch" href="/assets/js/48.7c8df7cc.js"><link rel="prefetch" href="/assets/js/49.f9b58d70.js"><link rel="prefetch" href="/assets/js/5.51ca929a.js"><link rel="prefetch" href="/assets/js/50.fad73ad9.js"><link rel="prefetch" href="/assets/js/51.b88c6213.js"><link rel="prefetch" href="/assets/js/52.21244293.js"><link rel="prefetch" href="/assets/js/53.1c2189f3.js"><link rel="prefetch" href="/assets/js/54.95ba12bc.js"><link rel="prefetch" href="/assets/js/55.d8f79989.js"><link rel="prefetch" href="/assets/js/56.63c36b2d.js"><link rel="prefetch" href="/assets/js/57.270857ec.js"><link rel="prefetch" href="/assets/js/58.156073cc.js"><link rel="prefetch" href="/assets/js/59.5a300643.js"><link rel="prefetch" href="/assets/js/6.2dccf462.js"><link rel="prefetch" href="/assets/js/60.92f4ce87.js"><link rel="prefetch" href="/assets/js/61.0f312cea.js"><link rel="prefetch" href="/assets/js/62.0c55901b.js"><link rel="prefetch" href="/assets/js/63.613b1add.js"><link rel="prefetch" href="/assets/js/64.1e5070b6.js"><link rel="prefetch" href="/assets/js/65.dc215238.js"><link rel="prefetch" href="/assets/js/66.4a1319e4.js"><link rel="prefetch" href="/assets/js/67.841428fe.js"><link rel="prefetch" href="/assets/js/68.7380e054.js"><link rel="prefetch" href="/assets/js/69.0a503182.js"><link rel="prefetch" href="/assets/js/7.1096b6fa.js"><link rel="prefetch" href="/assets/js/70.09f4c416.js"><link rel="prefetch" href="/assets/js/71.a279d635.js"><link rel="prefetch" href="/assets/js/72.057aa49f.js"><link rel="prefetch" href="/assets/js/73.767f542c.js"><link rel="prefetch" href="/assets/js/74.3eb6f7e5.js"><link rel="prefetch" href="/assets/js/75.50ecd31e.js"><link rel="prefetch" href="/assets/js/76.602f67fb.js"><link rel="prefetch" href="/assets/js/77.3b5a8e7d.js"><link rel="prefetch" href="/assets/js/78.40c6990e.js"><link rel="prefetch" href="/assets/js/79.ecb155e0.js"><link rel="prefetch" href="/assets/js/8.4b82b135.js"><link rel="prefetch" href="/assets/js/80.d7279b34.js"><link rel="prefetch" href="/assets/js/81.f58f78af.js"><link rel="prefetch" href="/assets/js/82.8399bcab.js"><link rel="prefetch" href="/assets/js/83.67c3c861.js"><link rel="prefetch" href="/assets/js/84.5a8f7c4b.js"><link rel="prefetch" href="/assets/js/85.c6f0af81.js"><link rel="prefetch" href="/assets/js/86.f9f3d0b8.js"><link rel="prefetch" href="/assets/js/87.fec83ae4.js"><link rel="prefetch" href="/assets/js/88.ca11e236.js"><link rel="prefetch" href="/assets/js/89.ae243724.js"><link rel="prefetch" href="/assets/js/9.b8d3ed93.js"><link rel="prefetch" href="/assets/js/90.c242e238.js"><link rel="prefetch" href="/assets/js/91.ad0080a6.js"><link rel="prefetch" href="/assets/js/92.a435d70c.js"><link rel="prefetch" href="/assets/js/93.3232bfbf.js"><link rel="prefetch" href="/assets/js/94.6101d03c.js"><link rel="prefetch" href="/assets/js/95.8c95af7a.js"><link rel="prefetch" href="/assets/js/96.a582908e.js"><link rel="prefetch" href="/assets/js/97.1b560b4f.js"><link rel="prefetch" href="/assets/js/98.a686266f.js"><link rel="prefetch" href="/assets/js/99.e03a81a9.js">
    <link rel="stylesheet" href="/assets/css/0.styles.546f0649.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="ç›®å½•" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/favicon.ico" alt="ğŸ¦" class="logo"> <span class="site-name can-hide">ğŸ¦</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Bigæ•°æ®" class="dropdown-title"><a href="/BigData/" class="link-title">Bigæ•°æ®</a> <span class="title" style="display:none;">Bigæ•°æ®</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>å¤§æ•°æ®è·¯çº¿</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/2asd1/" class="nav-link">å¼€å‘è·¯çº¿</a></li><li class="dropdown-subitem"><a href="/pages/5cda13/" class="nav-link">linuxå¯¼å›¾</a></li></ul></li><li class="dropdown-item"><h4>å­¦ä¹ ç¬”è®°</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/l2sdd2ad123/" class="nav-link">ã€ŠLinuxã€‹</a></li><li class="dropdown-subitem"><a href="/pages/hdf2shad2o4p3/" aria-current="page" class="nav-link router-link-exact-active router-link-active">ã€ŠHadoopã€‹</a></li><li class="dropdown-subitem"><a href="/pages/f2l2im24e/" class="nav-link">ã€Šç”Ÿæ€åœˆç»„ä»¶ã€‹</a></li><li class="dropdown-subitem"><a href="/pages/ka1f3k4a/" class="nav-link">ã€Šæ¶ˆæ¯é˜Ÿåˆ—ã€‹</a></li><li class="dropdown-subitem"><a href="/pages/spa123ra12sd2/" class="nav-link">ã€Šsparkã€‹</a></li><li class="dropdown-subitem"><a href="/pages/f1l2i3n4k5/" class="nav-link">ã€Šflinkã€‹</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/TechnologyStack/" class="nav-link">æŠ€æœ¯æ ˆğŸˆ</a></div><div class="nav-item"><a href="/python/" class="nav-link">python</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="â›³ğŸ–¥" class="dropdown-title"><a href="/technology/" class="link-title">â›³ğŸ–¥</a> <span class="title" style="display:none;">â›³ğŸ–¥</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/b08e81/" class="nav-link">è®¡ç®—æœºå¿…å¤‡</a></li><li class="dropdown-item"><!----> <a href="/pages/fba33e/" class="nav-link">æ•°å­¦åŸºç¡€</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="more" class="dropdown-title"><a href="/more/" class="link-title">more</a> <span class="title" style="display:none;">more</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">å­¦ä¹ </a></li><li class="dropdown-item"><!----> <a href="/pages/vscode123/" class="nav-link">æŠ€å·§</a></li><li class="dropdown-item"><!----> <a href="/pages/4c76s2s6d8b3/" class="nav-link">æŠ€æœ¯æ–‡æ¡£</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHubæŠ€å·§</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">æœ¬ç«™å…³è”</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">å…³äº</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">æ”¶è—</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç´¢å¼•" class="dropdown-title"><a href="/archives/" class="link-title">ç´¢å¼•</a> <span class="title" style="display:none;">ç´¢å¼•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">åˆ†ç±»</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">æ ‡ç­¾</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">å½’æ¡£</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/axcmsm" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/zzx.jpg"> <div class="blogger-info"><h3>AxcmsmğŸ¼</h3> <span>çºµæœ‰ç–¾é£èµ·ï¼Œäººç”Ÿä¸è¨€å¼ƒğŸ…</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Bigæ•°æ®" class="dropdown-title"><a href="/BigData/" class="link-title">Bigæ•°æ®</a> <span class="title" style="display:none;">Bigæ•°æ®</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>å¤§æ•°æ®è·¯çº¿</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/2asd1/" class="nav-link">å¼€å‘è·¯çº¿</a></li><li class="dropdown-subitem"><a href="/pages/5cda13/" class="nav-link">linuxå¯¼å›¾</a></li></ul></li><li class="dropdown-item"><h4>å­¦ä¹ ç¬”è®°</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/l2sdd2ad123/" class="nav-link">ã€ŠLinuxã€‹</a></li><li class="dropdown-subitem"><a href="/pages/hdf2shad2o4p3/" aria-current="page" class="nav-link router-link-exact-active router-link-active">ã€ŠHadoopã€‹</a></li><li class="dropdown-subitem"><a href="/pages/f2l2im24e/" class="nav-link">ã€Šç”Ÿæ€åœˆç»„ä»¶ã€‹</a></li><li class="dropdown-subitem"><a href="/pages/ka1f3k4a/" class="nav-link">ã€Šæ¶ˆæ¯é˜Ÿåˆ—ã€‹</a></li><li class="dropdown-subitem"><a href="/pages/spa123ra12sd2/" class="nav-link">ã€Šsparkã€‹</a></li><li class="dropdown-subitem"><a href="/pages/f1l2i3n4k5/" class="nav-link">ã€Šflinkã€‹</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/TechnologyStack/" class="nav-link">æŠ€æœ¯æ ˆğŸˆ</a></div><div class="nav-item"><a href="/python/" class="nav-link">python</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="â›³ğŸ–¥" class="dropdown-title"><a href="/technology/" class="link-title">â›³ğŸ–¥</a> <span class="title" style="display:none;">â›³ğŸ–¥</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/b08e81/" class="nav-link">è®¡ç®—æœºå¿…å¤‡</a></li><li class="dropdown-item"><!----> <a href="/pages/fba33e/" class="nav-link">æ•°å­¦åŸºç¡€</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="more" class="dropdown-title"><a href="/more/" class="link-title">more</a> <span class="title" style="display:none;">more</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">å­¦ä¹ </a></li><li class="dropdown-item"><!----> <a href="/pages/vscode123/" class="nav-link">æŠ€å·§</a></li><li class="dropdown-item"><!----> <a href="/pages/4c76s2s6d8b3/" class="nav-link">æŠ€æœ¯æ–‡æ¡£</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHubæŠ€å·§</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">æœ¬ç«™å…³è”</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">å…³äº</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">æ”¶è—</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç´¢å¼•" class="dropdown-title"><a href="/archives/" class="link-title">ç´¢å¼•</a> <span class="title" style="display:none;">ç´¢å¼•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">åˆ†ç±»</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">æ ‡ç­¾</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">å½’æ¡£</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/axcmsm" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>è·¯çº¿orå¯¼å›¾</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>å­¦ä¹ ç¬”è®°</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>ã€Šlinuxã€‹</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>ã€ŠHadoopã€‹</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/hasy2d21do11dop/" class="sidebar-link">Hadoopæ¦‚è¿°</a></li><li><a href="/pages/hdf2shad2o4p3/" aria-current="page" class="active sidebar-link">Hdfsåˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/hdf2shad2o4p3/#hdfsæ¦‚è¿°" class="sidebar-link">HDFSæ¦‚è¿°</a></li><li class="sidebar-sub-header"><a href="/pages/hdf2shad2o4p3/#ç»„æˆæ¶æ„" class="sidebar-link">ç»„æˆæ¶æ„</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/hdf2shad2o4p3/#hdfsæ–‡ä»¶å¿«å¤§å°ğŸ’¨" class="sidebar-link">HDFSæ–‡ä»¶å¿«å¤§å°ğŸ’¨</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/hdf2shad2o4p3/#hdfs-çš„-shell-æ“ä½œâ­•-å¼€å‘" class="sidebar-link">HDFS çš„ Shell æ“ä½œâ­•ï¼ˆå¼€å‘ï¼‰</a></li><li class="sidebar-sub-header"><a href="/pages/hdf2shad2o4p3/#hdfs-çš„-api-æ“ä½œ" class="sidebar-link">HDFS çš„ API æ“ä½œ</a></li><li class="sidebar-sub-header"><a href="/pages/hdf2shad2o4p3/#hdfs-çš„è¯»å†™æµç¨‹ğŸ’¨-é¢è¯•" class="sidebar-link">HDFS çš„è¯»å†™æµç¨‹ğŸ’¨ï¼ˆé¢è¯•ï¼‰</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/hdf2shad2o4p3/#hdfs-å†™æ•°æ®æµç¨‹" class="sidebar-link">HDFS å†™æ•°æ®æµç¨‹</a></li><li class="sidebar-sub-header"><a href="/pages/hdf2shad2o4p3/#hdfs-è¯»æ•°æ®æµç¨‹" class="sidebar-link">HDFS è¯»æ•°æ®æµç¨‹</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/hdf2shad2o4p3/#nn-å’Œ2nn-äº†è§£" class="sidebar-link">NN å’Œ2NNï¼ˆäº†è§£ï¼‰</a></li><li class="sidebar-sub-header"><a href="/pages/hdf2shad2o4p3/#datanode" class="sidebar-link">DataNode</a></li></ul></li><li><a href="/pages/1b8ea6/" class="sidebar-link">MapReduce</a></li><li><a href="/pages/a611d4/" class="sidebar-link">yarn</a></li><li><a href="/pages/ad2s1a123s2fa/" class="sidebar-link">Hadoopç”Ÿäº§è°ƒä¼˜</a></li><li><a href="/pages/f225ff/" class="sidebar-link">hadoopæºç è§£æ</a></li><li><a href="/pages/e7984e/" class="sidebar-link">æ€»ç»“hadoop</a></li><li><a href="/pages/9067f7/" class="sidebar-link">HAé«˜å¯ç”¨</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>ã€Šzookeeperã€‹</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>ã€Šhiveã€‹</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>ã€Šç”Ÿæ€åœˆç»„ä»¶ã€‹</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>ã€Šæ¶ˆæ¯é˜Ÿåˆ—ã€‹</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>ã€Šsparkã€‹</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>ã€Šflinkã€‹</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>ã€Šæ•°æ®å¯è§†åŒ–ã€‹</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>é¡¹ç›®</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>å®‰è£…</span> <span class="arrow right"></span></p> <!----></section></li></ul> <div class="sidebar-slot sidebar-slot-bottom"><!-- æ­£æ–¹å½¢ -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="3508773082"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div></aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-1cd794fe><div class="articleInfo" data-v-1cd794fe><ul class="breadcrumbs" data-v-1cd794fe><li data-v-1cd794fe><a href="/" title="é¦–é¡µ" class="iconfont icon-home router-link-active" data-v-1cd794fe></a></li> <li data-v-1cd794fe><a href="/BigData" title="å¤§æ•°æ®-ç›®å½•é¡µ" data-v-1cd794fe>å¤§æ•°æ®</a></li> <li data-v-1cd794fe><a href="/BigData/#å­¦ä¹ ç¬”è®°" title="å¤§æ•°æ®#å­¦ä¹ ç¬”è®°" data-v-1cd794fe>å­¦ä¹ ç¬”è®°</a></li> <li data-v-1cd794fe><a href="/BigData/#ã€ŠHadoopã€‹" title="å¤§æ•°æ®#ã€ŠHadoopã€‹" data-v-1cd794fe>ã€ŠHadoopã€‹</a></li></ul> <div class="info" data-v-1cd794fe><div title="ä½œè€…" class="author iconfont icon-touxiang" data-v-1cd794fe><a href="https://github.com/axcmsm" target="_blank" title="ä½œè€…" class="beLink" data-v-1cd794fe>Wei Ye</a></div> <div title="åˆ›å»ºæ—¶é—´" class="date iconfont icon-riqi" data-v-1cd794fe><a href="javascript:;" data-v-1cd794fe>2021-08-30</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="/img/bj3.jpg">
          Hdfsåˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿ
        </h1> <div class="page-slot page-slot-top"><!-- å›ºå®š100% * 90pxå¯æ˜¾ç¤ºï¼Œmax-height:90pxæœªè§æ˜¾ç¤º-->
     <ins class="adsbygoogle"
          style="display:inline-block;width:100%;max-height:90px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6625304284"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="theme-vdoing-content content__default"><h2 id="hdfsæ¦‚è¿°"><a href="#hdfsæ¦‚è¿°" class="header-anchor">#</a> HDFSæ¦‚è¿°</h2> <p>HDFS æ˜¯åˆ†å¸ƒå¼æ–‡ä»¶ç®¡ç†ç³»ç»Ÿä¸­çš„ä¸€ç§ï¼Œé€‚åˆä¸€æ¬¡å†™å…¥ï¼Œå¤šæ¬¡è¯»å‡ºçš„åœºæ™¯</p> <p>ä¼˜ç‚¹ï¼š</p> <ul><li>é«˜å®¹é”™æ€§</li> <li>é€‚åˆå¤„ç†å¤§æ•°æ®</li> <li>å¯æ¶æ„åœ¨å»‰ä»·çš„æœºå™¨ä¸Šã€é€šè¿‡å¤šå‰¯æœ¬æœºåˆ¶ï¼Œæé«˜å¯é æ€§</li></ul> <p>ç¼ºç‚¹ï¼š</p> <ul><li>ä¸é€‚åˆä½å»¶æ—¶æ•°æ®è®¿é—®ï¼ˆæ¯”å¦‚æ¯«ç§’çº§ï¼‰</li> <li>æ— æ³•é«˜æ•ˆå¯¹å¤§é‡å°æ–‡ä»¶è¿›è¡Œå­˜å‚¨</li> <li>ä¸æ”¯æŒå¹¶å‘å†™å…¥ã€æ–‡ä»¶éšæœºä¿®æ”¹ï¼ˆä»…æ”¯æŒæ•°æ®appendè¿½åŠ ï¼‰</li></ul> <p>ç‰¹æ€§ï¼š</p> <ul><li>ä¸»ä»æ¶æ„ï¼š</li> <li>åˆ†å—å­˜å‚¨</li> <li>å‰¯æœ¬æœºåˆ¶</li> <li>å…ƒæ•°æ®ç®¡ç†</li> <li>æ•°æ®å—å­˜å‚¨</li> <li>æŠ½è±¡ç›®å½•æ ‘ç»“æ„ï¼Œä¸€æ¬¡å†™å…¥ï¼Œå¤šæ¬¡è¯»å‡ºï¼Œé«˜åº¦å®¹é”™</li></ul> <h2 id="ç»„æˆæ¶æ„"><a href="#ç»„æˆæ¶æ„" class="header-anchor">#</a> ç»„æˆæ¶æ„</h2> <p><img src="https://gitee.com/axcmsm/tmp/raw/master/bigdata/20210902174215.png" alt=""></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>1ï¼‰NameNodeï¼ˆnnï¼‰ï¼šå°±æ˜¯Masterï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸»ç®¡ã€ç®¡ç†è€…ã€‚
ï¼ˆ1ï¼‰ç®¡ç†HDFSçš„åç§°ç©ºé—´ï¼›
ï¼ˆ2ï¼‰é…ç½®å‰¯æœ¬ç­–ç•¥ï¼›
ï¼ˆ3ï¼‰ç®¡ç†æ•°æ®å—ï¼ˆBlockï¼‰æ˜ å°„ä¿¡æ¯ï¼›
ï¼ˆ4ï¼‰å¤„ç†å®¢æˆ·ç«¯è¯»å†™è¯·æ±‚ã€‚

2ï¼‰DataNodeï¼šå°±æ˜¯Slaveã€‚NameNodeä¸‹è¾¾å‘½ä»¤ï¼ŒDataNodeæ‰§è¡Œå®é™…çš„æ“ä½œã€‚
ï¼ˆ1ï¼‰å­˜å‚¨å®é™…çš„æ•°æ®å—ï¼›
ï¼ˆ2ï¼‰æ‰§è¡Œæ•°æ®å—çš„è¯»/å†™æ“ä½œã€‚

3ï¼‰Clientï¼šå°±æ˜¯å®¢æˆ·ç«¯ã€‚
ï¼ˆ1ï¼‰æ–‡ä»¶åˆ‡åˆ†ã€‚æ–‡ä»¶ä¸Šä¼ HDFSçš„æ—¶å€™ï¼ŒClientå°†æ–‡ä»¶åˆ‡åˆ†æˆä¸€ä¸ªä¸€ä¸ªçš„Blockï¼Œç„¶åè¿›è¡Œä¸Šä¼ ï¼›
ï¼ˆ2ï¼‰ä¸NameNodeäº¤äº’ï¼Œè·å–æ–‡ä»¶çš„ä½ç½®ä¿¡æ¯ï¼›
ï¼ˆ3ï¼‰ä¸DataNodeäº¤äº’ï¼Œè¯»å–æˆ–è€…å†™å…¥æ•°æ®ï¼›
ï¼ˆ4ï¼‰Clientæä¾›ä¸€äº›å‘½ä»¤æ¥ç®¡ç†HDFSï¼Œæ¯”å¦‚NameNodeæ ¼å¼åŒ–ï¼›
ï¼ˆ5ï¼‰Clientå¯ä»¥é€šè¿‡ä¸€äº›å‘½ä»¤æ¥è®¿é—®HDFSï¼Œæ¯”å¦‚å¯¹HDFSå¢åˆ æŸ¥æ”¹æ“ä½œï¼›

4ï¼‰Secondary NameNodeï¼šå¹¶éNameNodeçš„çƒ­å¤‡ã€‚å½“NameNodeæŒ‚æ‰çš„æ—¶å€™ï¼Œå®ƒå¹¶ä¸èƒ½é©¬ä¸Šæ›¿æ¢NameNodeå¹¶æä¾›æœåŠ¡ã€‚
ï¼ˆ1ï¼‰è¾…åŠ©NameNodeï¼Œåˆ†æ‹…å…¶å·¥ä½œé‡ï¼Œæ¯”å¦‚å®šæœŸåˆå¹¶Fsimageå’ŒEditsï¼Œå¹¶æ¨é€ç»™NameNode ï¼›
ï¼ˆ2ï¼‰åœ¨ç´§æ€¥æƒ…å†µä¸‹ï¼Œå¯è¾…åŠ©æ¢å¤NameNode
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="hdfsæ–‡ä»¶å¿«å¤§å°ğŸ’¨"><a href="#hdfsæ–‡ä»¶å¿«å¤§å°ğŸ’¨" class="header-anchor">#</a> HDFSæ–‡ä»¶å¿«å¤§å°ğŸ’¨</h3> <p>HDFSä¸­çš„æ–‡ä»¶åœ¨ç‰©ç†ä¸Šæ˜¯åˆ†å—å­˜å‚¨ï¼ˆBlockï¼‰ï¼Œå—çš„å¤§å°å¯ä»¥é€šè¿‡é…ç½®å‚æ•° ( dfs.blocksizeï¼‰æ¥è§„å®šï¼Œé»˜è®¤å¤§å°åœ¨Hadoop2.x/3.xç‰ˆæœ¬ä¸­æ˜¯128Mï¼Œ1.xç‰ˆæœ¬ä¸­æ˜¯64Mã€‚</p> <p><img src="https://gitee.com/axcmsm/tmp/raw/master/bigdata/20210902175307.png" alt=""></p> <blockquote><p>ï¼ˆ1ï¼‰HDFSçš„å—è®¾ç½®å¤ªå°ï¼Œä¼šå¢åŠ å¯»å€æ—¶é—´ï¼Œç¨‹åºä¸€ç›´åœ¨æ‰¾å—çš„å¼€å§‹ä½ç½®ï¼› ï¼ˆ2ï¼‰å¦‚æœå—è®¾ç½®çš„å¤ªå¤§ï¼Œä»ç£ç›˜ä¼ è¾“æ•°æ®çš„æ—¶é—´ä¼šæ˜æ˜¾å¤§äºå®šä½è¿™ä¸ªå—å¼€ å§‹ä½ç½®æ‰€éœ€çš„æ—¶é—´ã€‚å¯¼è‡´ç¨‹åºåœ¨å¤„ç†è¿™å—æ•°æ®æ—¶ï¼Œä¼šéå¸¸æ…¢ã€‚</p> <p>æ€»ç»“ï¼š<strong>HDFSå—çš„å¤§å°è®¾ç½®ä¸»è¦å–å†³äºç£ç›˜ä¼ è¾“é€Ÿç‡</strong>ã€‚</p></blockquote> <h2 id="hdfs-çš„-shell-æ“ä½œâ­•-å¼€å‘"><a href="#hdfs-çš„-shell-æ“ä½œâ­•-å¼€å‘" class="header-anchor">#</a> HDFS çš„ Shell æ“ä½œâ­•ï¼ˆå¼€å‘ï¼‰</h2> <p>åŸºæœ¬è¯­æ³•ï¼š</p> <p>hadoop fs å…·ä½“å‘½ä»¤ OR hdfs dfs å…·ä½“å‘½ä»¤</p> <p><a href="https://hadoop.apache.org/docs/r3.1.4/hadoop-project-dist/hadoop-common/FileSystemShell.html" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>å‘½ä»¤å¤§å…¨</strong>ï¼š bin/hadoop fs æŸ¥çœ‹</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[-appendToFile &lt;localsrc&gt; ... &lt;dst&gt;]
 [-cat [-ignoreCrc] &lt;src&gt; ...]
 [-chgrp [-R] GROUP PATH...]
 [-chmod [-R] &lt;MODE[,MODE]... | OCTALMODE&gt; PATH...]
 [-chown [-R] [OWNER][:[GROUP]] PATH...]
 [-copyFromLocal [-f] [-p] &lt;localsrc&gt; ... &lt;dst&gt;]
 [-copyToLocal [-p] [-ignoreCrc] [-crc] &lt;src&gt; ... &lt;localdst&gt;]
 [-count [-q] &lt;path&gt; ...]
 [-cp [-f] [-p] &lt;src&gt; ... &lt;dst&gt;]
 [-df [-h] [&lt;path&gt; ...]]
 [-du [-s] [-h] &lt;path&gt; ...]
 [-get [-p] [-ignoreCrc] [-crc] &lt;src&gt; ... &lt;localdst&gt;]
 [-getmerge [-nl] &lt;src&gt; &lt;localdst&gt;]
 [-help [cmd ...]]
 [-ls [-d] [-h] [-R] [&lt;path&gt; ...]]
 [-mkdir [-p] &lt;path&gt; ...]
 [-moveFromLocal &lt;localsrc&gt; ... &lt;dst&gt;]
 [-moveToLocal &lt;src&gt; &lt;localdst&gt;]
 [-mv &lt;src&gt; ... &lt;dst&gt;]
 [-put [-f] [-p] &lt;localsrc&gt; ... &lt;dst&gt;]
 [-rm [-f] [-r|-R] [-skipTrash] &lt;src&gt; ...]
 [-rmdir [--ignore-fail-on-non-empty] &lt;dir&gt; ...]
&lt;acl_spec&gt; &lt;path&gt;]]
 [-setrep [-R] [-w] &lt;rep&gt; &lt;path&gt; ...]
 [-stat [format] &lt;path&gt; ...]
 [-tail [-f] &lt;file&gt;]
 [-test -[defsz] &lt;path&gt;]
 [-text [-ignoreCrc] &lt;src&gt; ...]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><ul><li>-help æŸ¥çœ‹è¿™ä¸ªå‘½ä»¤çš„å‚æ•°</li> <li>-mkdirï¼šåˆ›å»ºè·¯å¾„</li> <li>-moveFromLocal ä»æœ¬åœ°å‰ªåˆ‡ç²˜è´´åˆ° HDFS</li> <li>-copyFromLocalï¼šä»æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­æ‹·è´æ–‡ä»¶åˆ° HDFS è·¯å¾„å»</li> <li>-putï¼šç­‰åŒäº copyFromLocalï¼Œç”Ÿäº§ç¯å¢ƒæ›´ä¹ æƒ¯ç”¨ put</li> <li>-appendToFileï¼šè¿½åŠ ä¸€ä¸ªæ–‡ä»¶åˆ°å·²ç»å­˜åœ¨çš„æ–‡ä»¶æœ«å°¾</li> <li>-copyToLocalï¼šä» HDFS æ‹·è´åˆ°æœ¬åœ°</li> <li>-getï¼šç­‰åŒäº copyToLocalï¼Œç”Ÿäº§ç¯å¢ƒæ›´ä¹ æƒ¯ç”¨ get</li> <li>-ls: æ˜¾ç¤ºç›®å½•ä¿¡æ¯</li> <li>-catï¼šæ˜¾ç¤ºæ–‡ä»¶å†…å®¹</li> <li>-chgrpã€-chmodã€-chownï¼šLinux æ–‡ä»¶ç³»ç»Ÿä¸­çš„ç”¨æ³•ä¸€æ ·ï¼Œä¿®æ”¹æ–‡ä»¶æ‰€å±æƒé™</li> <li>-cpï¼šä» HDFS çš„ä¸€ä¸ªè·¯å¾„æ‹·è´åˆ° HDFS çš„å¦ä¸€ä¸ªè·¯å¾„</li> <li>-mvï¼šåœ¨ HDFS ç›®å½•ä¸­ç§»åŠ¨æ–‡ä»¶</li> <li>-tailï¼šæ˜¾ç¤ºä¸€ä¸ªæ–‡ä»¶çš„æœ«å°¾ 1kb çš„æ•°æ®</li> <li>-rmï¼šåˆ é™¤æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹</li> <li>-rm -rï¼šé€’å½’åˆ é™¤ç›®å½•åŠç›®å½•é‡Œé¢å†…å®¹</li> <li>-du ç»Ÿè®¡æ–‡ä»¶å¤¹çš„å¤§å°ä¿¡æ¯</li> <li>-setrepï¼šè®¾ç½® HDFS ä¸­æ–‡ä»¶çš„å‰¯æœ¬æ•°é‡</li></ul> <h2 id="hdfs-çš„-api-æ“ä½œ"><a href="#hdfs-çš„-api-æ“ä½œ" class="header-anchor">#</a> HDFS çš„ API æ“ä½œ</h2> <p>å¦‚æœåœ¨æœ¬åœ°æ“ä½œhdfséœ€è¦æœ¬åœ°å®‰è£…hadoopç¯å¢ƒã€ä¸‹è½½è§£å‹æ·»åŠ pathç¯å¢ƒå³å¯</p> <p>IDEAåˆ›å»ºmavenå·¥ç¨‹æ·»åŠ å¯¹åº”ä¾èµ–ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;dependencies&gt;
 &lt;dependency&gt;
 &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;
 &lt;artifactId&gt;hadoop-client&lt;/artifactId&gt;
 &lt;version&gt;3.1.3&lt;/version&gt;
 &lt;/dependency&gt;
 &lt;dependency&gt;
 &lt;groupId&gt;junit&lt;/groupId&gt;
 &lt;artifactId&gt;junit&lt;/artifactId&gt;
 &lt;version&gt;4.12&lt;/version&gt;
 &lt;/dependency&gt;
 &lt;dependency&gt;
 &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
 &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;
 &lt;version&gt;1.7.30&lt;/version&gt;
 &lt;/dependency&gt;
&lt;/dependencies&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>åœ¨é¡¹ç›®çš„ src/main/resources ç›®å½•ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå‘½åä¸ºâ€œlog4j.propertiesâ€ï¼Œåœ¨æ–‡ä»¶ ä¸­å¡«å…¥</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>log4j.rootLogger=INFO, stdout 
log4j.appender.stdout=org.apache.log4j.ConsoleAppender 
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout 
log4j.appender.stdout.layout.ConversionPattern=%d %p [%c] - %m%n 
log4j.appender.logfile=org.apache.log4j.FileAppender 
log4j.appender.logfile.File=target/spring.log 
log4j.appender.logfile.layout=org.apache.log4j.PatternLayout 
log4j.appender.logfile.layout.ConversionPattern=%d %p [%c] - %m%n
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><details class="custom-block details"><summary>å‚è€ƒğŸ˜œ</summary> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>axcmsm<span class="token punctuation">.</span>hdfs</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>conf<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>fs<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">After</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Before</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span>URI<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">URISyntaxException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HdfsClient2</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">FileSystem</span> fileSystem<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Before</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">InterruptedException</span><span class="token punctuation">,</span> <span class="token class-name">URISyntaxException</span> <span class="token punctuation">{</span>
        <span class="token comment">// è¿™é‡Œæ˜¯hdfså†…éƒ¨é€šä¿¡ç«¯å£</span>
        <span class="token class-name">URI</span> uri <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">URI</span><span class="token punctuation">(</span><span class="token string">&quot;hdfs://hadoop111:8020&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Configuration</span> configuration <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Configuration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> user <span class="token operator">=</span> <span class="token string">&quot;hadoop101&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">//è·å–è¿æ¥  éœ€è¦è¿æ¥åœ°å€ é…ç½®é¡¹å’Œç”¨æˆ·</span>
        fileSystem <span class="token operator">=</span> <span class="token class-name">FileSystem</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>uri<span class="token punctuation">,</span> configuration<span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@After</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//å…³é—­èµ„æº</span>
        fileSystem<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span><span class="token comment">//åˆ›å»ºæ“ä½œ</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">mkdir</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
<span class="token comment">//        fileSystem.mkdirs(new Path(&quot;/hello&quot;));</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span><span class="token comment">//ä¸Šä¼ æ“ä½œ</span>
    <span class="token comment">/**
     * å‚æ•°ä¼˜å…ˆçº§
     * ä½  åˆ°   é«˜
     * hdfs-default.xml =&gt; hdfs-site.xml =&gt; resourceï¼ˆèµ„æºç›®å½•ä¸‹ï¼‰=&gt; ä»£ç Configurationè®¾ç½®
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testput</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        fileSystem<span class="token punctuation">.</span><span class="token function">copyFromLocalFile</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//æ˜¯å¦åˆ é™¤æœ¬åœ°æ•°æ®</span>
                <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//ç›®æ ‡è·¯å¾„æœ‰æ–‡ä»¶æ˜¯å¦é‡å†™</span>
                <span class="token keyword">new</span> <span class="token class-name">Path</span><span class="token punctuation">(</span><span class="token string">&quot;E:\\hello.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">Path</span><span class="token punctuation">(</span><span class="token string">&quot;/feimao/axcmsm.txt&quot;</span><span class="token punctuation">)</span><span class="token comment">//ä¸Šä¼ åˆ°è¿™ä¸ªç›®å½•ä¸‹</span>
                <span class="token comment">//å¯ä»¥åŠ ä¸Šåè®®å¤´   jdfs://hadoop101/</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//    ä¸‹è½½</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testget</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        fileSystem<span class="token punctuation">.</span><span class="token function">copyToLocalFile</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token comment">//æ˜¯å¦åˆ é™¤æºæ–‡ä»¶</span>
                <span class="token keyword">new</span> <span class="token class-name">Path</span><span class="token punctuation">(</span><span class="token string">&quot;/feimao/axcmsm.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">Path</span><span class="token punctuation">(</span><span class="token string">&quot;E:\\hello.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//ä¸‹è½½åˆ°è¿™ä¸ªç›®å½•ä¸‹</span>
                <span class="token boolean">true</span> <span class="token comment">//æ˜¯å¦å¼€å¯æœ¬åœ°æ ¡éªŒ</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>


    <span class="token comment">//åˆ é™¤</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testdelete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºæ˜¯å¦é€’å½’åˆ é™¤</span>
        fileSystem<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Path</span><span class="token punctuation">(</span><span class="token string">&quot;/feimao/axcmsm.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//åˆ é™¤ç©ºç›®å½•</span>
        fileSystem<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Path</span><span class="token punctuation">(</span><span class="token string">&quot;/feimao&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//åˆ é™¤</span>
        fileSystem<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Path</span><span class="token punctuation">(</span><span class="token string">&quot;/feimao&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//æ›´åå’Œç§»åŠ¨</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testmove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//æ”¹å æ–‡ä»¶orç›®å½•</span>
        fileSystem<span class="token punctuation">.</span><span class="token function">rename</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Path</span><span class="token punctuation">(</span><span class="token string">&quot;/feimao.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Path</span><span class="token punctuation">(</span><span class="token string">&quot;/axcmsm.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//ç§»åŠ¨å’Œæ›´å</span>
        fileSystem<span class="token punctuation">.</span><span class="token function">rename</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Path</span><span class="token punctuation">(</span><span class="token string">&quot;/feimao.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Path</span><span class="token punctuation">(</span><span class="token string">&quot;/axcmsm/wei/hello.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token comment">//è·å–æ–‡ä»¶çš„è¯¦æƒ…ä¿¡æ¯</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testfileDetail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">// ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºé€’å½’</span>
        <span class="token class-name">RemoteIterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">LocatedFileStatus</span><span class="token punctuation">&gt;</span></span> iter <span class="token operator">=</span> fileSystem<span class="token punctuation">.</span><span class="token function">listFiles</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Path</span><span class="token punctuation">(</span><span class="token string">&quot;/hello.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//éå†è¿­ä»£å™¨</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>iter<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">LocatedFileStatus</span> next <span class="token operator">=</span> iter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;=====&quot;</span> <span class="token operator">+</span> next<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;=====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//è·å–æ–‡ä»¶è·¯å¾„</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ‰§è¡Œæƒé™:&quot;</span> <span class="token operator">+</span> next<span class="token punctuation">.</span><span class="token function">getPermission</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æ‰§è¡Œæƒé™</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ‰€æœ‰è€…:&quot;</span> <span class="token operator">+</span> next<span class="token punctuation">.</span><span class="token function">getOwner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æ‰€æœ‰è€…</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ç»„å:&quot;</span> <span class="token operator">+</span> next<span class="token punctuation">.</span><span class="token function">getGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ç»„å</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ–‡ä»¶å¤§å°:&quot;</span> <span class="token operator">+</span> next<span class="token punctuation">.</span><span class="token function">getLen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//é•¿åº¦</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æœ€åä¿®æ”¹æ—¶é—´:&quot;</span> <span class="token operator">+</span> next<span class="token punctuation">.</span><span class="token function">getModificationTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æœ€åä¿®æ”¹æ—¶é—´</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å‰¯æœ¬ä¸ªæ•°:&quot;</span> <span class="token operator">+</span> next<span class="token punctuation">.</span><span class="token function">getReplication</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å‰¯æœ¬ä¸ªæ•°</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å—å¤§å°:&quot;</span> <span class="token operator">+</span> next<span class="token punctuation">.</span><span class="token function">getBlockSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å—ä¿¡æ¯</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ–‡ä»¶åç§°:&quot;</span> <span class="token operator">+</span> next<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æ–‡ä»¶åç§°</span>

            <span class="token comment">// è·å–å—ä¿¡æ¯</span>
            <span class="token class-name">BlockLocation</span><span class="token punctuation">[</span><span class="token punctuation">]</span> blocks <span class="token operator">=</span> next<span class="token punctuation">.</span><span class="token function">getBlockLocations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å—ä¿¡æ¯:&quot;</span> <span class="token operator">+</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>blocks<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//åˆ¤æ–­æ˜¯å¦æ˜¯æ–‡ä»¶è¿˜æ˜¯ç›®å½•</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">FileStatus</span><span class="token punctuation">[</span><span class="token punctuation">]</span> status <span class="token operator">=</span> fileSystem<span class="token punctuation">.</span><span class="token function">listStatus</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Path</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">FileStatus</span> fileStatus <span class="token operator">:</span> status<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>fileStatus<span class="token punctuation">.</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ–‡ä»¶:&quot;</span> <span class="token operator">+</span> fileStatus<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ç›®å½•:&quot;</span> <span class="token operator">+</span> fileStatus<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br></div></div></details> <h2 id="hdfs-çš„è¯»å†™æµç¨‹ğŸ’¨-é¢è¯•"><a href="#hdfs-çš„è¯»å†™æµç¨‹ğŸ’¨-é¢è¯•" class="header-anchor">#</a> HDFS çš„è¯»å†™æµç¨‹ğŸ’¨ï¼ˆé¢è¯•ï¼‰</h2> <h3 id="hdfs-å†™æ•°æ®æµç¨‹"><a href="#hdfs-å†™æ•°æ®æµç¨‹" class="header-anchor">#</a> HDFS å†™æ•°æ®æµç¨‹</h3> <p><img src="https://gitee.com/axcmsm/tmp/raw/master/bigdata/20210902180939.png" alt=""></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>ï¼ˆ1ï¼‰å®¢æˆ·ç«¯é€šè¿‡ Distributed FileSystem æ¨¡å—å‘ NameNode è¯·æ±‚ä¸Šä¼ æ–‡ä»¶ï¼ŒNameNode æ£€æŸ¥ç›®æ ‡æ–‡ä»¶æ˜¯å¦å·²å­˜åœ¨ï¼Œçˆ¶ç›®å½•æ˜¯å¦å­˜åœ¨ã€‚
ï¼ˆ2ï¼‰NameNode è¿”å›æ˜¯å¦å¯ä»¥ä¸Šä¼ ã€‚
ï¼ˆ3ï¼‰å®¢æˆ·ç«¯è¯·æ±‚ç¬¬ä¸€ä¸ª Block ä¸Šä¼ åˆ°å“ªå‡ ä¸ª DataNode æœåŠ¡å™¨ä¸Šã€‚
ï¼ˆ4ï¼‰NameNode è¿”å› 3 ä¸ª DataNode èŠ‚ç‚¹ï¼Œåˆ†åˆ«ä¸º dn1ã€dn2ã€dn3ã€‚
ï¼ˆ5ï¼‰å®¢æˆ·ç«¯é€šè¿‡ FSDataOutputStream æ¨¡å—è¯·æ±‚ dn1 ä¸Šä¼ æ•°æ®ï¼Œdn1 æ”¶åˆ°è¯·æ±‚ä¼šç»§ç»­è°ƒç”¨dn2ï¼Œç„¶å dn2 è°ƒç”¨ dn3ï¼Œå°†è¿™ä¸ªé€šä¿¡ç®¡é“å»ºç«‹å®Œæˆã€‚
ï¼ˆ6ï¼‰dn1ã€dn2ã€dn3 é€çº§åº”ç­”å®¢æˆ·ç«¯ã€‚
ï¼ˆ7ï¼‰å®¢æˆ·ç«¯å¼€å§‹å¾€ dn1 ä¸Šä¼ ç¬¬ä¸€ä¸ª Blockï¼ˆå…ˆä»ç£ç›˜è¯»å–æ•°æ®æ”¾åˆ°ä¸€ä¸ªæœ¬åœ°å†…å­˜ç¼“å­˜ï¼‰ï¼Œä»¥ Packet ä¸ºå•ä½ï¼Œdn1 æ”¶åˆ°ä¸€ä¸ª Packet å°±ä¼šä¼ ç»™ dn2ï¼Œdn2 ä¼ ç»™dn3ï¼›dn1 æ¯ä¼ ä¸€ä¸ª packetä¼šæ”¾å…¥ä¸€ä¸ªåº”ç­”é˜Ÿåˆ—ç­‰å¾…åº”ç­”ã€‚
ï¼ˆ8ï¼‰å½“ä¸€ä¸ª Block ä¼ è¾“å®Œæˆä¹‹åï¼Œå®¢æˆ·ç«¯å†æ¬¡è¯·æ±‚ NameNode ä¸Šä¼ ç¬¬äºŒä¸ª Block çš„æœåŠ¡å™¨ã€‚ï¼ˆé‡å¤æ‰§è¡Œ 3-7 æ­¥ï¼‰ã€‚
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>ç½‘ç»œæ‹“æ‰‘-èŠ‚ç‚¹è·ç¦»è®¡ç®—</strong></p> <p>èŠ‚ç‚¹è·ç¦»ï¼šä¸¤ä¸ªèŠ‚ç‚¹åˆ°è¾¾æœ€è¿‘çš„å…±åŒç¥–å…ˆçš„è·ç¦»æ€»å’Œ</p> <p><strong>æœºæ¶æ„ŸçŸ¥ï¼ˆå‰¯æœ¬å­˜å‚¨èŠ‚ç‚¹é€‰æ‹©ï¼‰</strong></p> <p>å®˜æ–¹è¯´æ˜:&lt;<a href="http://hadoop.apache.org/docs/r3.1.3/hadoop-project-dist/hadoop-hdfs/HdfsDesign.html#Data_Replication" target="_blank" rel="noopener noreferrer">Apache Hadoop 3.1.3 â€“ HDFS Architecture<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>&gt;</p> <p>å‰¯æœ¬èŠ‚ç‚¹çš„é€‰æ‹©ï¼š</p> <p><img src="https://gitee.com/axcmsm/tmp/raw/master/bigdata/20210902181645.png" alt=""></p> <h3 id="hdfs-è¯»æ•°æ®æµç¨‹"><a href="#hdfs-è¯»æ•°æ®æµç¨‹" class="header-anchor">#</a> HDFS è¯»æ•°æ®æµç¨‹</h3> <p><img src="https://gitee.com/axcmsm/tmp/raw/master/bigdata/20210902181814.png" alt=""></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>ï¼ˆ1ï¼‰å®¢æˆ·ç«¯é€šè¿‡ DistributedFileSystem å‘ NameNode è¯·æ±‚ä¸‹è½½æ–‡ä»¶ï¼ŒNameNode é€šè¿‡æŸ¥è¯¢å…ƒæ•°æ®ï¼Œæ‰¾åˆ°æ–‡ä»¶å—æ‰€åœ¨çš„ DataNode åœ°å€ã€‚
ï¼ˆ2ï¼‰æŒ‘é€‰ä¸€å° DataNodeï¼ˆå°±è¿‘åŸåˆ™ï¼Œç„¶åéšæœºï¼‰æœåŠ¡å™¨ï¼Œè¯·æ±‚è¯»å–æ•°æ®ã€‚
ï¼ˆ3ï¼‰DataNode å¼€å§‹ä¼ è¾“æ•°æ®ç»™å®¢æˆ·ç«¯ï¼ˆä»ç£ç›˜é‡Œé¢è¯»å–æ•°æ®è¾“å…¥æµï¼Œä»¥ Packet ä¸ºå•ä½æ¥åšæ ¡éªŒï¼‰ã€‚
ï¼ˆ4ï¼‰å®¢æˆ·ç«¯ä»¥ Packet ä¸ºå•ä½æ¥æ”¶ï¼Œå…ˆåœ¨æœ¬åœ°ç¼“å­˜ï¼Œç„¶åå†™å…¥ç›®æ ‡æ–‡ä»¶ã€‚
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="nn-å’Œ2nn-äº†è§£"><a href="#nn-å’Œ2nn-äº†è§£" class="header-anchor">#</a> NN å’Œ2NNï¼ˆäº†è§£ï¼‰</h2> <blockquote><p>NameNode å’Œ SecondaryNameNode</p> <p>å› ä¸ºåé¢æˆ‘ä»¬ä¸é‡‡ç”¨è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬åé¢ä¼šæ­å»ºHAé«˜å¯ç”¨</p></blockquote> <p><strong>å·¥ä½œæœºåˆ¶</strong>ï¼š</p> <p>SecondaryNamenodeï¼Œ ä¸“é—¨ç”¨äº FsImage å’Œ Edits çš„åˆå¹¶,Edits æ–‡ä»¶ï¼ˆåªè¿›è¡Œè¿½åŠ æ“ä½œï¼Œæ•ˆç‡å¾ˆé«˜ï¼‰ã€‚æ¯å½“å…ƒæ•°æ®æœ‰æ›´æ–°æˆ–è€…æ·» åŠ å…ƒæ•°æ®æ—¶ï¼Œä¿®æ”¹å†…å­˜ä¸­çš„å…ƒæ•°æ®å¹¶è¿½åŠ åˆ° Edits ä¸­ï¼ŒFsImageåœ¨ç£ç›˜ä¸­æ˜¯å¤‡ä»½å…ƒæ•°æ®çš„ã€‚</p> <p><img src="https://gitee.com/axcmsm/tmp/raw/master/bigdata/20210902190330.png" alt=""></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>ç¬¬ä¸€é˜¶æ®µï¼šNameNode å¯åŠ¨
ï¼ˆ1ï¼‰ç¬¬ä¸€æ¬¡å¯åŠ¨ NameNode æ ¼å¼åŒ–åï¼Œåˆ›å»º Fsimage å’Œ Edits æ–‡ä»¶ã€‚å¦‚æœä¸æ˜¯ç¬¬ä¸€æ¬¡å¯åŠ¨ï¼Œç›´æ¥åŠ è½½ç¼–è¾‘æ—¥å¿—å’Œé•œåƒæ–‡ä»¶åˆ°å†…å­˜ã€‚
ï¼ˆ2ï¼‰å®¢æˆ·ç«¯å¯¹å…ƒæ•°æ®è¿›è¡Œå¢åˆ æ”¹çš„è¯·æ±‚ã€‚
ï¼ˆ3ï¼‰NameNode è®°å½•æ“ä½œæ—¥å¿—ï¼Œæ›´æ–°æ»šåŠ¨æ—¥å¿—ã€‚
ï¼ˆ4ï¼‰NameNode åœ¨å†…å­˜ä¸­å¯¹å…ƒæ•°æ®è¿›è¡Œå¢åˆ æ”¹ã€‚


ç¬¬äºŒé˜¶æ®µï¼šSecondary NameNode å·¥ä½œ
ï¼ˆ1ï¼‰Secondary NameNode è¯¢é—® NameNode æ˜¯å¦éœ€è¦ CheckPointã€‚ç›´æ¥å¸¦å› NameNodeæ˜¯å¦æ£€æŸ¥ç»“æœã€‚
ï¼ˆ2ï¼‰Secondary NameNode è¯·æ±‚æ‰§è¡Œ CheckPointã€‚
ï¼ˆ3ï¼‰NameNode æ»šåŠ¨æ­£åœ¨å†™çš„ Edits æ—¥å¿—ã€‚
ï¼ˆ4ï¼‰å°†æ»šåŠ¨å‰çš„ç¼–è¾‘æ—¥å¿—å’Œé•œåƒæ–‡ä»¶æ‹·è´åˆ° Secondary NameNodeã€‚
ï¼ˆ5ï¼‰Secondary NameNode åŠ è½½ç¼–è¾‘æ—¥å¿—å’Œé•œåƒæ–‡ä»¶åˆ°å†…å­˜ï¼Œå¹¶åˆå¹¶ã€‚
ï¼ˆ6ï¼‰ç”Ÿæˆæ–°çš„é•œåƒæ–‡ä»¶ fsimage.chkpointã€‚
ï¼ˆ7ï¼‰æ‹·è´ fsimage.chkpoint åˆ° NameNodeã€‚
ï¼ˆ8ï¼‰NameNode å°† fsimage.chkpoint é‡æ–°å‘½åæˆ fsimageã€‚
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><strong>Fsimageå’ŒEditsæ¦‚å¿µ</strong>ï¼š</p> <p>NameNodeè¢«æ ¼å¼åŒ–ä¹‹åï¼Œå°†åœ¨/opt/module/hadoop-3.1.3/data/tmp/dfs/name/currentç›®å½•ä¸­äº§ç”Ÿå¦‚ä¸‹æ–‡ä»¶</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>ï¼ˆ1ï¼‰Fsimageæ–‡ä»¶ï¼šHDFSæ–‡ä»¶ç³»ç»Ÿå…ƒæ•°æ®çš„ä¸€ä¸ªæ°¸ä¹…æ€§çš„æ£€æŸ¥ç‚¹ï¼Œå…¶ä¸­åŒ…å«HDFSæ–‡ä»¶ç³»ç»Ÿçš„æ‰€æœ‰ç›®å½•å’Œæ–‡ä»¶inodeçš„åºåˆ—åŒ–ä¿¡æ¯ã€‚
ï¼ˆ2ï¼‰Editsæ–‡ä»¶ï¼šå­˜æ”¾HDFSæ–‡ä»¶ç³»ç»Ÿçš„æ‰€æœ‰æ›´æ–°æ“ä½œçš„è·¯å¾„ï¼Œæ–‡ä»¶ç³»ç»Ÿå®¢æˆ·ç«¯æ‰§è¡Œçš„æ‰€æœ‰å†™æ“ä½œé¦–å…ˆä¼šè¢«è®°å½•åˆ°Editsæ–‡ä»¶ä¸­ã€‚
ï¼ˆ3ï¼‰seen_txidæ–‡ä»¶ä¿å­˜çš„æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå°±æ˜¯æœ€åä¸€ä¸ªedits_çš„æ•°å­—
ï¼ˆ4ï¼‰æ¯ æ¬¡NameNodeå¯åŠ¨çš„æ—¶å€™éƒ½ä¼šå°†Fsimageæ–‡ä»¶è¯»å…¥å†…å­˜ï¼ŒåŠ  è½½Editsé‡Œé¢çš„æ›´æ–°æ“ä½œï¼Œä¿è¯å†…å­˜ä¸­çš„å…ƒæ•°æ®ä¿¡æ¯æ˜¯æœ€æ–°çš„ã€åŒæ­¥çš„ï¼Œå¯ä»¥çœ‹æˆNameNodeå¯åŠ¨çš„æ—¶å€™å°±å°†Fsimageå’ŒEditsæ–‡ä»¶è¿›è¡Œäº†åˆå¹¶ã€‚
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>æŸ¥çœ‹å‘½ä»¤</strong></p> <ul><li><p>oiv æŸ¥çœ‹ Fsimage æ–‡ä»¶</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>åŸºæœ¬è¯­æ³•
hdfs oiv -p æ–‡ä»¶ç±»å‹ -i é•œåƒæ–‡ä»¶ -o è½¬æ¢åæ–‡ä»¶è¾“å‡ºè·¯å¾„
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>oev æŸ¥çœ‹ Edits æ–‡ä»¶</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>åŸºæœ¬è¯­æ³•
hdfs oev -p æ–‡ä»¶ç±»å‹ -i ç¼–è¾‘æ—¥å¿— -o è½¬æ¢åæ–‡ä»¶è¾“å‡ºè·¯å¾„
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul> <blockquote><p>å°†xmlå†…å®¹æ‹·è´åˆ°ideaä¸­åˆ›å»ºçš„xmlæ–‡ä»¶,æ ¼å¼åŒ–æŸ¥çœ‹å³å¯ã€‚</p></blockquote> <p><strong>CheckPoint æ—¶é—´è®¾ç½®</strong>ï¼š</p> <ol><li><p>é€šå¸¸æƒ…å†µä¸‹ï¼ŒSecondaryNameNode æ¯éš”ä¸€å°æ—¶æ‰§è¡Œä¸€æ¬¡ã€‚</p> <p>[hdfs-default.xml]</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;property&gt;
 &lt;name&gt;dfs.namenode.checkpoint.period&lt;/name&gt;
 &lt;value&gt;3600s&lt;/value&gt;
&lt;/property&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>ä¸€åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡æ“ä½œæ¬¡æ•°ï¼Œå½“æ“ä½œæ¬¡æ•°è¾¾åˆ° 1 ç™¾ä¸‡æ—¶ï¼Œ2nnæ‰§è¡Œä¸€æ¬¡ã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;property&gt;
&lt;name&gt;dfs.namenode.checkpoint.txns&lt;/name&gt;
 &lt;value&gt;1000000&lt;/value&gt;
&lt;description&gt;æ“ä½œåŠ¨ä½œæ¬¡æ•°&lt;/description&gt;
&lt;/property&gt;
&lt;property&gt;
 &lt;name&gt;dfs.namenode.checkpoint.check.period&lt;/name&gt;
 &lt;value&gt;60s&lt;/value&gt;
&lt;description&gt; 1 åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡æ“ä½œæ¬¡æ•°&lt;/description&gt;
&lt;/property&gt;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li></ol> <h2 id="datanode"><a href="#datanode" class="header-anchor">#</a> DataNode</h2> <h4 id="å·¥ä½œæœºåˆ¶"><a href="#å·¥ä½œæœºåˆ¶" class="header-anchor">#</a> å·¥ä½œæœºåˆ¶</h4> <p><img src="https://gitee.com/axcmsm/tmp/raw/master/bigdata/20210902191421.png" alt=""></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>ï¼ˆ1ï¼‰ä¸€ä¸ªæ•°æ®å—åœ¨ DataNode ä¸Šä»¥æ–‡ä»¶å½¢å¼å­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼ŒåŒ…æ‹¬ä¸¤ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯æ•°æ®
æœ¬èº«ï¼Œä¸€ä¸ªæ˜¯å…ƒæ•°æ®åŒ…æ‹¬æ•°æ®å—çš„é•¿åº¦ï¼Œå—æ•°æ®çš„æ ¡éªŒå’Œï¼Œä»¥åŠæ—¶é—´æˆ³ã€‚
ï¼ˆ2ï¼‰DataNode å¯åŠ¨åå‘ NameNode æ³¨å†Œï¼Œé€šè¿‡åï¼Œå‘¨æœŸæ€§ï¼ˆ6 å°æ—¶ï¼‰çš„å‘ NameNode ä¸ŠæŠ¥æ‰€æœ‰çš„å—ä¿¡æ¯ã€‚
ï¼ˆ3ï¼‰å¿ƒè·³æ˜¯æ¯ 3 ç§’ä¸€æ¬¡ï¼Œå¿ƒè·³è¿”å›ç»“æœå¸¦æœ‰ NameNode ç»™è¯¥ DataNode çš„å‘½ä»¤å¦‚å¤åˆ¶å—æ•°æ®åˆ°å¦ä¸€å°æœºå™¨ï¼Œæˆ–åˆ é™¤æŸä¸ªæ•°æ®å—ã€‚å¦‚æœè¶…è¿‡ 10 åˆ†é’Ÿæ²¡æœ‰æ”¶åˆ°æŸä¸ª DataNode çš„å¿ƒè·³ï¼Œåˆ™è®¤ä¸ºè¯¥èŠ‚ç‚¹ä¸å¯ç”¨ã€‚
ï¼ˆ4ï¼‰é›†ç¾¤è¿è¡Œä¸­å¯ä»¥å®‰å…¨åŠ å…¥å’Œé€€å‡ºä¸€äº›æœºå™¨ã€‚
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>DN å‘ NN æ±‡æŠ¥å½“å‰è§£è¯»ä¿¡æ¯çš„æ—¶é—´é—´éš”ï¼Œé»˜è®¤ 6 å°æ—¶</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;property&gt;
&lt;name&gt;dfs.blockreport.intervalMsec&lt;/name&gt;
&lt;value&gt;21600000&lt;/value&gt;
&lt;description&gt;Determines block reporting interval in 
milliseconds.&lt;/description&gt;
&lt;/property&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>DN æ‰«æè‡ªå·±èŠ‚ç‚¹å—ä¿¡æ¯åˆ—è¡¨çš„æ—¶é—´ï¼Œé»˜è®¤ 6 å°æ—¶</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;property&gt;
&lt;name&gt;dfs.datanode.directoryscan.interval&lt;/name&gt;
&lt;value&gt;21600s&lt;/value&gt;
&lt;description&gt;Interval in seconds for Datanode to scan data
directories and reconcile the difference between blocks in memory and on 
the disk.
Support multiple time unit suffix(case insensitive), as described
in dfs.heartbeat.interval.
&lt;/description&gt;
&lt;/property&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="æ•°æ®çš„å®Œæ•´æ€§"><a href="#æ•°æ®çš„å®Œæ•´æ€§" class="header-anchor">#</a> <strong>æ•°æ®çš„å®Œæ•´æ€§</strong></h4> <p>DN èŠ‚ç‚¹ä¿è¯æ•°æ®å®Œæ•´æ€§çš„æ–¹æ³•</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>ï¼ˆ1ï¼‰å½“ DataNode è¯»å– Block çš„æ—¶å€™ï¼Œå®ƒä¼šè®¡ç®— CheckSumã€‚
ï¼ˆ2ï¼‰å¦‚æœè®¡ç®—åçš„ CheckSumï¼Œä¸ Block åˆ›å»ºæ—¶å€¼ä¸ä¸€æ ·ï¼Œè¯´æ˜ Block å·²ç»æŸåã€‚
ï¼ˆ3ï¼‰Client è¯»å–å…¶ä»– DataNode ä¸Šçš„ Blockã€‚
ï¼ˆ4ï¼‰å¸¸è§çš„æ ¡éªŒç®—æ³• crcï¼ˆ32ï¼‰ï¼Œmd5ï¼ˆ128ï¼‰ï¼Œsha1ï¼ˆ160ï¼‰
ï¼ˆ5ï¼‰DataNode åœ¨å…¶æ–‡ä»¶åˆ›å»ºåå‘¨æœŸéªŒè¯ CheckSumã€‚
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="https://gitee.com/axcmsm/tmp/raw/master/bigdata/20210902191807.png" alt=""></p> <h4 id="æ‰çº¿æ—¶é™å‚æ•°è®¾ç½®"><a href="#æ‰çº¿æ—¶é™å‚æ•°è®¾ç½®" class="header-anchor">#</a> <strong>æ‰çº¿æ—¶é™å‚æ•°è®¾ç½®</strong>ï¼š</h4> <ol><li><p>DataNodeè¿›ç¨‹æ­»äº¡æˆ– è€…ç½‘ç»œæ•…éšœé€ æˆDataNode æ— æ³•ä¸NameNodeé€šä¿¡</p></li> <li><p>NameNodeä¸ä¼šç«‹å³æŠŠè¯¥èŠ‚ç‚¹åˆ¤å®š ä¸ºæ­»äº¡ï¼Œè¦ç»è¿‡ä¸€æ®µæ—¶é—´ï¼Œè¿™æ®µæ—¶é—´ æš‚ç§°ä½œè¶…æ—¶æ—¶é•¿ã€‚</p></li> <li><p>HDFSé»˜è®¤çš„è¶…æ—¶æ—¶é•¿ä¸º10åˆ†é’Ÿ+30ç§’</p></li> <li><p>å¦‚æœå®šä¹‰è¶…æ—¶æ—¶é—´ä¸ºTimeOutï¼Œåˆ™è¶…æ—¶æ—¶é•¿çš„è®¡ç®—å…¬å¼ä¸ºï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>TimeOut = 2 * dfs.namenode.heartbeat.recheck-interval + 10 * dfs.heartbeat.intervalã€‚
è€Œé»˜è®¤çš„dfs.namenode.heartbeat.recheck-interval å¤§å°ä¸º5åˆ†é’Ÿï¼Œdfs.heartbeat.intervalé»˜è®¤ä¸º3ç§’ã€‚
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="custom-block warning"><p class="custom-block-title">æ³¨æ„</p> <p>éœ€è¦æ³¨æ„çš„æ˜¯ hdfs-site.xml é…ç½®æ–‡ä»¶ä¸­çš„ heartbeat.recheck.interval çš„å•ä½ä¸ºæ¯«ç§’ï¼Œ dfs.heartbeat.interval çš„å•ä½ä¸ºç§’ã€‚</p></div> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;property&gt;
 &lt;name&gt;dfs.namenode.heartbeat.recheck-interval&lt;/name&gt;
 &lt;value&gt;300000&lt;/value&gt;
&lt;/property&gt;
&lt;property&gt;
 &lt;name&gt;dfs.heartbeat.interval&lt;/name&gt;
 &lt;value&gt;3&lt;/value&gt;
&lt;/property&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ol> <hr></div></div> <div class="page-slot page-slot-bottom"><!-- æ¨ªå‘è‡ªé€‚åº” -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6620245489"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=Hadoop" title="æ ‡ç­¾">#Hadoop</a><a href="/tags/?tag=hdfs" title="æ ‡ç­¾">#hdfs</a></div> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">2023/03/22, 21:16:55</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/hasy2d21do11dop/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Hadoopæ¦‚è¿°</div></a> <a href="/pages/1b8ea6/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">MapReduce</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/pages/hasy2d21do11dop/" class="prev">Hadoopæ¦‚è¿°</a></span> <span class="next"><a href="/pages/1b8ea6/">MapReduce</a>â†’
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">æœ€è¿‘æ›´æ–°</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/f53939/"><div>Spring6</div></a> <span>06-18</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/ba69ad/"><div>è‹¥ä¾äºŒå¼€</div></a> <span>06-17</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/998714/"><div>MongoDB</div></a> <span>06-16</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">æ›´å¤šæ–‡ç« &gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="http://wpa.qq.com/msgrd?v=3&amp;uin=2461475139&amp;site=qq&amp;menu=yes" title="å‘é‚®ä»¶" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/axcmsm" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=6757658477" title="å¬éŸ³ä¹" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="æœ¬ç«™ä¸»é¢˜">Vdoing</a> 
    | Copyright Â© 2021-2023
    <span>axcmsm | è½¬è½½æ³¨æ˜å‡ºå¤„ </span></div> <div class="buttons"><div title="è¿”å›é¡¶éƒ¨" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="å»è¯„è®º" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="ä¸»é¢˜æ¨¡å¼" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          è·Ÿéšç³»ç»Ÿ
        </li><li class="iconfont icon-rijianmoshi">
          æµ…è‰²æ¨¡å¼
        </li><li class="iconfont icon-yejianmoshi">
          æ·±è‰²æ¨¡å¼
        </li><li class="iconfont icon-yuedu">
          é˜…è¯»æ¨¡å¼
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><i class="close-but">Ã—</i> <div><!-- å›ºå®š160*160px -->
      <ins class="adsbygoogle"
          style="display:inline-block;max-width:160px;max-height:160px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="8377369658"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      </div></div></div></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.e7d9515b.js" defer></script><script src="/assets/js/2.125ae6e8.js" defer></script><script src="/assets/js/17.c9772d78.js" defer></script>
  </body>
</html>